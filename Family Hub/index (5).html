<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#e07a5f">
  <title>Turnbull-Shaw Family Hub</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
    :root{--terracotta:#e07a5f;--terracotta-dark:#c65d42;--sage:#81b29a;--sage-light:#c8e6d4;--cream:#f4f1de;--cream-dark:#e8e4cc;--navy:#3d405b;--navy-light:#6b7280;--gold:#f2cc8f;--gold-dark:#d9b36c;--rich:#4a90a4;--rich-light:#b8d4de;--shawnie:#d4729b;--shawnie-light:#f0c4d6;--madison:#f2a65a;--madison-light:#fcd9b6;--family:#81b29a;--family-light:#c8e6d4;--both:#9b8bb4;--both-light:#e0d8ec;--shadow-sm:0 2px 8px rgba(61,64,91,0.08);--shadow-md:0 8px 24px rgba(61,64,91,0.12);--shadow-lg:0 16px 48px rgba(61,64,91,0.16);--radius-sm:8px;--radius-md:12px;--radius-lg:16px;--radius-xl:24px}
    body{font-family:'DM Sans',sans-serif;background:var(--cream);color:var(--navy);min-height:100vh;line-height:1.5}
    h1,h2,h3,h4{font-family:'Fraunces',Georgia,serif;line-height:1.2}
    .app{min-height:100vh}
    .header{background:linear-gradient(135deg,var(--terracotta) 0%,var(--shawnie) 50%,var(--gold) 100%);color:white;padding:24px;position:relative}
    .header::after{content:'';position:absolute;bottom:0;left:0;right:0;height:40px;background:var(--cream);border-radius:40px 40px 0 0}
    .header-content{max-width:1400px;margin:0 auto;position:relative;z-index:1;padding-bottom:20px}
    .header-top{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px;margin-bottom:20px}
    .logo{display:flex;align-items:center;gap:12px}
    .logo-icon{width:48px;height:48px;background:rgba(255,255,255,0.95);border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:1.5rem}
    .logo-title{font-size:1.5rem;font-weight:700}
    .logo-sub{font-size:0.85rem;opacity:0.9}
    .header-btns{display:flex;gap:8px}
    .icon-btn{width:40px;height:40px;border-radius:var(--radius-md);border:none;background:rgba(255,255,255,0.2);color:white;font-size:1.1rem;cursor:pointer;transition:all 0.2s}
    .icon-btn:hover{background:rgba(255,255,255,0.3);transform:translateY(-2px)}
    .stats-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:10px}
    .stat-box{background:rgba(255,255,255,0.95);border-radius:var(--radius-md);padding:12px;text-align:center;color:var(--navy)}
    .stat-val{font-family:'Fraunces',serif;font-size:1.3rem;font-weight:700;color:var(--terracotta)}
    .stat-lbl{font-size:0.65rem;color:var(--navy-light);text-transform:uppercase;letter-spacing:0.5px}
    .nav-wrap{position:sticky;top:0;z-index:100;padding:12px 24px;background:var(--cream)}
    .nav{max-width:1400px;margin:0 auto;background:white;border-radius:999px;padding:4px;display:flex;gap:4px;overflow-x:auto;box-shadow:var(--shadow-md)}
    .nav::-webkit-scrollbar{display:none}
    .nav-btn{flex:1;min-width:fit-content;padding:10px 12px;border:none;border-radius:999px;background:transparent;font-family:inherit;font-size:0.8rem;font-weight:600;color:var(--navy-light);cursor:pointer;transition:all 0.2s;white-space:nowrap}
    .nav-btn:hover{background:var(--cream);color:var(--navy)}
    .nav-btn.active{background:var(--terracotta);color:white}
    .main{max-width:1400px;margin:0 auto;padding:0 24px 100px}
    .card{background:white;border-radius:var(--radius-xl);padding:24px;margin-bottom:20px;box-shadow:var(--shadow-sm)}
    .card-head{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px;flex-wrap:wrap;gap:12px}
    .card-title{font-size:1.25rem;display:flex;align-items:center;gap:10px}
    .card-title-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--terracotta),var(--gold));border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:1.1rem}
    .card-sub{color:var(--navy-light);font-size:0.9rem;margin-top:4px}
    .btn{padding:10px 20px;border:none;border-radius:999px;font-family:inherit;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.2s;display:inline-flex;align-items:center;gap:6px}
    .btn-primary{background:var(--terracotta);color:white}
    .btn-primary:hover{background:var(--terracotta-dark);transform:translateY(-1px)}
    .btn-secondary{background:var(--cream);color:var(--navy)}
    .btn-secondary:hover{background:var(--cream-dark)}
    .btn-success{background:var(--sage);color:white}
    .btn-danger{background:#ef4444;color:white}
    .btn-sm{padding:6px 12px;font-size:0.8rem}
    .btn-gold{background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:#5a4020}
    .form-group{margin-bottom:16px}
    .form-label{display:block;font-weight:600;color:var(--navy);margin-bottom:6px;font-size:0.9rem}
    .form-input,.form-select,.form-textarea{width:100%;padding:10px 14px;border:2px solid var(--cream-dark);border-radius:var(--radius-sm);font-family:inherit;font-size:0.95rem;background:white;color:var(--navy);transition:all 0.2s}
    .form-input:focus,.form-select:focus,.form-textarea:focus{outline:none;border-color:var(--terracotta);box-shadow:0 0 0 3px rgba(224,122,95,0.15)}
    .form-textarea{resize:vertical;min-height:80px}
    .form-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px}
    .tag{display:inline-flex;align-items:center;padding:4px 10px;border-radius:999px;font-size:0.75rem;font-weight:600;gap:4px}
    .tag-rich{background:var(--rich-light);color:#2d5a6b}
    .tag-shawnie{background:var(--shawnie-light);color:#8a3d5c}
    .tag-madison{background:var(--madison-light);color:#9a5f2e}
    .tag-family{background:var(--family-light);color:#3d6b54}
    .tag-both{background:var(--both-light);color:#5a4a6b}
    .modal-overlay{position:fixed;inset:0;background:rgba(61,64,91,0.6);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}
    .modal{background:white;border-radius:var(--radius-xl);max-width:700px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:var(--shadow-lg)}
    .modal-head{padding:20px 24px;border-bottom:1px solid var(--cream-dark);display:flex;justify-content:space-between;align-items:center}
    .modal-title{font-size:1.25rem}
    .modal-close{width:36px;height:36px;border-radius:50%;border:none;background:var(--cream);color:var(--navy);font-size:1.25rem;cursor:pointer}
    .modal-body{padding:24px}
    .modal-foot{padding:16px 24px;border-top:1px solid var(--cream-dark);display:flex;justify-content:flex-end;gap:12px}
    .phase-card{background:var(--cream);border-radius:var(--radius-lg);margin-bottom:16px;overflow:hidden;border:2px solid transparent;transition:all 0.2s}
    .phase-card.current{border-color:var(--terracotta)}
    .phase-header{padding:16px 20px;cursor:pointer;display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,white 0%,var(--cream) 100%)}
    .phase-icon{width:40px;height:40px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:1.25rem;flex-shrink:0}
    .phase-icon.p1{background:linear-gradient(135deg,#fef3c7,#fde68a)}
    .phase-icon.p2{background:linear-gradient(135deg,#dbeafe,#93c5fd)}
    .phase-icon.p3{background:linear-gradient(135deg,#d1fae5,#6ee7b7)}
    .phase-icon.p4{background:linear-gradient(135deg,#fce7f3,#f9a8d4)}
    .phase-icon.milestone{background:linear-gradient(135deg,var(--gold),var(--terracotta))}
    .phase-info{flex:1}
    .phase-title{font-weight:700;font-size:1rem}
    .phase-progress{font-size:0.8rem;color:var(--navy-light);margin-top:2px}
    .phase-body{padding:0 20px 20px;display:none}
    .phase-body.open{display:block}
    .task-item{display:flex;gap:12px;padding:12px;background:white;border-radius:var(--radius-md);margin-bottom:8px;transition:all 0.2s;align-items:flex-start}
    .task-item:hover{box-shadow:var(--shadow-sm)}
    .task-item.completed{opacity:0.6}
    .task-item.completed .task-text{text-decoration:line-through}
    .task-check{width:22px;height:22px;border:2px solid var(--navy-light);border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;background:white;transition:all 0.2s;margin-top:2px}
    .task-check:hover{border-color:var(--terracotta)}
    .task-check.checked{background:var(--sage);border-color:var(--sage);color:white}
    .task-text{flex:1;font-size:0.9rem;line-height:1.4}
    .budget-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}
    .budget-section{background:var(--cream);border-radius:var(--radius-lg);padding:20px}
    .budget-section-title{font-family:'Fraunces',serif;font-size:1rem;margin-bottom:16px;display:flex;align-items:center;gap:8px}
    .budget-row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid var(--cream-dark)}
    .budget-row:last-child{border-bottom:none}
    .budget-label{font-size:0.9rem;color:var(--navy)}
    .budget-value{font-family:'Fraunces',serif;font-weight:700}
    .budget-value.income{color:var(--sage)}
    .budget-value.expense{color:#ef4444}
    .budget-value.savings{color:var(--rich)}
    .budget-input{width:100px;padding:6px 10px;border:2px solid var(--cream-dark);border-radius:var(--radius-sm);font-family:inherit;font-size:0.9rem;text-align:right}
    .budget-input:focus{outline:none;border-color:var(--terracotta)}
    .budget-total{background:white;border-radius:var(--radius-md);padding:16px;margin-top:16px}
    .budget-total-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .budget-total-row:last-child{margin-bottom:0;padding-top:8px;border-top:2px solid var(--cream-dark)}
    .budget-total-label{font-weight:600}
    .budget-total-value{font-family:'Fraunces',serif;font-size:1.25rem;font-weight:700}
    .summary-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px}
    .summary-card{border-radius:var(--radius-lg);padding:20px;text-align:center}
    .summary-card.income{background:linear-gradient(135deg,#d1fae5,#a7f3d0)}
    .summary-card.expenses{background:linear-gradient(135deg,#fee2e2,#fecaca)}
    .summary-card.leftover{background:linear-gradient(135deg,#dbeafe,#bfdbfe)}
    .summary-card.savings{background:linear-gradient(135deg,#fef3c7,#fde68a)}
    .summary-label{font-size:0.75rem;text-transform:uppercase;font-weight:600;opacity:0.8;margin-bottom:4px}
    .summary-value{font-family:'Fraunces',serif;font-size:1.75rem;font-weight:700}
    .summary-sub{font-size:0.8rem;opacity:0.7;margin-top:4px}
    .progress-ring{width:120px;height:120px;margin:0 auto 16px}
    .habit-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}
    .habit-card{background:white;border:2px solid var(--cream-dark);border-radius:var(--radius-md);padding:14px;text-align:center;cursor:pointer;transition:all 0.2s}
    .habit-card:hover{border-color:var(--terracotta);transform:translateY(-2px)}
    .habit-card.done{background:linear-gradient(135deg,var(--sage-light),var(--sage));border-color:var(--sage)}
    .habit-card.done .habit-name{color:white}
    .habit-card.done .habit-person{color:rgba(255,255,255,0.8)}
    .habit-icon{font-size:1.5rem;margin-bottom:6px}
    .habit-name{font-weight:600;font-size:0.85rem;margin-bottom:4px}
    .habit-person{font-size:0.75rem;color:var(--navy-light)}
    .celebration{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:9999;pointer-events:none}
    .celebration-box{background:linear-gradient(135deg,var(--gold),var(--terracotta),var(--shawnie));color:white;padding:24px 40px;border-radius:999px;font-family:'Fraunces',serif;font-size:1.5rem;font-weight:700;box-shadow:var(--shadow-lg);animation:pop 0.5s ease}
    @keyframes pop{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
    .tip-box{background:linear-gradient(135deg,#fef3c7,#fde68a);border-left:4px solid var(--gold-dark);border-radius:var(--radius-md);padding:16px;margin:16px 0}
    .tip-title{font-weight:700;color:#92400e;margin-bottom:6px}
    .tip-text{color:#78350f;font-size:0.9rem}
    .info-box{background:linear-gradient(135deg,#e0f2fe,#bae6fd);border-left:4px solid var(--rich);border-radius:var(--radius-md);padding:16px;margin:16px 0}
    .info-title{font-weight:700;color:#0c4a6e;margin-bottom:6px}
    .info-text{color:#075985;font-size:0.9rem}
    .timeline-section{margin-bottom:24px}
    .timeline-year{font-family:'Fraunces',serif;font-size:1.1rem;color:var(--terracotta);margin-bottom:12px;padding-left:12px;border-left:3px solid var(--terracotta)}
    .fab{position:fixed;bottom:24px;right:24px;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,var(--terracotta),var(--shawnie));color:white;border:none;font-size:1.5rem;cursor:pointer;box-shadow:var(--shadow-lg);z-index:900;transition:all 0.2s}
    .fab:hover{transform:scale(1.1)}
    @media(max-width:768px){.header-top{flex-direction:column;align-items:flex-start}.stats-row{grid-template-columns:repeat(3,1fr)}.nav-btn{padding:8px 10px;font-size:0.7rem}.summary-cards{grid-template-columns:repeat(2,1fr)}}
  </style>
</head>
<body>
  <div id="root"><div style="display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(135deg,var(--terracotta),var(--shawnie))"><div style="text-align:center;color:white"><div style="font-size:3rem;margin-bottom:16px">üè†</div><div style="font-family:'Fraunces',serif;font-size:1.25rem">Loading Family Hub...</div></div></div></div>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>
  <script type="text/babel">
const{useState,useEffect,useMemo}=React;
const Check=()=><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>;
const ChevronDown=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="6 9 12 15 18 9"/></svg>;

const defaultRoadmap={
  "Phase 1 - Week 1-2: Research & Apply":{icon:"üîç",tasks:[
    {text:"Visit www.apprenticeships.gov.uk - search \"electrician Sheffield\"",done:false},
    {text:"Contact Sheffield College: 0114 260 2600 (ask about adult apprenticeships with NVQ credit)",done:false},
    {text:"Join Facebook: \"Sheffield Electricians\" / \"Sheffield Trades Jobs\" for networking",done:false},
    {text:"Check The Growth Company's next Skills Bootcamp intake (fast-track option)",done:false}
  ]},
  "Phase 1 - Week 3-4: Financial Preparation":{icon:"üí∞",tasks:[
    {text:"Apply for Advanced Learner Loan (if needed for college courses, ¬£3-5k, paid back like student loan)",done:false},
    {text:"Speak to Shawnie's employer about parental support/flexible working during your training",done:false},
    {text:"Calculate minimum income needed during apprenticeship (target ¬£20k to cover essentials)",done:false}
  ]},
  "Phase 1 - Month 2-3: Start Training":{icon:"üìö",tasks:[
    {text:"Begin apprenticeship or bootcamp (aim for April 2026 intake)",done:false},
    {text:"Set study schedule around Madison's routine (evening/weekend study)",done:false},
    {text:"Connect with mentor through training provider",done:false}
  ]},
  "Phase 2 - Budgeting Actions":{icon:"üìä",tasks:[
    {text:"Set up automatic transfers to savings on payday (make saving effortless)",done:false},
    {text:"Use separate \"bills account\" so leftover is truly disposable",done:false},
    {text:"Review spending quarterly - cut 1-2 subscriptions you don't use",done:false}
  ]},
  "Phase 3 - Boost Your Deposit Faster":{icon:"üè†",tasks:[
    {text:"Open Lifetime ISA (both of you): Government adds 25% (max ¬£1k/year bonus each = ¬£2k free money)",done:false},
    {text:"Use Help to Buy ISA if still available (check gov.uk)",done:false},
    {text:"Keep 3-6 months expenses in easy access savings, rest toward deposit",done:false},
    {text:"Shawnie's potential pay rises: PIP assessors average 2-3% annual increase",done:false}
  ]},
  "Phase 3 - Action This Month":{icon:"‚ö°",tasks:[
    {text:"Open Lifetime ISAs (Moneybox, Nutmeg, or bank providers)",done:false},
    {text:"Start paying in ¬£333/month each (maxes out ¬£4k annual limit)",done:false}
  ]},
  "Phase 4 - Pensions Actions":{icon:"üë¥",tasks:[
    {text:"Check if apprenticeship offers pension (usually 3-5% match)",done:false},
    {text:"When self-employed, open SIPP (Vanguard, Fidelity) - contribute 15-20%",done:false},
    {text:"Shawnie maximizes employer match (likely 5-10%)",done:false}
  ]},
  "Phase 4 - Madison's Future Fund":{icon:"üë∂",tasks:[
    {text:"Open Junior ISA this month (Fidelity, Vanguard have Junior ISAs)",done:false}
  ]},
  "Phase 4 - Protection Action":{icon:"üõ°Ô∏è",tasks:[
    {text:"Get life insurance quotes this month (use Compare The Market)",done:false},
    {text:"Add income protection to budget plan for 2028",done:false}
  ]}
};

const defaultMilestones={
  "2025-2026 (Year 1)":{icon:"üéØ",tasks:[
    {text:"Complete budget tracker (Month 1)",done:false},
    {text:"Apply to 3+ apprenticeships/training programs (Month 1-2)",done:false},
    {text:"Open Lifetime ISAs for both (Month 1)",done:false},
    {text:"Open Junior ISA for Madison (Month 1)",done:false},
    {text:"Get life insurance (Month 2)",done:false},
    {text:"Start training/apprenticeship (Month 3-6)",done:false},
    {text:"Build emergency fund to ¬£10k (by Dec 2026)",done:false}
  ]},
  "2027 (Year 2)":{icon:"üìà",tasks:[
    {text:"Half-qualified in trade",done:false},
    {text:"Emergency fund reaches ¬£18k",done:false},
    {text:"Start house deposit savings (¬£500+/month)",done:false},
    {text:"Madison starts childcare (assess costs)",done:false}
  ]},
  "2028 (Year 3)":{icon:"‚ö°",tasks:[
    {text:"Fully qualified - earning ¬£40k+",done:false},
    {text:"Decide: Employed vs self-employed",done:false},
    {text:"Get income protection insurance",done:false},
    {text:"House deposit hits ¬£30k - start viewing properties",done:false},
    {text:"Mortgage pre-approval",done:false}
  ]},
  "2029 (Year 4)":{icon:"üè°",tasks:[
    {text:"Buy first home in Sheffield",done:false},
    {text:"Settle into property (6-12 months)",done:false},
    {text:"Madison starts preschool",done:false},
    {text:"Combined income ¬£80k+",done:false}
  ]},
  "2030 (Year 5)":{icon:"üåü",tasks:[
    {text:"Specialist certifications complete (EV, renewables)",done:false},
    {text:"Earnings ¬£50k+ (you), Shawnie on track",done:false},
    {text:"Madison's fund: ¬£10-15k",done:false},
    {text:"Review investments, rebalance if needed",done:false}
  ]},
  "2035 (Age 45)":{icon:"üéÇ",tasks:[
    {text:"Combined net worth: ¬£250k+ (house equity + pensions + savings)",done:false},
    {text:"Madison age 10 - settled in school",done:false},
    {text:"Consider: Reduce work hours? Second income stream?",done:false}
  ]},
  "2055 (Retirement)":{icon:"üèñÔ∏è",tasks:[
    {text:"Pension pot: ¬£600k+ (target)",done:false},
    {text:"State pension: ~¬£11k/year each",done:false},
    {text:"Private pension: ~¬£25-30k/year combined",done:false},
    {text:"House paid off",done:false},
    {text:"Madison independent",done:false}
  ]}
};

const defaultBudget={
  income:{
    shawnieNetPay:0,
    richNetPay:0,
    childBenefit:0,
    universalCredit:0,
    pip:0,
    other:0
  },
  expenses:{
    rent:0,
    councilTax:0,
    electric:0,
    gas:0,
    water:0,
    broadband:0,
    phonesRich:0,
    phonesShawnie:0,
    carFinance:0,
    carInsurance:0,
    petrol:0,
    groceries:0,
    childcare:0,
    subscriptions:0,
    insurance:0,
    other:0
  },
  savings:{
    emergencyFund:0,
    houseDeposit:0,
    lisaRich:0,
    lisaShawnie:0,
    madisonJISA:0,
    pensionExtra:0
  }
};

const defaultHabits=[
  {id:1,person:'Rich',task:'Hoover house',frequency:'daily',icon:'üßπ',completed:false},
  {id:2,person:'Rich',task:'Bath Madison',frequency:'daily',icon:'üõÅ',completed:false},
  {id:3,person:'Rich',task:'Wash clothes',frequency:'daily',icon:'üëï',completed:false},
  {id:4,person:'Rich',task:'Cook dinner',frequency:'daily',icon:'üç≥',completed:false},
  {id:5,person:'Shawnie',task:'Change/dress Madison',frequency:'daily',icon:'üë∂',completed:false},
  {id:6,person:'Shawnie',task:'Family admin',frequency:'daily',icon:'üìã',completed:false},
  {id:7,person:'Shawnie',task:'Check finances',frequency:'daily',icon:'üí∞',completed:false},
  {id:8,person:'Both',task:'Deep clean kitchen',frequency:'weekly',icon:'‚ú®',completed:false},
  {id:9,person:'Both',task:'Food shopping',frequency:'weekly',icon:'üõí',completed:false},
  {id:10,person:'Shawnie',task:'Weekly budget review',frequency:'weekly',icon:'üìä',completed:false},
  {id:11,person:'Family',task:'Board game night',frequency:'weekly',icon:'üé≤',completed:false}
];

const createDefaultData=()=>({
  roadmap:defaultRoadmap,
  milestones:defaultMilestones,
  budget:defaultBudget,
  habits:defaultHabits,
  lastReset:new Date().toDateString(),
  stats:{tasksCompleted:0,habitsCompleted:0}
});

const createDefaultConfig=()=>({
  familyName:'Turnbull-Shaw',
  location:'Seaham, UK',
  targetLocation:'Sheffield',
  startDate:'2025-12-04',
  richPension:72766.58,
  shawniePension:0,
  emergencyFundTotal:0,
  houseDepositTotal:0,
  generalSavings:0
});

const App=()=>{
  const[tab,setTab]=useState('today');
  const[data,setData]=useState(createDefaultData);
  const[config,setConfig]=useState(createDefaultConfig);
  const[expandedPhases,setExpandedPhases]=useState({});
  const[expandedMilestones,setExpandedMilestones]=useState({});
  const[showCelebration,setShowCelebration]=useState(false);
  const[celebrationText,setCelebrationText]=useState('');

  useEffect(()=>{
    try{
      const savedData=localStorage.getItem('familyHubDataV4');
      const savedConfig=localStorage.getItem('familyHubConfigV4');
      if(savedData)setData(JSON.parse(savedData));
      if(savedConfig)setConfig(JSON.parse(savedConfig));
    }catch(e){console.error(e)}
  },[]);

  useEffect(()=>{localStorage.setItem('familyHubDataV4',JSON.stringify(data))},[data]);
  useEffect(()=>{localStorage.setItem('familyHubConfigV4',JSON.stringify(config))},[config]);

  useEffect(()=>{
    const today=new Date().toDateString();
    if(data.lastReset!==today){
      setData(prev=>({...prev,habits:prev.habits.map(h=>h.frequency==='daily'?{...h,completed:false}:h),lastReset:today}));
    }
  },[]);

  const celebrate=(text='üéâ Great Progress!')=>{setCelebrationText(text);setShowCelebration(true);setTimeout(()=>setShowCelebration(false),2000)};

  const toggleRoadmapTask=(phase,taskIndex)=>{
    const wasCompleted=data.roadmap[phase].tasks[taskIndex].done;
    if(!wasCompleted)celebrate('‚úÖ Task Complete!');
    setData(prev=>({
      ...prev,
      roadmap:{...prev.roadmap,[phase]:{...prev.roadmap[phase],tasks:prev.roadmap[phase].tasks.map((t,i)=>i===taskIndex?{...t,done:!t.done}:t)}},
      stats:{...prev.stats,tasksCompleted:prev.stats.tasksCompleted+(wasCompleted?-1:1)}
    }));
  };

  const toggleMilestoneTask=(year,taskIndex)=>{
    const wasCompleted=data.milestones[year].tasks[taskIndex].done;
    if(!wasCompleted)celebrate('üèÜ Milestone Progress!');
    setData(prev=>({
      ...prev,
      milestones:{...prev.milestones,[year]:{...prev.milestones[year],tasks:prev.milestones[year].tasks.map((t,i)=>i===taskIndex?{...t,done:!t.done}:t)}},
      stats:{...prev.stats,tasksCompleted:prev.stats.tasksCompleted+(wasCompleted?-1:1)}
    }));
  };

  const toggleHabit=(id)=>{
    const habit=data.habits.find(h=>h.id===id);
    if(!habit?.completed)celebrate('‚ú® Habit Done!');
    setData(prev=>({...prev,habits:prev.habits.map(h=>h.id===id?{...h,completed:!h.completed}:h),stats:{...prev.stats,habitsCompleted:prev.stats.habitsCompleted+(habit?.completed?-1:1)}}));
  };

  const updateBudget=(category,field,value)=>{
    setData(prev=>({...prev,budget:{...prev.budget,[category]:{...prev.budget[category],[field]:Number(value)||0}}}));
  };

  // Calculate totals
  const totalIncome=Object.values(data.budget.income).reduce((a,b)=>a+b,0);
  const totalExpenses=Object.values(data.budget.expenses).reduce((a,b)=>a+b,0);
  const totalSavingsMonthly=Object.values(data.budget.savings).reduce((a,b)=>a+b,0);
  const leftover=totalIncome-totalExpenses-totalSavingsMonthly;
  const totalSaved=config.emergencyFundTotal+config.houseDepositTotal+config.generalSavings;

  // Calculate roadmap progress
  const roadmapStats=useMemo(()=>{
    let total=0,done=0;
    Object.values(data.roadmap).forEach(p=>{total+=p.tasks.length;done+=p.tasks.filter(t=>t.done).length});
    return{total,done,pct:total?Math.round((done/total)*100):0};
  },[data.roadmap]);

  const milestoneStats=useMemo(()=>{
    let total=0,done=0;
    Object.values(data.milestones).forEach(m=>{total+=m.tasks.length;done+=m.tasks.filter(t=>t.done).length});
    return{total,done,pct:total?Math.round((done/total)*100):0};
  },[data.milestones]);

  const daysSinceStart=Math.max(0,Math.floor((new Date()-new Date(config.startDate))/86400000));

  const exportData=()=>{
    const blob=new Blob([JSON.stringify({config,data,exportDate:new Date().toISOString()},null,2)],{type:'application/json'});
    const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;
    a.download=`family-hub-${new Date().toISOString().split('T')[0]}.json`;a.click();
  };

  const importData=(e)=>{
    const file=e.target.files[0];if(!file)return;
    const reader=new FileReader();
    reader.onload=(event)=>{try{const imported=JSON.parse(event.target.result);if(imported.config)setConfig(imported.config);if(imported.data)setData(imported.data);alert('Imported!')}catch{alert('Error')}};
    reader.readAsText(file);
  };

  const incomeLabels={shawnieNetPay:"Shawnie Net Pay",richNetPay:"Rich Net Pay",childBenefit:"Child Benefit",universalCredit:"Universal Credit",pip:"PIP",other:"Other Income"};
  const expenseLabels={rent:"Rent/Mortgage",councilTax:"Council Tax",electric:"Electric",gas:"Gas",water:"Water",broadband:"Broadband",phonesRich:"Phone (Rich)",phonesShawnie:"Phone (Shawnie)",carFinance:"Car Finance",carInsurance:"Car Insurance",petrol:"Petrol",groceries:"Groceries",childcare:"Childcare",subscriptions:"Subscriptions",insurance:"Insurance",other:"Other"};
  const savingsLabels={emergencyFund:"Emergency Fund",houseDeposit:"House Deposit",lisaRich:"LISA (Rich)",lisaShawnie:"LISA (Shawnie)",madisonJISA:"Madison JISA",pensionExtra:"Extra Pension"};

  return(
    <div className="app">
      {showCelebration&&<div className="celebration"><div className="celebration-box">{celebrationText}</div></div>}

      <header className="header"><div className="header-content">
        <div className="header-top">
          <div className="logo"><div className="logo-icon">üè†</div><div><div className="logo-title">{config.familyName} Family Hub</div><div className="logo-sub">{config.location} ‚Üí {config.targetLocation}</div></div></div>
          <div className="header-btns">
            <button className="icon-btn" onClick={exportData} title="Export">üíæ</button>
            <label className="icon-btn" title="Import">üìÇ<input type="file" accept=".json" onChange={importData} style={{display:'none'}}/></label>
          </div>
        </div>
        <div className="stats-row">
          <div className="stat-box"><div className="stat-val">{daysSinceStart}</div><div className="stat-lbl">Days</div></div>
          <div className="stat-box"><div className="stat-val">{roadmapStats.pct}%</div><div className="stat-lbl">Roadmap</div></div>
          <div className="stat-box"><div className="stat-val">¬£{totalSaved.toLocaleString()}</div><div className="stat-lbl">Saved</div></div>
          <div className="stat-box"><div className="stat-val">¬£{Math.round(config.richPension/1000)}k</div><div className="stat-lbl">Pension</div></div>
          <div className="stat-box"><div className="stat-val">{leftover>=0?'+':''}{leftover}</div><div className="stat-lbl">Monthly</div></div>
        </div>
      </div></header>

      <div className="nav-wrap"><nav className="nav">
        {[{id:'today',label:'üìã Today'},{id:'budget',label:'üìä Budget'},{id:'roadmap',label:'üó∫Ô∏è Roadmap'},{id:'milestones',label:'üèÜ Milestones'},{id:'savings',label:'üí∞ Savings'},{id:'rota',label:'üßπ Rota'},{id:'settings',label:'‚öôÔ∏è'}].map(t=>
          <button key={t.id} className={`nav-btn ${tab===t.id?'active':''}`} onClick={()=>setTab(t.id)}>{t.label}</button>
        )}
      </nav></div>

      <main className="main">
        {tab==='today'&&<>
          <div className="card">
            <h2 className="card-title" style={{marginBottom:20}}><span className="card-title-icon">üìã</span>{new Date().toLocaleDateString('en-GB',{weekday:'long',day:'numeric',month:'long'})}</h2>
            <h3 style={{marginBottom:16}}>Daily Habits</h3>
            <div className="habit-grid">{data.habits.filter(h=>h.frequency==='daily').map(h=>
              <div key={h.id} className={`habit-card ${h.completed?'done':''}`} onClick={()=>toggleHabit(h.id)}>
                <div className="habit-icon">{h.icon}</div><div className="habit-name">{h.task}</div><div className="habit-person">{h.person}</div>
              </div>
            )}</div>
            <h3 style={{marginTop:24,marginBottom:16}}>Weekly Tasks</h3>
            <div className="habit-grid">{data.habits.filter(h=>h.frequency==='weekly').map(h=>
              <div key={h.id} className={`habit-card ${h.completed?'done':''}`} onClick={()=>toggleHabit(h.id)}>
                <div className="habit-icon">{h.icon}</div><div className="habit-name">{h.task}</div><div className="habit-person">{h.person}</div>
              </div>
            )}</div>
          </div>
          <div className="card">
            <h3 style={{marginBottom:16}}>üìä Quick Budget Summary</h3>
            <div className="summary-cards">
              <div className="summary-card income"><div className="summary-label">Monthly Income</div><div className="summary-value">¬£{totalIncome.toLocaleString()}</div></div>
              <div className="summary-card expenses"><div className="summary-label">Expenses</div><div className="summary-value">¬£{totalExpenses.toLocaleString()}</div></div>
              <div className="summary-card savings"><div className="summary-label">Saving</div><div className="summary-value">¬£{totalSavingsMonthly.toLocaleString()}</div></div>
              <div className="summary-card leftover" style={{background:leftover>=0?'linear-gradient(135deg,#d1fae5,#a7f3d0)':'linear-gradient(135deg,#fee2e2,#fecaca)'}}><div className="summary-label">Leftover</div><div className="summary-value" style={{color:leftover>=0?'#059669':'#dc2626'}}>¬£{leftover.toLocaleString()}</div></div>
            </div>
          </div>
          <div className="card">
            <h3 style={{marginBottom:16}}>üó∫Ô∏è Next Actions</h3>
            {Object.entries(data.roadmap).slice(0,2).map(([phase,phaseData])=>
              <div key={phase} style={{marginBottom:16}}>
                <div style={{fontWeight:600,marginBottom:8,fontSize:'0.9rem'}}>{phaseData.icon} {phase}</div>
                {phaseData.tasks.filter(t=>!t.done).slice(0,2).map((task,i)=>
                  <div key={i} className="task-item" onClick={()=>toggleRoadmapTask(phase,phaseData.tasks.indexOf(task))}>
                    <div className={`task-check ${task.done?'checked':''}`}>{task.done&&<Check/>}</div>
                    <div className="task-text">{task.text}</div>
                  </div>
                )}
              </div>
            )}
            <button className="btn btn-secondary" onClick={()=>setTab('roadmap')}>View Full Roadmap ‚Üí</button>
          </div>
        </>}

        {tab==='budget'&&<>
          <div className="summary-cards">
            <div className="summary-card income"><div className="summary-label">Monthly Income</div><div className="summary-value">¬£{totalIncome.toLocaleString()}</div><div className="summary-sub">per month</div></div>
            <div className="summary-card expenses"><div className="summary-label">Total Expenses</div><div className="summary-value">¬£{totalExpenses.toLocaleString()}</div><div className="summary-sub">per month</div></div>
            <div className="summary-card savings"><div className="summary-label">Monthly Savings</div><div className="summary-value">¬£{totalSavingsMonthly.toLocaleString()}</div><div className="summary-sub">per month</div></div>
            <div className="summary-card leftover" style={{background:leftover>=0?'linear-gradient(135deg,#d1fae5,#a7f3d0)':'linear-gradient(135deg,#fee2e2,#fecaca)'}}>
              <div className="summary-label">Leftover</div>
              <div className="summary-value" style={{color:leftover>=0?'#059669':'#dc2626'}}>¬£{leftover.toLocaleString()}</div>
              <div className="summary-sub">{leftover>=0?'spare each month':'overspending!'}</div>
            </div>
          </div>

          <div className="budget-grid">
            <div className="budget-section">
              <div className="budget-section-title">üíö Income</div>
              {Object.entries(incomeLabels).map(([key,label])=>
                <div key={key} className="budget-row">
                  <span className="budget-label">{label}</span>
                  <input type="number" className="budget-input" value={data.budget.income[key]||''} placeholder="0" onChange={e=>updateBudget('income',key,e.target.value)}/>
                </div>
              )}
              <div className="budget-total">
                <div className="budget-total-row"><span className="budget-total-label">Total Income</span><span className="budget-total-value" style={{color:'#059669'}}>¬£{totalIncome.toLocaleString()}</span></div>
              </div>
            </div>

            <div className="budget-section">
              <div className="budget-section-title">üè† Housing & Bills</div>
              {Object.entries(expenseLabels).slice(0,6).map(([key,label])=>
                <div key={key} className="budget-row">
                  <span className="budget-label">{label}</span>
                  <input type="number" className="budget-input" value={data.budget.expenses[key]||''} placeholder="0" onChange={e=>updateBudget('expenses',key,e.target.value)}/>
                </div>
              )}
            </div>

            <div className="budget-section">
              <div className="budget-section-title">üöó Transport & Living</div>
              {Object.entries(expenseLabels).slice(6,12).map(([key,label])=>
                <div key={key} className="budget-row">
                  <span className="budget-label">{label}</span>
                  <input type="number" className="budget-input" value={data.budget.expenses[key]||''} placeholder="0" onChange={e=>updateBudget('expenses',key,e.target.value)}/>
                </div>
              )}
            </div>

            <div className="budget-section">
              <div className="budget-section-title">üì¶ Other Expenses</div>
              {Object.entries(expenseLabels).slice(12).map(([key,label])=>
                <div key={key} className="budget-row">
                  <span className="budget-label">{label}</span>
                  <input type="number" className="budget-input" value={data.budget.expenses[key]||''} placeholder="0" onChange={e=>updateBudget('expenses',key,e.target.value)}/>
                </div>
              )}
              <div className="budget-total">
                <div className="budget-total-row"><span className="budget-total-label">Total Expenses</span><span className="budget-total-value" style={{color:'#dc2626'}}>¬£{totalExpenses.toLocaleString()}</span></div>
              </div>
            </div>

            <div className="budget-section">
              <div className="budget-section-title">üí∞ Monthly Savings</div>
              {Object.entries(savingsLabels).map(([key,label])=>
                <div key={key} className="budget-row">
                  <span className="budget-label">{label}</span>
                  <input type="number" className="budget-input" value={data.budget.savings[key]||''} placeholder="0" onChange={e=>updateBudget('savings',key,e.target.value)}/>
                </div>
              )}
              <div className="budget-total">
                <div className="budget-total-row"><span className="budget-total-label">Monthly Savings</span><span className="budget-total-value" style={{color:'#0284c7'}}>¬£{totalSavingsMonthly.toLocaleString()}</span></div>
                <div className="budget-total-row"><span className="budget-total-label">Annual Savings</span><span className="budget-total-value" style={{color:'#0284c7'}}>¬£{(totalSavingsMonthly*12).toLocaleString()}</span></div>
              </div>
            </div>
          </div>

          <div className="card" style={{marginTop:20}}>
            <h3 style={{marginBottom:16}}>üí° Budget Tips</h3>
            <div className="tip-box"><div className="tip-title">50/30/20 Rule</div><div className="tip-text">Aim for 50% needs, 30% wants, 20% savings. Your current savings rate: {totalIncome>0?Math.round((totalSavingsMonthly/totalIncome)*100):0}%</div></div>
            <div className="info-box"><div className="info-title">Emergency Fund Target</div><div className="info-text">3-6 months expenses = ¬£{(totalExpenses*3).toLocaleString()} - ¬£{(totalExpenses*6).toLocaleString()}</div></div>
          </div>
        </>}

        {tab==='roadmap'&&<div className="card">
          <div className="card-head"><div><h2 className="card-title"><span className="card-title-icon">üó∫Ô∏è</span>Action Roadmap</h2><p className="card-sub">{roadmapStats.done}/{roadmapStats.total} tasks complete ({roadmapStats.pct}%)</p></div></div>
          {Object.entries(data.roadmap).map(([phase,phaseData])=>{
            const done=phaseData.tasks.filter(t=>t.done).length;
            const total=phaseData.tasks.length;
            const isOpen=expandedPhases[phase];
            return<div key={phase} className={`phase-card ${done<total?'current':''}`}>
              <div className="phase-header" onClick={()=>setExpandedPhases(prev=>({...prev,[phase]:!prev[phase]}))}>
                <div className="phase-icon p1">{phaseData.icon}</div>
                <div className="phase-info"><div className="phase-title">{phase}</div><div className="phase-progress">{done}/{total} complete</div></div>
                <div style={{transform:isOpen?'rotate(180deg)':'none',transition:'transform 0.2s'}}><ChevronDown/></div>
              </div>
              <div className={`phase-body ${isOpen?'open':''}`}>
                {phaseData.tasks.map((task,i)=>
                  <div key={i} className={`task-item ${task.done?'completed':''}`} onClick={()=>toggleRoadmapTask(phase,i)}>
                    <div className={`task-check ${task.done?'checked':''}`}>{task.done&&<Check/>}</div>
                    <div className="task-text">{task.text}</div>
                  </div>
                )}
              </div>
            </div>
          })}
        </div>}

        {tab==='milestones'&&<div className="card">
          <div className="card-head"><div><h2 className="card-title"><span className="card-title-icon">üèÜ</span>Life Milestones</h2><p className="card-sub">{milestoneStats.done}/{milestoneStats.total} milestones ({milestoneStats.pct}%)</p></div></div>
          {Object.entries(data.milestones).map(([year,yearData])=>{
            const done=yearData.tasks.filter(t=>t.done).length;
            const total=yearData.tasks.length;
            const isOpen=expandedMilestones[year];
            return<div key={year} className="phase-card">
              <div className="phase-header" onClick={()=>setExpandedMilestones(prev=>({...prev,[year]:!prev[year]}))}>
                <div className="phase-icon milestone">{yearData.icon}</div>
                <div className="phase-info"><div className="phase-title">{year}</div><div className="phase-progress">{done}/{total} complete</div></div>
                <div style={{transform:isOpen?'rotate(180deg)':'none',transition:'transform 0.2s'}}><ChevronDown/></div>
              </div>
              <div className={`phase-body ${isOpen?'open':''}`}>
                {yearData.tasks.map((task,i)=>
                  <div key={i} className={`task-item ${task.done?'completed':''}`} onClick={()=>toggleMilestoneTask(year,i)}>
                    <div className={`task-check ${task.done?'checked':''}`}>{task.done&&<Check/>}</div>
                    <div className="task-text">{task.text}</div>
                  </div>
                )}
              </div>
            </div>
          })}
        </div>}

        {tab==='savings'&&<>
          <div className="summary-cards">
            <div className="summary-card income"><div className="summary-label">Emergency Fund</div><div className="summary-value">¬£{config.emergencyFundTotal.toLocaleString()}</div></div>
            <div className="summary-card savings"><div className="summary-label">House Deposit</div><div className="summary-value">¬£{config.houseDepositTotal.toLocaleString()}</div></div>
            <div className="summary-card leftover"><div className="summary-label">General Savings</div><div className="summary-value">¬£{config.generalSavings.toLocaleString()}</div></div>
            <div className="summary-card expenses" style={{background:'linear-gradient(135deg,#fef3c7,#fde68a)'}}><div className="summary-label">Total Saved</div><div className="summary-value" style={{color:'#92400e'}}>¬£{totalSaved.toLocaleString()}</div></div>
          </div>

          <div className="card">
            <h3 style={{marginBottom:16}}>Update Savings Totals</h3>
            <div className="budget-grid">
              <div className="form-group"><label className="form-label">Emergency Fund (¬£)</label><input type="number" className="form-input" value={config.emergencyFundTotal} onChange={e=>setConfig(c=>({...c,emergencyFundTotal:Number(e.target.value)||0}))}/></div>
              <div className="form-group"><label className="form-label">House Deposit (¬£)</label><input type="number" className="form-input" value={config.houseDepositTotal} onChange={e=>setConfig(c=>({...c,houseDepositTotal:Number(e.target.value)||0}))}/></div>
              <div className="form-group"><label className="form-label">General Savings (¬£)</label><input type="number" className="form-input" value={config.generalSavings} onChange={e=>setConfig(c=>({...c,generalSavings:Number(e.target.value)||0}))}/></div>
            </div>
          </div>

          <div className="card">
            <h3 style={{marginBottom:16}}>üìà Savings Progress</h3>
            <div style={{marginBottom:20}}>
              <div style={{display:'flex',justifyContent:'space-between',marginBottom:8}}><span>Emergency Fund</span><span>¬£{config.emergencyFundTotal.toLocaleString()} / ¬£10,000</span></div>
              <div style={{height:12,background:'var(--cream-dark)',borderRadius:999,overflow:'hidden'}}><div style={{height:'100%',width:`${Math.min(100,(config.emergencyFundTotal/10000)*100)}%`,background:'linear-gradient(90deg,#10b981,#059669)',borderRadius:999}}/></div>
            </div>
            <div style={{marginBottom:20}}>
              <div style={{display:'flex',justifyContent:'space-between',marginBottom:8}}><span>House Deposit</span><span>¬£{config.houseDepositTotal.toLocaleString()} / ¬£25,000</span></div>
              <div style={{height:12,background:'var(--cream-dark)',borderRadius:999,overflow:'hidden'}}><div style={{height:'100%',width:`${Math.min(100,(config.houseDepositTotal/25000)*100)}%`,background:'linear-gradient(90deg,var(--terracotta),var(--gold))',borderRadius:999}}/></div>
            </div>
            <div className="tip-box"><div className="tip-title">üí° LISA Bonus</div><div className="tip-text">If you put your house deposit into Lifetime ISAs, the government adds 25%! ¬£20k deposited = ¬£25k with bonus.</div></div>
          </div>

          <div className="card">
            <h3 style={{marginBottom:16}}>üë¥ Pensions</h3>
            <div className="form-row">
              <div className="form-group"><label className="form-label">Rich's Pension (¬£)</label><input type="number" className="form-input" value={config.richPension} onChange={e=>setConfig(c=>({...c,richPension:Number(e.target.value)||0}))}/></div>
              <div className="form-group"><label className="form-label">Shawnie's Pension (¬£)</label><input type="number" className="form-input" value={config.shawniePension} onChange={e=>setConfig(c=>({...c,shawniePension:Number(e.target.value)||0}))}/></div>
            </div>
            <div className="info-box"><div className="info-title">Combined Pension Value</div><div className="info-text" style={{fontSize:'1.25rem',fontWeight:700}}>¬£{(config.richPension+config.shawniePension).toLocaleString()}</div></div>
          </div>
        </>}

        {tab==='rota'&&<div className="card">
          <div className="card-head"><div><h2 className="card-title"><span className="card-title-icon">üßπ</span>Cleaning & Habits Rota</h2></div></div>
          <h3 style={{marginBottom:16}}>Daily Tasks</h3>
          <div className="habit-grid" style={{marginBottom:24}}>{data.habits.filter(h=>h.frequency==='daily').map(h=>
            <div key={h.id} className={`habit-card ${h.completed?'done':''}`} onClick={()=>toggleHabit(h.id)}>
              <div className="habit-icon">{h.icon}</div><div className="habit-name">{h.task}</div><div className="habit-person">{h.person}</div>
            </div>
          )}</div>
          <h3 style={{marginBottom:16}}>Weekly Tasks</h3>
          <div className="habit-grid">{data.habits.filter(h=>h.frequency==='weekly').map(h=>
            <div key={h.id} className={`habit-card ${h.completed?'done':''}`} onClick={()=>toggleHabit(h.id)}>
              <div className="habit-icon">{h.icon}</div><div className="habit-name">{h.task}</div><div className="habit-person">{h.person}</div>
            </div>
          )}</div>
          <div className="tip-box" style={{marginTop:24}}><div className="tip-title">üîÑ Task Split</div><div className="tip-text"><strong>Rich:</strong> Hoover, bath Madison, laundry, cooking, tidying<br/><strong>Shawnie:</strong> Madison dressing, admin, finances, budgeting<br/><strong>Both:</strong> Deep cleans, shopping, date nights</div></div>
        </div>}

        {tab==='settings'&&<div className="card">
          <div className="card-head"><div><h2 className="card-title"><span className="card-title-icon">‚öôÔ∏è</span>Settings</h2></div></div>
          <div className="budget-grid">
            <div className="budget-section">
              <div className="budget-section-title">üë®‚Äçüë©‚Äçüëß Family Info</div>
              <div className="form-group"><label className="form-label">Family Name</label><input type="text" className="form-input" value={config.familyName} onChange={e=>setConfig(c=>({...c,familyName:e.target.value}))}/></div>
              <div className="form-group"><label className="form-label">Current Location</label><input type="text" className="form-input" value={config.location} onChange={e=>setConfig(c=>({...c,location:e.target.value}))}/></div>
              <div className="form-group"><label className="form-label">Target Location</label><input type="text" className="form-input" value={config.targetLocation} onChange={e=>setConfig(c=>({...c,targetLocation:e.target.value}))}/></div>
              <div className="form-group"><label className="form-label">Start Date</label><input type="date" className="form-input" value={config.startDate} onChange={e=>setConfig(c=>({...c,startDate:e.target.value}))}/></div>
            </div>
          </div>
          <div style={{marginTop:24,display:'flex',flexWrap:'wrap',gap:12}}>
            <button className="btn btn-secondary" onClick={exportData}>üíæ Export All Data</button>
            <label className="btn btn-secondary" style={{cursor:'pointer'}}>üìÇ Import Data<input type="file" accept=".json" onChange={importData} style={{display:'none'}}/></label>
            <button className="btn btn-danger" onClick={()=>{if(confirm('Reset ALL data? This cannot be undone!')){localStorage.clear();window.location.reload()}}}>üîÑ Reset Everything</button>
          </div>
        </div>}
      </main>

      <button className="fab" onClick={()=>setTab('today')}>üè†</button>
    </div>
  );
};

const root=ReactDOM.createRoot(document.getElementById('root'));
root.render(<App/>);
  </script>
</body>
</html>
