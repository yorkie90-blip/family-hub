<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#e07a5f">
  <title>Turnbull-Shaw Family Hub</title>
  <link rel="manifest" href="/manifest.json">
  
  <!-- Distinctive Typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300;9..144,400;9..144,500;9..144,600;9..144,700;9..144,800&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      /* Warm Mediterranean palette */
      --terracotta: #e07a5f;
      --terracotta-dark: #c65d42;
      --sage: #81b29a;
      --sage-light: #a8d5ba;
      --cream: #f4f1de;
      --cream-dark: #e8e4cc;
      --navy: #3d405b;
      --navy-light: #565a7a;
      --gold: #f2cc8f;
      --gold-dark: #d9b36c;
      
      /* Person colors */
      --rich: #4a90a4;
      --rich-light: #b8d4de;
      --shawnie: #d4729b;
      --shawnie-light: #f0c4d6;
      --madison: #f2a65a;
      --madison-light: #fcd9b6;
      --family: #81b29a;
      --family-light: #c8e6d4;
      
      /* Shadows */
      --shadow-sm: 0 2px 8px rgba(61, 64, 91, 0.08);
      --shadow-md: 0 8px 24px rgba(61, 64, 91, 0.12);
      --shadow-lg: 0 16px 48px rgba(61, 64, 91, 0.16);
      --shadow-glow: 0 0 40px rgba(224, 122, 95, 0.3);
      
      /* Spacing */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
      
      /* Radius */
      --radius-sm: 8px;
      --radius-md: 16px;
      --radius-lg: 24px;
      --radius-xl: 32px;
      --radius-full: 9999px;
    }
    
    body {
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--cream);
      color: var(--navy);
      min-height: 100vh;
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    /* Subtle texture overlay */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      opacity: 0.03;
      pointer-events: none;
      z-index: 0;
    }
    
    h1, h2, h3 {
      font-family: 'Fraunces', Georgia, serif;
      font-optical-sizing: auto;
      line-height: 1.2;
    }
    
    /* APP WRAPPER */
    .app {
      position: relative;
      z-index: 1;
      min-height: 100vh;
    }
    
    /* HEADER - Warm, welcoming hero */
    .header {
      background: linear-gradient(135deg, var(--terracotta) 0%, #d4729b 50%, var(--gold) 100%);
      padding: var(--space-xl) var(--space-lg);
      position: relative;
      overflow: hidden;
    }
    
    .header::before {
      content: '';
      position: absolute;
      inset: 0;
      background: 
        radial-gradient(ellipse at 20% 80%, rgba(255,255,255,0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 40%);
    }
    
    .header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: var(--cream);
      border-radius: 60px 60px 0 0;
    }
    
    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
      padding-bottom: var(--space-xl);
    }
    
    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--space-lg);
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: var(--space-md);
    }
    
    .logo-icon {
      width: 56px;
      height: 56px;
      background: rgba(255,255,255,0.95);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.75rem;
      box-shadow: var(--shadow-md);
    }
    
    .logo-text {
      color: white;
    }
    
    .logo-title {
      font-size: 1.75rem;
      font-weight: 700;
      text-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    .logo-subtitle {
      font-size: 0.875rem;
      opacity: 0.9;
      font-weight: 500;
    }
    
    .header-actions {
      display: flex;
      gap: var(--space-sm);
    }
    
    .icon-btn {
      width: 44px;
      height: 44px;
      border-radius: var(--radius-md);
      border: none;
      background: rgba(255,255,255,0.2);
      color: white;
      font-size: 1.25rem;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(8px);
    }
    
    .icon-btn:hover {
      background: rgba(255,255,255,0.3);
      transform: translateY(-2px);
    }
    
    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--space-md);
    }
    
    .stat-card {
      background: rgba(255,255,255,0.95);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      text-align: center;
      box-shadow: var(--shadow-md);
      transition: all 0.3s ease;
      animation: fadeSlideUp 0.5s ease backwards;
    }
    
    .stat-card:nth-child(1) { animation-delay: 0.1s; }
    .stat-card:nth-child(2) { animation-delay: 0.15s; }
    .stat-card:nth-child(3) { animation-delay: 0.2s; }
    .stat-card:nth-child(4) { animation-delay: 0.25s; }
    
    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }
    
    .stat-value {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 2.25rem;
      font-weight: 700;
      color: var(--terracotta);
      line-height: 1;
      margin-bottom: var(--space-xs);
    }
    
    .stat-label {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--navy-light);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    /* Progress ring inside stat */
    .stat-progress {
      position: relative;
      width: 80px;
      height: 80px;
      margin: 0 auto var(--space-sm);
    }
    
    .stat-progress svg {
      transform: rotate(-90deg);
    }
    
    .stat-progress-bg {
      fill: none;
      stroke: var(--cream-dark);
      stroke-width: 8;
    }
    
    .stat-progress-fill {
      fill: none;
      stroke: var(--terracotta);
      stroke-width: 8;
      stroke-linecap: round;
      transition: stroke-dashoffset 1s ease;
    }
    
    .stat-progress-text {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Fraunces', Georgia, serif;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--navy);
    }
    
    /* NAVIGATION - Floating pill style */
    .nav-wrapper {
      position: sticky;
      top: 0;
      z-index: 100;
      padding: var(--space-md) var(--space-lg);
      background: var(--cream);
    }
    
    .nav {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: var(--radius-full);
      padding: var(--space-xs);
      display: flex;
      gap: var(--space-xs);
      box-shadow: var(--shadow-md);
      overflow-x: auto;
      scrollbar-width: none;
    }
    
    .nav::-webkit-scrollbar { display: none; }
    
    .nav-item {
      flex: 1;
      min-width: fit-content;
      padding: var(--space-md) var(--space-lg);
      border: none;
      border-radius: var(--radius-full);
      background: transparent;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--navy-light);
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
    }
    
    .nav-item:hover {
      background: var(--cream);
      color: var(--navy);
    }
    
    .nav-item.active {
      background: var(--terracotta);
      color: white;
      box-shadow: 0 4px 16px rgba(224, 122, 95, 0.4);
    }
    
    .nav-icon {
      font-size: 1.1rem;
    }
    
    /* MAIN CONTENT */
    .main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 var(--space-lg) var(--space-2xl);
    }
    
    /* CARDS */
    .card {
      background: white;
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      margin-bottom: var(--space-lg);
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
      animation: fadeSlideUp 0.4s ease;
    }
    
    .card:hover {
      box-shadow: var(--shadow-md);
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--space-lg);
    }
    
    .card-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--navy);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }
    
    .card-title-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--terracotta), var(--gold));
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
    }
    
    .card-subtitle {
      color: var(--navy-light);
      margin-top: var(--space-xs);
      font-size: 0.95rem;
    }
    
    /* TODAY'S FOCUS - Main dashboard */
    .today-hero {
      background: linear-gradient(135deg, var(--cream) 0%, #fef8f4 100%);
      border: 2px solid var(--cream-dark);
      border-radius: var(--radius-xl);
      padding: var(--space-xl);
      margin-bottom: var(--space-lg);
      position: relative;
      overflow: hidden;
    }
    
    .today-hero::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -20%;
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, rgba(224, 122, 95, 0.1) 0%, transparent 70%);
      pointer-events: none;
    }
    
    .today-date {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 2rem;
      font-weight: 700;
      color: var(--navy);
      margin-bottom: var(--space-xs);
    }
    
    .today-greeting {
      font-size: 1.1rem;
      color: var(--navy-light);
      margin-bottom: var(--space-lg);
    }
    
    .quick-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-md);
    }
    
    .quick-stat {
      background: white;
      border-radius: var(--radius-md);
      padding: var(--space-md);
      display: flex;
      align-items: center;
      gap: var(--space-md);
      box-shadow: var(--shadow-sm);
    }
    
    .quick-stat-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }
    
    .quick-stat-icon.tasks { background: linear-gradient(135deg, var(--sage-light), var(--sage)); }
    .quick-stat-icon.habits { background: linear-gradient(135deg, var(--gold), var(--gold-dark)); }
    .quick-stat-icon.streak { background: linear-gradient(135deg, var(--shawnie-light), var(--shawnie)); }
    
    .quick-stat-value {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--navy);
    }
    
    .quick-stat-label {
      font-size: 0.8rem;
      color: var(--navy-light);
    }
    
    /* TASK GRID */
    .task-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: var(--space-md);
    }
    
    .task-item {
      background: white;
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      border: 2px solid var(--cream-dark);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    
    .task-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--terracotta);
      transition: width 0.3s ease;
    }
    
    .task-item:hover {
      border-color: var(--terracotta);
      transform: translateX(4px);
      box-shadow: var(--shadow-md);
    }
    
    .task-item:hover::before {
      width: 6px;
    }
    
    .task-item.completed {
      opacity: 0.6;
      background: var(--cream);
    }
    
    .task-item.completed::before {
      background: var(--sage);
    }
    
    .task-item.completed .task-name {
      text-decoration: line-through;
    }
    
    .task-top {
      display: flex;
      align-items: flex-start;
      gap: var(--space-md);
    }
    
    .task-checkbox {
      width: 24px;
      height: 24px;
      border: 2px solid var(--cream-dark);
      border-radius: var(--radius-sm);
      background: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      flex-shrink: 0;
      margin-top: 2px;
    }
    
    .task-checkbox:hover {
      border-color: var(--terracotta);
      background: #fef8f4;
    }
    
    .task-checkbox.checked {
      background: var(--sage);
      border-color: var(--sage);
      color: white;
    }
    
    .task-info {
      flex: 1;
    }
    
    .task-name {
      font-weight: 600;
      color: var(--navy);
      margin-bottom: var(--space-xs);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }
    
    .task-name-icon {
      font-size: 1.1rem;
    }
    
    .task-context {
      font-size: 0.875rem;
      color: var(--navy-light);
      margin-bottom: var(--space-sm);
    }
    
    .task-meta {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-sm);
      margin-top: var(--space-sm);
    }
    
    .tag {
      padding: 4px 12px;
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .tag-person {
      background: var(--cream);
      color: var(--navy);
    }
    
    .tag-person.rich { background: var(--rich-light); color: #2d5a6b; }
    .tag-person.shawnie { background: var(--shawnie-light); color: #8a3d5c; }
    .tag-person.madison { background: var(--madison-light); color: #9a5f2e; }
    .tag-person.family { background: var(--family-light); color: #3d6b54; }
    .tag-person.both { background: #e8e0f0; color: #5a4a6b; }
    
    .tag-priority {
      background: var(--cream);
    }
    .tag-priority.critical { background: #fee2e2; color: #991b1b; }
    .tag-priority.high { background: #fed7aa; color: #9a3412; }
    .tag-priority.medium { background: #fef3c7; color: #92400e; }
    .tag-priority.low { background: var(--sage-light); color: #3d6b54; }
    
    .tag-due {
      background: var(--cream-dark);
      color: var(--navy);
    }
    
    .tag-due.overdue {
      background: #fee2e2;
      color: #991b1b;
    }
    
    .tag-due.today {
      background: var(--gold);
      color: #78350f;
    }
    
    /* GOAL CARDS - Expandable */
    .goal-card {
      background: white;
      border-radius: var(--radius-lg);
      overflow: hidden;
      margin-bottom: var(--space-md);
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    
    .goal-card:hover {
      box-shadow: var(--shadow-md);
      border-color: var(--cream-dark);
    }
    
    .goal-header {
      padding: var(--space-lg);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: var(--space-md);
      background: linear-gradient(135deg, white 0%, var(--cream) 100%);
    }
    
    .goal-icon {
      width: 56px;
      height: 56px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.75rem;
      flex-shrink: 0;
    }
    
    .goal-icon.rich { background: linear-gradient(135deg, var(--rich-light), var(--rich)); }
    .goal-icon.shawnie { background: linear-gradient(135deg, var(--shawnie-light), var(--shawnie)); }
    .goal-icon.family { background: linear-gradient(135deg, var(--family-light), var(--family)); }
    .goal-icon.madison { background: linear-gradient(135deg, var(--madison-light), var(--madison)); }
    
    .goal-info {
      flex: 1;
    }
    
    .goal-title {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--navy);
      margin-bottom: var(--space-xs);
    }
    
    .goal-description {
      font-size: 0.9rem;
      color: var(--navy-light);
    }
    
    .goal-progress-wrap {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      margin-top: var(--space-sm);
    }
    
    .goal-progress-bar {
      flex: 1;
      height: 8px;
      background: var(--cream-dark);
      border-radius: var(--radius-full);
      overflow: hidden;
    }
    
    .goal-progress-fill {
      height: 100%;
      border-radius: var(--radius-full);
      transition: width 0.6s ease;
    }
    
    .goal-progress-fill.rich { background: linear-gradient(90deg, var(--rich), var(--rich-light)); }
    .goal-progress-fill.shawnie { background: linear-gradient(90deg, var(--shawnie), var(--shawnie-light)); }
    .goal-progress-fill.family { background: linear-gradient(90deg, var(--family), var(--family-light)); }
    .goal-progress-fill.madison { background: linear-gradient(90deg, var(--madison), var(--madison-light)); }
    
    .goal-progress-text {
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--navy);
      white-space: nowrap;
    }
    
    .goal-expand {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--cream);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }
    
    .goal-expand.expanded {
      transform: rotate(180deg);
    }
    
    .goal-content {
      padding: 0 var(--space-lg) var(--space-lg);
      display: none;
    }
    
    .goal-content.expanded {
      display: block;
      animation: fadeSlideUp 0.3s ease;
    }
    
    /* Steps list */
    .steps-list {
      margin-top: var(--space-md);
    }
    
    .step-item {
      display: flex;
      align-items: flex-start;
      gap: var(--space-md);
      padding: var(--space-md);
      background: var(--cream);
      border-radius: var(--radius-md);
      margin-bottom: var(--space-sm);
      transition: all 0.2s ease;
    }
    
    .step-item:hover {
      background: var(--cream-dark);
    }
    
    .step-item.completed {
      opacity: 0.5;
    }
    
    .step-item.completed .step-name {
      text-decoration: line-through;
    }
    
    .step-check {
      width: 22px;
      height: 22px;
      border: 2px solid var(--navy-light);
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-top: 2px;
      transition: all 0.2s ease;
      background: white;
    }
    
    .step-check:hover {
      border-color: var(--terracotta);
    }
    
    .step-check.checked {
      background: var(--sage);
      border-color: var(--sage);
      color: white;
    }
    
    .step-details {
      flex: 1;
    }
    
    .step-name {
      font-weight: 600;
      color: var(--navy);
      margin-bottom: var(--space-xs);
    }
    
    .step-meta {
      font-size: 0.85rem;
      color: var(--navy-light);
    }
    
    .step-notes {
      margin-top: var(--space-sm);
      padding: var(--space-sm) var(--space-md);
      background: white;
      border-radius: var(--radius-sm);
      font-size: 0.875rem;
      color: var(--navy-light);
      border-left: 3px solid var(--sage);
    }
    
    /* Day breakdown */
    .day-breakdown {
      margin-top: var(--space-sm);
      padding: var(--space-md);
      background: white;
      border-radius: var(--radius-sm);
      border: 1px solid var(--cream-dark);
    }
    
    .day-breakdown-title {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--navy);
      margin-bottom: var(--space-sm);
    }
    
    .day-task {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-xs) 0;
      font-size: 0.85rem;
      border-bottom: 1px solid var(--cream);
    }
    
    .day-task:last-child {
      border-bottom: none;
    }
    
    .day-num {
      background: var(--terracotta);
      color: white;
      padding: 2px 8px;
      border-radius: var(--radius-full);
      font-weight: 600;
      font-size: 0.75rem;
    }
    
    .day-duration {
      color: var(--navy-light);
      margin-left: auto;
      font-size: 0.8rem;
    }
    
    /* Tip boxes */
    .tip-box {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      margin-top: var(--space-lg);
      border-left: 4px solid var(--gold-dark);
    }
    
    .tip-title {
      font-weight: 700;
      color: #92400e;
      margin-bottom: var(--space-sm);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }
    
    .tip-content {
      color: #78350f;
      font-size: 0.95rem;
      white-space: pre-line;
    }
    
    /* Resources */
    .resources-box {
      background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      margin-top: var(--space-md);
      border-left: 4px solid var(--rich);
    }
    
    .resources-title {
      font-weight: 700;
      color: #0c4a6e;
      margin-bottom: var(--space-sm);
    }
    
    .resource-link {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      padding: var(--space-xs) var(--space-md);
      background: white;
      color: var(--rich);
      text-decoration: none;
      border-radius: var(--radius-full);
      font-size: 0.85rem;
      font-weight: 600;
      margin: var(--space-xs) var(--space-xs) 0 0;
      transition: all 0.2s ease;
    }
    
    .resource-link:hover {
      background: var(--rich);
      color: white;
      transform: translateY(-2px);
    }
    
    /* HABITS SECTION */
    .habits-section {
      margin-top: var(--space-xl);
    }
    
    .habits-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: var(--space-md);
    }
    
    .habit-card {
      background: white;
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      text-align: center;
      border: 2px solid var(--cream-dark);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .habit-card:hover {
      border-color: var(--terracotta);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    
    .habit-card.completed {
      background: linear-gradient(135deg, var(--sage-light), var(--sage));
      border-color: var(--sage);
    }
    
    .habit-card.completed .habit-icon {
      animation: bounce 0.5s ease;
    }
    
    .habit-icon {
      font-size: 2rem;
      margin-bottom: var(--space-sm);
    }
    
    .habit-name {
      font-weight: 600;
      color: var(--navy);
      margin-bottom: var(--space-xs);
      font-size: 0.9rem;
    }
    
    .habit-card.completed .habit-name {
      color: white;
    }
    
    .habit-person {
      font-size: 0.75rem;
      color: var(--navy-light);
    }
    
    .habit-card.completed .habit-person {
      color: rgba(255,255,255,0.8);
    }
    
    .habit-streak {
      margin-top: var(--space-sm);
      font-size: 0.8rem;
      font-weight: 700;
      color: var(--gold-dark);
    }
    
    .habit-card.completed .habit-streak {
      color: white;
    }
    
    /* FINANCES SECTION */
    .finance-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--space-md);
    }
    
    .finance-card {
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      position: relative;
      overflow: hidden;
    }
    
    .finance-card.rich {
      background: linear-gradient(135deg, var(--rich-light), var(--rich));
    }
    
    .finance-card.shawnie {
      background: linear-gradient(135deg, var(--shawnie-light), var(--shawnie));
    }
    
    .finance-card.combined {
      background: linear-gradient(135deg, var(--family-light), var(--family));
    }
    
    .finance-card.savings {
      background: linear-gradient(135deg, var(--gold), var(--gold-dark));
    }
    
    .finance-card.pension {
      background: linear-gradient(135deg, var(--cream-dark), #d1d5db);
    }
    
    .finance-label {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: var(--space-sm);
      opacity: 0.8;
    }
    
    .finance-value {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: var(--space-sm);
    }
    
    .finance-input {
      width: 100%;
      padding: var(--space-sm) var(--space-md);
      border: none;
      border-radius: var(--radius-sm);
      background: rgba(255,255,255,0.3);
      font-size: 1rem;
      font-family: inherit;
      color: inherit;
      margin-top: var(--space-sm);
    }
    
    .finance-input:focus {
      outline: none;
      background: rgba(255,255,255,0.5);
    }
    
    .finance-input::placeholder {
      opacity: 0.6;
    }
    
    /* Progress to goal */
    .goal-progress-section {
      background: white;
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      margin-top: var(--space-lg);
      box-shadow: var(--shadow-sm);
    }
    
    .income-bar {
      height: 32px;
      background: var(--cream-dark);
      border-radius: var(--radius-full);
      overflow: hidden;
      position: relative;
      margin: var(--space-lg) 0;
    }
    
    .income-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--terracotta), var(--shawnie), var(--gold));
      border-radius: var(--radius-full);
      transition: width 1s ease;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: var(--space-md);
    }
    
    .income-bar-text {
      color: white;
      font-weight: 700;
      font-size: 0.85rem;
    }
    
    .income-markers {
      display: flex;
      justify-content: space-between;
      font-size: 0.85rem;
      color: var(--navy-light);
    }
    
    .income-breakdown {
      margin-top: var(--space-lg);
      display: grid;
      gap: var(--space-sm);
    }
    
    .income-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--space-md);
      background: var(--cream);
      border-radius: var(--radius-sm);
    }
    
    .income-row.highlight {
      background: linear-gradient(135deg, var(--sage-light), var(--family-light));
    }
    
    .income-row.gap {
      background: linear-gradient(135deg, #fef3c7, #fde68a);
    }
    
    /* MONEY TIPS */
    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: var(--space-md);
    }
    
    .money-tip-card {
      background: white;
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      border: 2px solid var(--cream-dark);
      transition: all 0.3s ease;
    }
    
    .money-tip-card:hover {
      border-color: var(--gold);
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }
    
    .money-tip-icon {
      font-size: 2rem;
      margin-bottom: var(--space-md);
    }
    
    .money-tip-title {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--navy);
      margin-bottom: var(--space-sm);
    }
    
    .money-tip-content {
      font-size: 0.9rem;
      color: var(--navy-light);
      line-height: 1.6;
    }
    
    .money-tip-category {
      margin-top: var(--space-md);
      display: inline-block;
      padding: 4px 12px;
      background: var(--gold);
      color: #78350f;
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
    }
    
    /* CALENDAR */
    .calendar-section .month-group {
      margin-bottom: var(--space-xl);
    }
    
    .month-title {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--navy);
      margin-bottom: var(--space-md);
      padding-bottom: var(--space-sm);
      border-bottom: 2px solid var(--cream-dark);
    }
    
    .calendar-item {
      display: flex;
      gap: var(--space-md);
      padding: var(--space-md);
      background: white;
      border-radius: var(--radius-md);
      margin-bottom: var(--space-sm);
      border-left: 4px solid var(--terracotta);
      transition: all 0.2s ease;
    }
    
    .calendar-item:hover {
      transform: translateX(4px);
      box-shadow: var(--shadow-sm);
    }
    
    .calendar-date {
      text-align: center;
      min-width: 60px;
    }
    
    .calendar-day {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--terracotta);
    }
    
    .calendar-month {
      font-size: 0.75rem;
      color: var(--navy-light);
      text-transform: uppercase;
    }
    
    .calendar-info {
      flex: 1;
    }
    
    .calendar-task {
      font-weight: 600;
      color: var(--navy);
      margin-bottom: var(--space-xs);
    }
    
    .calendar-goal {
      font-size: 0.85rem;
      color: var(--navy-light);
    }
    
    /* SETTINGS */
    .settings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--space-lg);
    }
    
    .setting-group {
      background: var(--cream);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
    }
    
    .setting-group-title {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--navy);
      margin-bottom: var(--space-md);
    }
    
    .setting-item {
      margin-bottom: var(--space-md);
    }
    
    .setting-label {
      display: block;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--navy-light);
      margin-bottom: var(--space-xs);
    }
    
    .setting-input {
      width: 100%;
      padding: var(--space-md);
      border: 2px solid var(--cream-dark);
      border-radius: var(--radius-sm);
      font-size: 1rem;
      font-family: inherit;
      background: white;
      color: var(--navy);
      transition: all 0.2s ease;
    }
    
    .setting-input:focus {
      outline: none;
      border-color: var(--terracotta);
      box-shadow: 0 0 0 3px rgba(224, 122, 95, 0.1);
    }
    
    /* FLOATING ACTION BUTTON */
    .fab {
      position: fixed;
      bottom: var(--space-xl);
      right: var(--space-xl);
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--terracotta), var(--shawnie));
      color: white;
      border: none;
      font-size: 1.75rem;
      cursor: pointer;
      box-shadow: var(--shadow-lg), var(--shadow-glow);
      z-index: 1000;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .fab:hover {
      transform: scale(1.1) rotate(90deg);
      box-shadow: var(--shadow-lg), 0 0 60px rgba(224, 122, 95, 0.5);
    }
    
    /* MODAL */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(61, 64, 91, 0.6);
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: var(--space-lg);
      animation: fadeIn 0.2s ease;
    }
    
    .modal {
      background: white;
      border-radius: var(--radius-xl);
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
      animation: slideUp 0.3s ease;
    }
    
    .modal-header {
      padding: var(--space-xl);
      border-bottom: 1px solid var(--cream-dark);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 1.5rem;
      color: var(--navy);
    }
    
    .modal-close {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: var(--cream);
      color: var(--navy);
      font-size: 1.25rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .modal-close:hover {
      background: var(--cream-dark);
      transform: rotate(90deg);
    }
    
    .modal-body {
      padding: var(--space-xl);
    }
    
    .modal-actions {
      padding: var(--space-lg) var(--space-xl);
      border-top: 1px solid var(--cream-dark);
      display: flex;
      justify-content: flex-end;
      gap: var(--space-md);
    }
    
    /* BUTTONS */
    .btn {
      padding: var(--space-md) var(--space-xl);
      border: none;
      border-radius: var(--radius-full);
      font-family: inherit;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--terracotta), var(--terracotta-dark));
      color: white;
      box-shadow: 0 4px 12px rgba(224, 122, 95, 0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(224, 122, 95, 0.4);
    }
    
    .btn-secondary {
      background: var(--cream);
      color: var(--navy);
    }
    
    .btn-secondary:hover {
      background: var(--cream-dark);
    }
    
    .btn-success {
      background: linear-gradient(135deg, var(--sage), #059669);
      color: white;
    }
    
    /* CELEBRATION */
    .celebration {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      pointer-events: none;
      animation: fadeIn 0.3s ease;
    }
    
    .celebration-content {
      background: linear-gradient(135deg, var(--gold), var(--terracotta), var(--shawnie));
      color: white;
      padding: var(--space-xl) var(--space-2xl);
      border-radius: var(--radius-full);
      font-family: 'Fraunces', Georgia, serif;
      font-size: 1.75rem;
      font-weight: 700;
      box-shadow: var(--shadow-lg), var(--shadow-glow);
      animation: celebrate 0.6s ease;
    }
    
    /* Data actions */
    .data-actions {
      display: flex;
      gap: var(--space-md);
      margin-top: var(--space-lg);
      padding-top: var(--space-lg);
      border-top: 1px solid var(--cream-dark);
    }
    
    /* ANIMATIONS */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes fadeSlideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes celebrate {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }
    
    /* LOADING */
    .loading {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, var(--terracotta), var(--shawnie));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      z-index: 10000;
    }
    
    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(255,255,255,0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: var(--space-lg);
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      font-family: 'Fraunces', Georgia, serif;
      font-size: 1.5rem;
    }
    
    /* RESPONSIVE */
    @media (max-width: 900px) {
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .quick-stats {
        grid-template-columns: 1fr;
      }
      
      .header-top {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-md);
      }
      
      .header-actions {
        width: 100%;
        justify-content: flex-end;
      }
    }
    
    @media (max-width: 640px) {
      .logo-title {
        font-size: 1.25rem;
      }
      
      .stats-grid {
        grid-template-columns: 1fr 1fr;
        gap: var(--space-sm);
      }
      
      .stat-card {
        padding: var(--space-md);
      }
      
      .stat-value {
        font-size: 1.75rem;
      }
      
      .nav-item {
        padding: var(--space-sm) var(--space-md);
        font-size: 0.85rem;
      }
      
      .nav-item span:not(.nav-icon) {
        display: none;
      }
      
      .card {
        padding: var(--space-lg);
        border-radius: var(--radius-md);
      }
      
      .task-grid {
        grid-template-columns: 1fr;
      }
      
      .habits-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .fab {
        width: 56px;
        height: 56px;
        bottom: var(--space-lg);
        right: var(--space-lg);
      }
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: var(--cream);
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--cream-dark);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #c9c5b0;
    }
  </style>
</head>
<body>
  <div id="root">
    <div class="loading">
      <div class="loading-spinner"></div>
      <div class="loading-text">Loading Family Hub...</div>
    </div>
  </div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>

  <script>
    if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
      document.body.innerHTML = '<div style="padding: 40px; text-align: center; font-family: sans-serif;"><h1>Loading Error</h1><p>Please refresh the page</p></div>';
    }

    window.storage = {
      async get(key) {
        try {
          const value = localStorage.getItem(key);
          return value ? { value } : null;
        } catch { return null; }
      },
      async set(key, value) {
        try {
          localStorage.setItem(key, value);
          return true;
        } catch { return false; }
      }
    };
  </script>

  <script type="text/babel">
    const { useState, useEffect, useCallback } = React;

    // Checkmark icon component
    const CheckIcon = () => (
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    );

    // Chevron icon
    const ChevronIcon = ({ direction = 'down' }) => (
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" style={{ transform: direction === 'up' ? 'rotate(180deg)' : 'none' }}>
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    );

    const FamilyHub = () => {
      const [activeTab, setActiveTab] = useState('today');
      const [expandedGoals, setExpandedGoals] = useState({});
      const [showCelebration, setShowCelebration] = useState(false);
      const [showModal, setShowModal] = useState(false);
      const [modalType, setModalType] = useState(null);

      const [config, setConfig] = useState({
        startDate: '2024-12-04',
        familyName: 'Turnbull-Shaw',
        location: 'Seaham, UK',
        targetLocation: 'Sheffield',
        moveDate: '2025-12-01',
        richIncome: 0,
        shawnieIncome: 0,
        shawnieReturnDate: '2026-07-01',
        shawnieReturnIncome: 40000,
        richPension: 72766.58,
        shawniePension: 0,
        savings: 0,
        incomeTarget: 95000
      });

      const [data, setData] = useState({
        goals: [
          {
            id: 1,
            person: 'Rich',
            category: 'Career',
            title: 'Become Qualified Electrician',
            description: 'Complete full electrician training pathway to qualification',
            priority: 'critical',
            targetDate: '2028-12-01',
            icon: '‚ö°',
            steps: [
              {
                id: 1,
                task: 'Research Sheffield electrician apprenticeship programs',
                completed: false,
                dueDate: '2024-12-15',
                estimatedHours: 4,
                notes: 'Check Sheffield College, City College, local employers. Look for Level 2 and Level 3 programs.',
                links: ['https://www.gov.uk/apply-apprenticeship', 'https://www.findapprenticeship.service.gov.uk/'],
                dayTasks: [
                  { day: 1, task: 'Google "electrician apprenticeships Sheffield"', duration: 30 },
                  { day: 1, task: 'List 10 potential programs/employers', duration: 30 },
                  { day: 2, task: 'Visit gov.uk apprenticeship site', duration: 30 },
                  { day: 2, task: 'Check entry requirements for each', duration: 45 },
                  { day: 3, task: 'Join r/electricians and UK Electricians Facebook group', duration: 20 },
                  { day: 4, task: 'Create comparison spreadsheet', duration: 60 }
                ]
              },
              {
                id: 2,
                task: 'Call 5 training providers for information packs',
                completed: false,
                dueDate: '2024-12-20',
                estimatedHours: 2,
                notes: 'Sheffield College: 0114 260 2600. Ask about adult apprenticeships, funding, start dates.',
                dayTasks: [
                  { day: 1, task: 'Prepare questions list', duration: 20 },
                  { day: 1, task: 'Call Sheffield College', duration: 15 },
                  { day: 2, task: 'Call 2 local employers', duration: 30 },
                  { day: 3, task: 'Call 2 more providers', duration: 30 }
                ]
              },
              {
                id: 3,
                task: 'Update CV highlighting transferable skills',
                completed: false,
                dueDate: '2024-12-27',
                estimatedHours: 3,
                notes: 'Focus on: problem-solving, working with tools, customer service, reliability.',
                dayTasks: [
                  { day: 1, task: 'List all past jobs and responsibilities', duration: 45 },
                  { day: 2, task: 'Identify transferable skills', duration: 45 },
                  { day: 3, task: 'Write strong personal statement', duration: 60 },
                  { day: 4, task: 'Format CV professionally', duration: 30 }
                ]
              },
              { id: 4, task: 'Apply to 5 apprenticeship positions', completed: false, dueDate: '2025-01-15', estimatedHours: 8, notes: 'Apply through gov.uk, direct to employers, and via Indeed/Reed.' },
              { id: 5, task: 'Attend interviews and secure apprenticeship', completed: false, dueDate: '2025-03-01', estimatedHours: 10 },
              { id: 6, task: 'Begin Level 2 Electrical Installation', completed: false, dueDate: '2025-09-01' },
              { id: 7, task: 'Complete Level 3 Electrical Installation', completed: false, dueDate: '2027-06-01' },
              { id: 8, task: 'Achieve 18th Edition Wiring Regulations', completed: false, dueDate: '2027-09-01', notes: '3-day course + exam.' },
              { id: 9, task: 'Pass AM2 practical assessment', completed: false, dueDate: '2028-09-01', notes: 'Final practical test for JIB Gold Card.' },
              { id: 10, task: 'Secure qualified electrician position ¬£40k+', completed: false, dueDate: '2028-12-01' }
            ],
            tips: 'üí° UK Electrician Salary Guide:\n‚Ä¢ Apprentice: ¬£12-18k\n‚Ä¢ Newly qualified: ¬£25-32k\n‚Ä¢ 2-3 years: ¬£35-42k\n‚Ä¢ 5+ years: ¬£40-50k\n‚Ä¢ Self-employed: ¬£45-65k',
            resources: [
              { name: 'Gov.uk Apprenticeships', url: 'https://www.gov.uk/become-apprentice' },
              { name: 'Find An Apprenticeship', url: 'https://www.findapprenticeship.service.gov.uk/' },
              { name: 'JIB Grading Scheme', url: 'https://www.jib.org.uk/' }
            ]
          },
          {
            id: 2,
            person: 'Shawnie',
            category: 'Career',
            title: 'Return to Work & Progress to Senior Role',
            description: 'Return as PIP Assessor July 2026, progress to senior position',
            priority: 'high',
            targetDate: '2027-07-01',
            icon: 'üíº',
            steps: [
              { id: 1, task: 'Research childcare options in Sheffield', completed: false, dueDate: '2026-04-01', estimatedHours: 6, notes: 'Check nurseries near workplace, costs (¬£800-1200/month), Ofsted ratings.' },
              { id: 2, task: 'Secure childcare place for Madison', completed: false, dueDate: '2026-05-01' },
              { id: 3, task: 'Prepare for return to work', completed: false, dueDate: '2026-06-15' },
              { id: 4, task: 'Return to PIP Assessor role', completed: false, dueDate: '2026-07-01', notes: 'First day back! ¬£40k salary resumes.' },
              { id: 5, task: 'Complete mandatory CPD requirements', completed: false, dueDate: '2026-12-01', notes: '35 hours per year for revalidation.' },
              { id: 6, task: 'Research senior PIP assessor roles', completed: false, dueDate: '2027-03-01', notes: 'Band 6 equivalent, ¬£45-50k.' },
              { id: 7, task: 'Apply for senior position', completed: false, dueDate: '2027-06-01' }
            ],
            tips: 'üí° PIP Assessor Career Path:\n‚Ä¢ Band 5: ¬£28-34k\n‚Ä¢ Band 6: ¬£34-42k\n‚Ä¢ Band 7: ¬£42-50k\n‚Ä¢ Management: ¬£45-60k'
          },
          {
            id: 3,
            person: 'Family',
            category: 'Financial',
            title: 'Move to Sheffield',
            description: 'Relocate family from Seaham to Sheffield by December 2025',
            priority: 'critical',
            targetDate: '2025-12-01',
            icon: 'üè†',
            steps: [
              { id: 1, task: 'Research Sheffield neighborhoods', completed: false, dueDate: '2025-03-01', estimatedHours: 8, notes: 'Focus on: Crookes, Walkley, Nether Edge, Hillsborough.' },
              { id: 2, task: 'Visit Sheffield to view areas', completed: false, dueDate: '2025-06-01', notes: 'Plan weekend trip.' },
              { id: 3, task: 'View 10+ rental properties', completed: false, dueDate: '2025-08-01', notes: 'Budget: ¬£800-1000/month for 2-bed.' },
              { id: 4, task: 'Secure rental property', completed: false, dueDate: '2025-09-01', notes: 'Pay deposit, sign agreement.' },
              { id: 5, task: 'Arrange removal services', completed: false, dueDate: '2025-11-01' },
              { id: 6, task: 'Update all addresses', completed: false, dueDate: '2025-12-01' },
              { id: 7, task: 'Move day!', completed: false, dueDate: '2025-12-01', notes: 'üéâ New chapter begins!' }
            ],
            resources: [
              { name: 'Rightmove Sheffield', url: 'https://www.rightmove.co.uk/property-to-rent/Sheffield.html' },
              { name: 'Sheffield Schools', url: 'https://www.sheffield.gov.uk/schools/admissions' }
            ]
          },
          {
            id: 4,
            person: 'Madison',
            category: 'Education',
            title: "Madison's Milestones & Education",
            description: "Key milestones and school journey",
            priority: 'medium',
            targetDate: '2035-09-01',
            icon: 'üéì',
            steps: [
              { id: 1, task: 'Apply for 15 hours free childcare (age 2)', completed: false, dueDate: '2026-04-01' },
              { id: 2, task: 'Apply for 30 hours free childcare (age 3)', completed: false, dueDate: '2027-04-01' },
              { id: 3, task: 'Apply for Reception school place', completed: false, dueDate: '2028-01-15', notes: 'Deadline: 15 January for September start.' },
              { id: 4, task: 'Madison starts Reception (age 4)', completed: false, dueDate: '2028-09-01', notes: 'First day of school! üéí' },
              { id: 5, task: 'Year 1 Phonics Screening', completed: false, dueDate: '2029-06-01' },
              { id: 6, task: 'Key Stage 1 SATs (age 7)', completed: false, dueDate: '2031-05-01' },
              { id: 7, task: 'Apply for secondary school', completed: false, dueDate: '2035-10-31' }
            ],
            tips: 'üéì UK Education Timeline:\n‚Ä¢ Age 2: 15 hours free\n‚Ä¢ Age 3: 30 hours free\n‚Ä¢ Age 4: Reception\n‚Ä¢ Age 11: Secondary\n‚Ä¢ Age 16: GCSEs'
          }
        ],
        habits: [
          { id: 1, person: 'Rich', task: 'Hoover house', frequency: 'daily', completed: false, streak: 0, icon: 'üßπ' },
          { id: 2, person: 'Rich', task: 'Bath Madison', frequency: 'daily', completed: false, streak: 0, icon: 'üõÅ' },
          { id: 3, person: 'Rich', task: 'Wash clothes', frequency: 'daily', completed: false, streak: 0, icon: 'üëï' },
          { id: 4, person: 'Rich', task: 'Cook dinner', frequency: 'daily', completed: false, streak: 0, icon: 'üç≥' },
          { id: 5, person: 'Shawnie', task: 'Change Madison', frequency: 'daily', completed: false, streak: 0, icon: 'üë∂' },
          { id: 6, person: 'Shawnie', task: 'Family admin', frequency: 'daily', completed: false, streak: 0, icon: 'üìã' },
          { id: 7, person: 'Shawnie', task: 'Budget review', frequency: 'weekly', completed: false, streak: 0, icon: 'üí∞' },
          { id: 8, person: 'Both', task: 'Deep clean kitchen', frequency: 'weekly', completed: false, streak: 0, icon: '‚ú®' },
          { id: 9, person: 'Both', task: 'Deep clean bathroom', frequency: 'weekly', completed: false, streak: 0, icon: 'üöø' },
          { id: 10, person: 'Family', task: 'Date night', frequency: 'weekly', completed: false, streak: 0, icon: 'üíï' },
          { id: 11, person: 'Family', task: 'Board game night', frequency: 'weekly', completed: false, streak: 0, icon: 'üé≤' },
          { id: 12, person: 'Both', task: 'Declutter session', frequency: 'monthly', completed: false, streak: 0, icon: 'üì¶' }
        ],
        moneyTips: [
          { id: 1, title: 'Council Tax Reduction', tip: 'Apply for up to 100% council tax reduction in Sheffield. With PIP + ESA, you may qualify for maximum support.', category: 'benefits', icon: 'üèõÔ∏è' },
          { id: 2, title: 'Healthy Start Vouchers', tip: 'Get ¬£8.50/week for milk, fruit, vegetables with children under 4.', category: 'benefits', icon: 'ü•õ' },
          { id: 3, title: 'Free NHS Prescriptions', tip: 'ESA recipients get free prescriptions. Apply for HC2 certificate for dental and optical.', category: 'healthcare', icon: 'üíä' },
          { id: 4, title: 'Meal Planning Saves ¬£200/Month', tip: 'Plan weekly meals, use Aldi/Lidl, batch cook Sundays.', category: 'food', icon: 'üçΩÔ∏è' },
          { id: 5, title: 'Energy Bill Support', tip: 'Check Warm Home Discount (¬£150/year). Compare tariffs every 6 months.', category: 'bills', icon: '‚ö°' },
          { id: 6, title: 'Baby Clothes Swap', tip: 'Join Sheffield Baby Swap Shop on Facebook for free/cheap clothes.', category: 'parenting', icon: 'üë∂' },
          { id: 7, title: 'Track Shawnie\'s Pension', tip: 'Use GOV.UK Pension Tracing Service. Could have ¬£1000s unclaimed!', category: 'pensions', icon: 'üîç' },
          { id: 8, title: 'Tax-Free Childcare', tip: 'When working, get ¬£500 free for every ¬£2000 spent on childcare.', category: 'childcare', icon: 'üè´' },
          { id: 9, title: 'Free Days Out', tip: 'Sheffield has FREE museums, galleries, Graves Park, Botanical Gardens.', category: 'lifestyle', icon: 'üé®' }
        ],
        lastReset: new Date().toDateString()
      });

      // Load saved data
      useEffect(() => {
        const load = async () => {
          try {
            const savedData = await window.storage.get('familyHubData');
            const savedConfig = await window.storage.get('familyHubConfig');
            if (savedData?.value) setData(JSON.parse(savedData.value));
            if (savedConfig?.value) setConfig(JSON.parse(savedConfig.value));
          } catch (e) {
            console.error('Load error:', e);
          }
        };
        load();
      }, []);

      // Save data on change
      useEffect(() => {
        window.storage.set('familyHubData', JSON.stringify(data));
      }, [data]);

      useEffect(() => {
        window.storage.set('familyHubConfig', JSON.stringify(config));
      }, [config]);

      // Reset daily habits at midnight
      useEffect(() => {
        const today = new Date().toDateString();
        if (data.lastReset !== today) {
          setData(prev => ({
            ...prev,
            habits: prev.habits.map(h => 
              h.frequency === 'daily' ? { ...h, completed: false } : h
            ),
            lastReset: today
          }));
        }
      }, []);

      // Celebration effect
      const celebrate = () => {
        setShowCelebration(true);
        setTimeout(() => setShowCelebration(false), 2000);
      };

      // Toggle goal step
      const toggleStep = (goalId, stepId) => {
        const goal = data.goals.find(g => g.id === goalId);
        const step = goal?.steps.find(s => s.id === stepId);
        const wasCompleted = step?.completed;
        
        setData(prev => ({
          ...prev,
          goals: prev.goals.map(g =>
            g.id === goalId ? {
              ...g,
              steps: g.steps.map(s =>
                s.id === stepId ? { ...s, completed: !s.completed } : s
              )
            } : g
          )
        }));
        
        if (!wasCompleted) celebrate();
      };

      // Toggle habit
      const toggleHabit = (habitId) => {
        const habit = data.habits.find(h => h.id === habitId);
        const wasCompleted = habit?.completed;
        
        setData(prev => ({
          ...prev,
          habits: prev.habits.map(h =>
            h.id === habitId ? { 
              ...h, 
              completed: !h.completed,
              streak: h.completed ? Math.max(0, h.streak - 1) : h.streak + 1
            } : h
          )
        }));
        
        if (!wasCompleted) celebrate();
      };

      // Toggle goal expansion
      const toggleGoal = (goalId) => {
        setExpandedGoals(prev => ({ ...prev, [goalId]: !prev[goalId] }));
      };

      // Calculate stats
      const allSteps = data.goals.flatMap(g => g.steps);
      const completedSteps = allSteps.filter(s => s.completed).length;
      const totalProgress = allSteps.length > 0 ? Math.round((completedSteps / allSteps.length) * 100) : 0;
      const daysSinceStart = Math.floor((new Date() - new Date(config.startDate)) / 86400000);
      const daysToMove = Math.ceil((new Date(config.moveDate) - new Date()) / 86400000);
      const currentIncome = config.richIncome + config.shawnieIncome;
      const incomeProgress = Math.min(100, Math.round((currentIncome / config.incomeTarget) * 100));

      // Get today's tasks
      const getTodaysTasks = () => {
        const now = new Date();
        const tasks = [];
        
        // Daily habits
        data.habits.filter(h => h.frequency === 'daily').forEach(habit => {
          tasks.push({ ...habit, type: 'habit' });
        });
        
        // Upcoming goal steps (next 14 days)
        data.goals.forEach(goal => {
          goal.steps.forEach(step => {
            if (!step.completed && step.dueDate) {
              const due = new Date(step.dueDate);
              const daysUntil = Math.ceil((due - now) / 86400000);
              if (daysUntil >= -7 && daysUntil <= 14) {
                tasks.push({
                  ...step,
                  type: 'step',
                  goalId: goal.id,
                  goalTitle: goal.title,
                  person: goal.person,
                  priority: goal.priority,
                  daysUntil
                });
              }
            }
          });
        });
        
        return tasks.sort((a, b) => {
          if (a.type === 'habit' && b.type !== 'habit') return -1;
          if (a.type !== 'habit' && b.type === 'habit') return 1;
          return (a.daysUntil || 0) - (b.daysUntil || 0);
        });
      };

      // Get calendar items
      const getCalendarItems = () => {
        const items = [];
        data.goals.forEach(goal => {
          goal.steps.filter(s => !s.completed && s.dueDate).forEach(step => {
            items.push({
              ...step,
              goalTitle: goal.title,
              person: goal.person,
              date: new Date(step.dueDate)
            });
          });
        });
        return items.sort((a, b) => a.date - b.date);
      };

      // Group calendar by month
      const groupByMonth = (items) => {
        const groups = {};
        items.forEach(item => {
          const key = item.date.toLocaleDateString('en-GB', { month: 'long', year: 'numeric' });
          if (!groups[key]) groups[key] = [];
          groups[key].push(item);
        });
        return groups;
      };

      // Export data
      const exportData = () => {
        const exportObj = { config, data, exportDate: new Date().toISOString() };
        const blob = new Blob([JSON.stringify(exportObj, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `family-hub-backup-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        URL.revokeObjectURL(url);
      };

      // Format date nicely
      const formatDate = (dateStr) => {
        return new Date(dateStr).toLocaleDateString('en-GB', { 
          weekday: 'short', day: 'numeric', month: 'short' 
        });
      };

      // Progress ring circumference
      const circumference = 2 * Math.PI * 32;

      return (
        <div className="app">
          {showCelebration && (
            <div className="celebration">
              <div className="celebration-content">üéâ Amazing Progress!</div>
            </div>
          )}

          {/* HEADER */}
          <header className="header">
            <div className="header-content">
              <div className="header-top">
                <div className="logo">
                  <div className="logo-icon">üè†</div>
                  <div className="logo-text">
                    <div className="logo-title">{config.familyName} Family Hub</div>
                    <div className="logo-subtitle">Rich, Shawnie & Madison ‚Ä¢ {config.location} ‚Üí {config.targetLocation}</div>
                  </div>
                </div>
                <div className="header-actions">
                  <button className="icon-btn" onClick={exportData} title="Export backup">üíæ</button>
                  <button className="icon-btn" onClick={() => setActiveTab('settings')} title="Settings">‚öôÔ∏è</button>
                </div>
              </div>

              <div className="stats-grid">
                <div className="stat-card">
                  <div className="stat-progress">
                    <svg width="80" height="80">
                      <circle className="stat-progress-bg" cx="40" cy="40" r="32" />
                      <circle 
                        className="stat-progress-fill" 
                        cx="40" cy="40" r="32"
                        style={{
                          strokeDasharray: circumference,
                          strokeDashoffset: circumference - (totalProgress / 100) * circumference
                        }}
                      />
                    </svg>
                    <div className="stat-progress-text">{totalProgress}%</div>
                  </div>
                  <div className="stat-label">Overall Progress</div>
                </div>
                <div className="stat-card">
                  <div className="stat-value">{daysSinceStart}</div>
                  <div className="stat-label">Days on Journey</div>
                </div>
                <div className="stat-card">
                  <div className="stat-value">{completedSteps}</div>
                  <div className="stat-label">Tasks Done</div>
                </div>
                <div className="stat-card">
                  <div className="stat-value">{daysToMove > 0 ? daysToMove : 'üéâ'}</div>
                  <div className="stat-label">{daysToMove > 0 ? 'Days to Move' : 'Move Time!'}</div>
                </div>
              </div>
            </div>
          </header>

          {/* NAVIGATION */}
          <div className="nav-wrapper">
            <nav className="nav">
              {[
                { id: 'today', icon: 'üìã', label: 'Today' },
                { id: 'goals', icon: 'üéØ', label: 'Goals' },
                { id: 'calendar', icon: 'üìÖ', label: 'Calendar' },
                { id: 'finances', icon: 'üí∞', label: 'Finances' },
                { id: 'tips', icon: 'üí°', label: 'Tips' },
                { id: 'settings', icon: '‚öôÔ∏è', label: 'Settings' }
              ].map(tab => (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`nav-item ${activeTab === tab.id ? 'active' : ''}`}
                >
                  <span className="nav-icon">{tab.icon}</span>
                  <span>{tab.label}</span>
                </button>
              ))}
            </nav>
          </div>

          {/* MAIN CONTENT */}
          <main className="main">
            {/* TODAY TAB */}
            {activeTab === 'today' && (
              <>
                <div className="today-hero">
                  <div className="today-date">
                    {new Date().toLocaleDateString('en-GB', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' })}
                  </div>
                  <div className="today-greeting">
                    Good {new Date().getHours() < 12 ? 'morning' : new Date().getHours() < 18 ? 'afternoon' : 'evening'}, Turnbull-Shaw family! üëã
                  </div>
                  <div className="quick-stats">
                    <div className="quick-stat">
                      <div className="quick-stat-icon tasks">üìã</div>
                      <div>
                        <div className="quick-stat-value">{getTodaysTasks().filter(t => t.type === 'step' && !t.completed).length}</div>
                        <div className="quick-stat-label">Tasks due soon</div>
                      </div>
                    </div>
                    <div className="quick-stat">
                      <div className="quick-stat-icon habits">‚úÖ</div>
                      <div>
                        <div className="quick-stat-value">{data.habits.filter(h => h.frequency === 'daily' && h.completed).length}/{data.habits.filter(h => h.frequency === 'daily').length}</div>
                        <div className="quick-stat-label">Habits done</div>
                      </div>
                    </div>
                    <div className="quick-stat">
                      <div className="quick-stat-icon streak">üî•</div>
                      <div>
                        <div className="quick-stat-value">{Math.max(...data.habits.map(h => h.streak))}</div>
                        <div className="quick-stat-label">Best streak</div>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Daily Habits */}
                <div className="card">
                  <div className="card-header">
                    <div>
                      <h2 className="card-title">
                        <span className="card-title-icon">‚ú®</span>
                        Daily Habits
                      </h2>
                      <p className="card-subtitle">Build consistency, build your future</p>
                    </div>
                  </div>
                  <div className="habits-grid">
                    {data.habits.filter(h => h.frequency === 'daily').map(habit => (
                      <div 
                        key={habit.id}
                        className={`habit-card ${habit.completed ? 'completed' : ''}`}
                        onClick={() => toggleHabit(habit.id)}
                      >
                        <div className="habit-icon">{habit.icon}</div>
                        <div className="habit-name">{habit.task}</div>
                        <div className="habit-person">{habit.person}</div>
                        {habit.streak > 0 && <div className="habit-streak">üî• {habit.streak} day streak</div>}
                      </div>
                    ))}
                  </div>
                </div>

                {/* Upcoming Tasks */}
                <div className="card">
                  <div className="card-header">
                    <div>
                      <h2 className="card-title">
                        <span className="card-title-icon">üéØ</span>
                        Coming Up
                      </h2>
                      <p className="card-subtitle">Tasks due in the next 2 weeks</p>
                    </div>
                  </div>
                  <div className="task-grid">
                    {getTodaysTasks().filter(t => t.type === 'step').slice(0, 8).map((task, i) => (
                      <div 
                        key={`${task.goalId}-${task.id}`}
                        className={`task-item ${task.completed ? 'completed' : ''}`}
                        onClick={() => toggleStep(task.goalId, task.id)}
                      >
                        <div className="task-top">
                          <div 
                            className={`task-checkbox ${task.completed ? 'checked' : ''}`}
                          >
                            {task.completed && <CheckIcon />}
                          </div>
                          <div className="task-info">
                            <div className="task-name">{task.task}</div>
                            <div className="task-context">From: {task.goalTitle}</div>
                            <div className="task-meta">
                              <span className={`tag tag-person ${task.person.toLowerCase()}`}>{task.person}</span>
                              <span className={`tag tag-priority ${task.priority}`}>{task.priority}</span>
                              <span className={`tag tag-due ${task.daysUntil < 0 ? 'overdue' : task.daysUntil === 0 ? 'today' : ''}`}>
                                {task.daysUntil < 0 ? `${Math.abs(task.daysUntil)}d overdue` : task.daysUntil === 0 ? 'Today!' : `${task.daysUntil}d`}
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </>
            )}

            {/* GOALS TAB */}
            {activeTab === 'goals' && (
              <div className="card">
                <div className="card-header">
                  <div>
                    <h2 className="card-title">
                      <span className="card-title-icon">üéØ</span>
                      Family Goals
                    </h2>
                    <p className="card-subtitle">Your roadmap from Seaham to Sheffield and beyond</p>
                  </div>
                </div>
                
                {data.goals.map(goal => {
                  const completed = goal.steps.filter(s => s.completed).length;
                  const total = goal.steps.length;
                  const progress = total > 0 ? Math.round((completed / total) * 100) : 0;
                  const isExpanded = expandedGoals[goal.id];
                  
                  return (
                    <div key={goal.id} className="goal-card">
                      <div className="goal-header" onClick={() => toggleGoal(goal.id)}>
                        <div className={`goal-icon ${goal.person.toLowerCase()}`}>{goal.icon}</div>
                        <div className="goal-info">
                          <div className="goal-title">{goal.title}</div>
                          <div className="goal-description">{goal.description}</div>
                          <div className="goal-progress-wrap">
                            <div className="goal-progress-bar">
                              <div 
                                className={`goal-progress-fill ${goal.person.toLowerCase()}`}
                                style={{ width: `${progress}%` }}
                              />
                            </div>
                            <span className="goal-progress-text">{completed}/{total}</span>
                          </div>
                        </div>
                        <div className={`goal-expand ${isExpanded ? 'expanded' : ''}`}>
                          <ChevronIcon />
                        </div>
                      </div>
                      
                      <div className={`goal-content ${isExpanded ? 'expanded' : ''}`}>
                        {goal.tips && (
                          <div className="tip-box">
                            <div className="tip-title">üí° Pro Tips</div>
                            <div className="tip-content">{goal.tips}</div>
                          </div>
                        )}
                        
                        {goal.resources && goal.resources.length > 0 && (
                          <div className="resources-box">
                            <div className="resources-title">üîó Useful Resources</div>
                            {goal.resources.map((res, i) => (
                              <a key={i} href={res.url} target="_blank" rel="noopener noreferrer" className="resource-link">
                                {res.name} ‚Üí
                              </a>
                            ))}
                          </div>
                        )}
                        
                        <div className="steps-list">
                          <h3 style={{ fontSize: '1.1rem', fontWeight: 600, marginBottom: '16px', color: 'var(--navy)' }}>Action Steps</h3>
                          {goal.steps.map(step => (
                            <div key={step.id} className={`step-item ${step.completed ? 'completed' : ''}`}>
                              <div 
                                className={`step-check ${step.completed ? 'checked' : ''}`}
                                onClick={() => toggleStep(goal.id, step.id)}
                              >
                                {step.completed && <CheckIcon />}
                              </div>
                              <div className="step-details">
                                <div className="step-name">{step.task}</div>
                                <div className="step-meta">
                                  {step.dueDate && <span>üìÖ {formatDate(step.dueDate)}</span>}
                                  {step.estimatedHours && <span> ‚Ä¢ ‚è±Ô∏è {step.estimatedHours}h</span>}
                                </div>
                                {step.notes && <div className="step-notes">üìù {step.notes}</div>}
                                {step.dayTasks && step.dayTasks.length > 0 && !step.completed && (
                                  <div className="day-breakdown">
                                    <div className="day-breakdown-title">üìã Day-by-Day Breakdown</div>
                                    {step.dayTasks.map((dt, i) => (
                                      <div key={i} className="day-task">
                                        <span className="day-num">Day {dt.day}</span>
                                        <span>{dt.task}</span>
                                        <span className="day-duration">{dt.duration}min</span>
                                      </div>
                                    ))}
                                  </div>
                                )}
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            )}

            {/* CALENDAR TAB */}
            {activeTab === 'calendar' && (
              <div className="card calendar-section">
                <div className="card-header">
                  <div>
                    <h2 className="card-title">
                      <span className="card-title-icon">üìÖ</span>
                      Upcoming Timeline
                    </h2>
                    <p className="card-subtitle">All tasks with due dates in chronological order</p>
                  </div>
                </div>
                
                {Object.entries(groupByMonth(getCalendarItems())).map(([month, items]) => (
                  <div key={month} className="month-group">
                    <div className="month-title">{month}</div>
                    {items.map((item, i) => (
                      <div key={i} className="calendar-item" style={{ borderLeftColor: `var(--${item.person.toLowerCase()})` }}>
                        <div className="calendar-date">
                          <div className="calendar-day">{item.date.getDate()}</div>
                          <div className="calendar-month">{item.date.toLocaleDateString('en-GB', { month: 'short' })}</div>
                        </div>
                        <div className="calendar-info">
                          <div className="calendar-task">{item.task}</div>
                          <div className="calendar-goal">{item.goalTitle} ‚Ä¢ {item.person}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                ))}
              </div>
            )}

            {/* FINANCES TAB */}
            {activeTab === 'finances' && (
              <>
                <div className="finance-grid">
                  <div className="finance-card rich" style={{ color: '#1e3a5f' }}>
                    <div className="finance-label">Rich's Income</div>
                    <div className="finance-value">¬£{config.richIncome.toLocaleString()}</div>
                    <input
                      type="number"
                      className="finance-input"
                      value={config.richIncome}
                      onChange={(e) => setConfig({...config, richIncome: parseFloat(e.target.value) || 0})}
                      placeholder="Annual income"
                    />
                  </div>
                  
                  <div className="finance-card shawnie" style={{ color: '#5a2340' }}>
                    <div className="finance-label">Shawnie's Income</div>
                    <div className="finance-value">¬£{config.shawnieIncome.toLocaleString()}</div>
                    <input
                      type="number"
                      className="finance-input"
                      value={config.shawnieIncome}
                      onChange={(e) => setConfig({...config, shawnieIncome: parseFloat(e.target.value) || 0})}
                      placeholder="Annual income"
                    />
                  </div>
                  
                  <div className="finance-card combined" style={{ color: '#1e4a3a' }}>
                    <div className="finance-label">Combined Income</div>
                    <div className="finance-value">¬£{currentIncome.toLocaleString()}</div>
                    <div style={{ fontSize: '0.9rem', opacity: 0.8 }}>¬£{Math.round(currentIncome / 12).toLocaleString()}/month</div>
                  </div>
                  
                  <div className="finance-card savings" style={{ color: '#5a4020' }}>
                    <div className="finance-label">Current Savings</div>
                    <div className="finance-value">¬£{config.savings.toLocaleString()}</div>
                    <input
                      type="number"
                      className="finance-input"
                      value={config.savings}
                      onChange={(e) => setConfig({...config, savings: parseFloat(e.target.value) || 0})}
                      placeholder="Total savings"
                    />
                  </div>
                </div>

                <div className="goal-progress-section">
                  <h3 style={{ fontFamily: 'Fraunces, Georgia, serif', fontSize: '1.25rem', marginBottom: '8px' }}>üéØ Path to ¬£{(config.incomeTarget / 1000).toFixed(0)}k</h3>
                  <p style={{ color: 'var(--navy-light)', marginBottom: '16px' }}>Your journey to financial goals</p>
                  
                  <div className="income-bar">
                    <div className="income-bar-fill" style={{ width: `${Math.max(5, incomeProgress)}%` }}>
                      <span className="income-bar-text">{incomeProgress}%</span>
                    </div>
                  </div>
                  <div className="income-markers">
                    <span>¬£0</span>
                    <span>¬£{(config.incomeTarget / 1000).toFixed(0)}k target</span>
                  </div>
                  
                  <div className="income-breakdown">
                    <div className="income-row">
                      <span>Rich's Target (Qualified Electrician)</span>
                      <span style={{ fontWeight: 700, color: 'var(--rich)' }}>¬£45,000</span>
                    </div>
                    <div className="income-row">
                      <span>Shawnie's Target (Senior PIP Assessor)</span>
                      <span style={{ fontWeight: 700, color: 'var(--shawnie)' }}>¬£50,000</span>
                    </div>
                    <div className="income-row highlight">
                      <span style={{ fontWeight: 600 }}>Combined Target</span>
                      <span style={{ fontWeight: 700, color: 'var(--family)' }}>¬£{config.incomeTarget.toLocaleString()}</span>
                    </div>
                    <div className="income-row gap">
                      <span style={{ fontWeight: 600 }}>Gap Remaining</span>
                      <span style={{ fontWeight: 700, color: '#92400e' }}>¬£{(config.incomeTarget - currentIncome).toLocaleString()}</span>
                    </div>
                  </div>
                </div>

                <div className="card" style={{ marginTop: '24px' }}>
                  <h3 style={{ fontFamily: 'Fraunces, Georgia, serif', fontSize: '1.25rem', marginBottom: '16px' }}>üè¶ Pension Tracker</h3>
                  <div className="finance-grid">
                    <div className="finance-card pension" style={{ color: 'var(--navy)' }}>
                      <div className="finance-label">Rich's Pension</div>
                      <div className="finance-value">¬£{config.richPension.toLocaleString()}</div>
                      <input
                        type="number"
                        step="0.01"
                        className="finance-input"
                        value={config.richPension}
                        onChange={(e) => setConfig({...config, richPension: parseFloat(e.target.value) || 0})}
                      />
                    </div>
                    <div className="finance-card pension" style={{ color: 'var(--navy)' }}>
                      <div className="finance-label">Shawnie's Pension</div>
                      <div className="finance-value">¬£{config.shawniePension.toLocaleString()}</div>
                      <input
                        type="number"
                        step="0.01"
                        className="finance-input"
                        value={config.shawniePension}
                        onChange={(e) => setConfig({...config, shawniePension: parseFloat(e.target.value) || 0})}
                      />
                    </div>
                  </div>
                  <div className="tip-box" style={{ marginTop: '16px' }}>
                    <div className="tip-title">üîç Action Required</div>
                    <div className="tip-content">
                      Track down Shawnie's pension using the <a href="https://www.gov.uk/find-pension-contact-details" target="_blank" rel="noopener noreferrer" style={{ color: '#92400e', fontWeight: 600 }}>GOV.UK Pension Tracing Service</a>. Takes 5 minutes!
                    </div>
                  </div>
                </div>
              </>
            )}

            {/* TIPS TAB */}
            {activeTab === 'tips' && (
              <div className="card">
                <div className="card-header">
                  <div>
                    <h2 className="card-title">
                      <span className="card-title-icon">üí°</span>
                      Money Tips & Life Hacks
                    </h2>
                    <p className="card-subtitle">Practical tips for families on benefits, preparing for career changes</p>
                  </div>
                </div>
                
                <div className="tips-grid">
                  {data.moneyTips.map(tip => (
                    <div key={tip.id} className="money-tip-card">
                      <div className="money-tip-icon">{tip.icon}</div>
                      <div className="money-tip-title">{tip.title}</div>
                      <div className="money-tip-content">{tip.tip}</div>
                      <span className="money-tip-category">{tip.category}</span>
                    </div>
                  ))}
                </div>
              </div>
            )}

            {/* SETTINGS TAB */}
            {activeTab === 'settings' && (
              <div className="card">
                <div className="card-header">
                  <div>
                    <h2 className="card-title">
                      <span className="card-title-icon">‚öôÔ∏è</span>
                      Settings
                    </h2>
                    <p className="card-subtitle">Customize your family hub</p>
                  </div>
                </div>
                
                <div className="settings-grid">
                  <div className="setting-group">
                    <div className="setting-group-title">Family Info</div>
                    <div className="setting-item">
                      <label className="setting-label">Family Name</label>
                      <input
                        type="text"
                        className="setting-input"
                        value={config.familyName}
                        onChange={(e) => setConfig({...config, familyName: e.target.value})}
                      />
                    </div>
                    <div className="setting-item">
                      <label className="setting-label">Current Location</label>
                      <input
                        type="text"
                        className="setting-input"
                        value={config.location}
                        onChange={(e) => setConfig({...config, location: e.target.value})}
                      />
                    </div>
                    <div className="setting-item">
                      <label className="setting-label">Target Location</label>
                      <input
                        type="text"
                        className="setting-input"
                        value={config.targetLocation}
                        onChange={(e) => setConfig({...config, targetLocation: e.target.value})}
                      />
                    </div>
                  </div>
                  
                  <div className="setting-group">
                    <div className="setting-group-title">Key Dates</div>
                    <div className="setting-item">
                      <label className="setting-label">Journey Start Date</label>
                      <input
                        type="date"
                        className="setting-input"
                        value={config.startDate}
                        onChange={(e) => setConfig({...config, startDate: e.target.value})}
                      />
                    </div>
                    <div className="setting-item">
                      <label className="setting-label">Planned Move Date</label>
                      <input
                        type="date"
                        className="setting-input"
                        value={config.moveDate}
                        onChange={(e) => setConfig({...config, moveDate: e.target.value})}
                      />
                    </div>
                    <div className="setting-item">
                      <label className="setting-label">Shawnie Return to Work</label>
                      <input
                        type="date"
                        className="setting-input"
                        value={config.shawnieReturnDate}
                        onChange={(e) => setConfig({...config, shawnieReturnDate: e.target.value})}
                      />
                    </div>
                  </div>
                  
                  <div className="setting-group">
                    <div className="setting-group-title">Financial Targets</div>
                    <div className="setting-item">
                      <label className="setting-label">Income Target (¬£)</label>
                      <input
                        type="number"
                        className="setting-input"
                        value={config.incomeTarget}
                        onChange={(e) => setConfig({...config, incomeTarget: parseFloat(e.target.value) || 0})}
                      />
                    </div>
                    <div className="setting-item">
                      <label className="setting-label">Shawnie Return Income (¬£)</label>
                      <input
                        type="number"
                        className="setting-input"
                        value={config.shawnieReturnIncome}
                        onChange={(e) => setConfig({...config, shawnieReturnIncome: parseFloat(e.target.value) || 0})}
                      />
                    </div>
                  </div>
                </div>
                
                <div className="data-actions">
                  <button className="btn btn-secondary" onClick={exportData}>
                    üíæ Export Backup
                  </button>
                  <button className="btn btn-primary" onClick={() => {
                    if (confirm('This will reset all data. Are you sure?')) {
                      localStorage.clear();
                      window.location.reload();
                    }
                  }}>
                    üîÑ Reset All Data
                  </button>
                </div>
              </div>
            )}
          </main>

          {/* FAB */}
          <button className="fab" onClick={() => setActiveTab('today')}>
            üè†
          </button>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<FamilyHub />);
  </script>
</body>
</html>
