<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#e07a5f">
  <title>Turnbull-Shaw Family Hub</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --terracotta: #e07a5f; --terracotta-dark: #c65d42;
      --sage: #81b29a; --sage-light: #c8e6d4;
      --cream: #f4f1de; --cream-dark: #e8e4cc;
      --navy: #3d405b; --navy-light: #6b7280;
      --gold: #f2cc8f; --gold-dark: #d9b36c;
      --rich: #4a90a4; --rich-light: #b8d4de;
      --shawnie: #d4729b; --shawnie-light: #f0c4d6;
      --madison: #f2a65a; --madison-light: #fcd9b6;
      --family: #81b29a; --family-light: #c8e6d4;
      --both: #9b8bb4; --both-light: #e0d8ec;
      --shadow-sm: 0 2px 8px rgba(61,64,91,0.08);
      --shadow-md: 0 8px 24px rgba(61,64,91,0.12);
      --shadow-lg: 0 16px 48px rgba(61,64,91,0.16);
      --radius-sm: 8px; --radius-md: 12px; --radius-lg: 16px; --radius-xl: 24px;
    }
    
    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--cream);
      color: var(--navy);
      min-height: 100vh;
      line-height: 1.5;
    }
    
    h1, h2, h3, h4 { font-family: 'Fraunces', Georgia, serif; line-height: 1.2; }
    
    .app { min-height: 100vh; }
    
    /* Header */
    .header {
      background: linear-gradient(135deg, var(--terracotta) 0%, var(--shawnie) 50%, var(--gold) 100%);
      color: white;
      padding: 24px;
      position: relative;
    }
    
    .header::after {
      content: '';
      position: absolute;
      bottom: 0; left: 0; right: 0;
      height: 40px;
      background: var(--cream);
      border-radius: 40px 40px 0 0;
    }
    
    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
      padding-bottom: 20px;
    }
    
    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 16px;
      margin-bottom: 20px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo-icon {
      width: 48px; height: 48px;
      background: rgba(255,255,255,0.95);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }
    
    .logo-title { font-size: 1.5rem; font-weight: 700; }
    .logo-sub { font-size: 0.85rem; opacity: 0.9; }
    
    .header-btns {
      display: flex;
      gap: 8px;
    }
    
    .icon-btn {
      width: 40px; height: 40px;
      border-radius: var(--radius-md);
      border: none;
      background: rgba(255,255,255,0.2);
      color: white;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .icon-btn:hover { background: rgba(255,255,255,0.3); transform: translateY(-2px); }
    
    .stats-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
    }
    
    .stat-box {
      background: rgba(255,255,255,0.95);
      border-radius: var(--radius-md);
      padding: 16px;
      text-align: center;
      color: var(--navy);
    }
    
    .stat-val { font-family: 'Fraunces', serif; font-size: 1.75rem; font-weight: 700; color: var(--terracotta); }
    .stat-lbl { font-size: 0.75rem; color: var(--navy-light); text-transform: uppercase; letter-spacing: 0.5px; }
    
    /* Nav */
    .nav-wrap {
      position: sticky;
      top: 0;
      z-index: 100;
      padding: 12px 24px;
      background: var(--cream);
    }
    
    .nav {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 999px;
      padding: 4px;
      display: flex;
      gap: 4px;
      overflow-x: auto;
      box-shadow: var(--shadow-md);
    }
    
    .nav::-webkit-scrollbar { display: none; }
    
    .nav-btn {
      flex: 1;
      min-width: fit-content;
      padding: 10px 16px;
      border: none;
      border-radius: 999px;
      background: transparent;
      font-family: inherit;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--navy-light);
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }
    
    .nav-btn:hover { background: var(--cream); color: var(--navy); }
    .nav-btn.active { background: var(--terracotta); color: white; }
    
    /* Main */
    .main {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 24px 100px;
    }
    
    /* Cards */
    .card {
      background: white;
      border-radius: var(--radius-xl);
      padding: 24px;
      margin-bottom: 20px;
      box-shadow: var(--shadow-sm);
    }
    
    .card-head {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 12px;
    }
    
    .card-title {
      font-size: 1.25rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .card-title-icon {
      width: 36px; height: 36px;
      background: linear-gradient(135deg, var(--terracotta), var(--gold));
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }
    
    .card-sub { color: var(--navy-light); font-size: 0.9rem; margin-top: 4px; }
    
    /* Buttons */
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 999px;
      font-family: inherit;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    
    .btn-primary { background: var(--terracotta); color: white; }
    .btn-primary:hover { background: var(--terracotta-dark); transform: translateY(-1px); }
    .btn-secondary { background: var(--cream); color: var(--navy); }
    .btn-secondary:hover { background: var(--cream-dark); }
    .btn-success { background: var(--sage); color: white; }
    .btn-danger { background: #ef4444; color: white; }
    .btn-sm { padding: 6px 12px; font-size: 0.8rem; }
    
    /* Form elements */
    .form-group { margin-bottom: 16px; }
    .form-label { display: block; font-weight: 600; color: var(--navy); margin-bottom: 6px; font-size: 0.9rem; }
    .form-hint { font-size: 0.8rem; color: var(--navy-light); margin-top: 4px; }
    
    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 10px 14px;
      border: 2px solid var(--cream-dark);
      border-radius: var(--radius-sm);
      font-family: inherit;
      font-size: 0.95rem;
      background: white;
      color: var(--navy);
      transition: all 0.2s;
    }
    
    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--terracotta);
      box-shadow: 0 0 0 3px rgba(224,122,95,0.15);
    }
    
    .form-textarea { resize: vertical; min-height: 80px; }
    
    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
    }
    
    /* Tags */
    .tag {
      display: inline-flex;
      align-items: center;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 600;
      gap: 4px;
    }
    
    .tag-rich { background: var(--rich-light); color: #2d5a6b; }
    .tag-shawnie { background: var(--shawnie-light); color: #8a3d5c; }
    .tag-madison { background: var(--madison-light); color: #9a5f2e; }
    .tag-family { background: var(--family-light); color: #3d6b54; }
    .tag-both { background: var(--both-light); color: #5a4a6b; }
    .tag-daily { background: #dbeafe; color: #1e40af; }
    .tag-weekly { background: #fef3c7; color: #92400e; }
    .tag-monthly { background: #f3e8ff; color: #6b21a8; }
    .tag-critical { background: #fee2e2; color: #991b1b; }
    .tag-high { background: #fed7aa; color: #9a3412; }
    .tag-medium { background: #fef3c7; color: #92400e; }
    .tag-low { background: var(--sage-light); color: #3d6b54; }
    
    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(61,64,91,0.6);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
    }
    
    .modal {
      background: white;
      border-radius: var(--radius-xl);
      max-width: 700px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
    }
    
    .modal-head {
      padding: 20px 24px;
      border-bottom: 1px solid var(--cream-dark);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title { font-size: 1.25rem; }
    
    .modal-close {
      width: 36px; height: 36px;
      border-radius: 50%;
      border: none;
      background: var(--cream);
      color: var(--navy);
      font-size: 1.25rem;
      cursor: pointer;
    }
    
    .modal-close:hover { background: var(--cream-dark); }
    
    .modal-body { padding: 24px; }
    
    .modal-foot {
      padding: 16px 24px;
      border-top: 1px solid var(--cream-dark);
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }
    
    /* Planner/Calendar */
    .planner-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
    }
    
    .planner-day-head {
      text-align: center;
      font-weight: 600;
      font-size: 0.8rem;
      color: var(--navy-light);
      padding: 8px;
      text-transform: uppercase;
    }
    
    .planner-day {
      background: var(--cream);
      border-radius: var(--radius-md);
      min-height: 120px;
      padding: 8px;
    }
    
    .planner-day.today {
      background: linear-gradient(135deg, rgba(224,122,95,0.15), rgba(242,204,143,0.15));
      border: 2px solid var(--terracotta);
    }
    
    .planner-date {
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--navy);
      margin-bottom: 6px;
    }
    
    .planner-task {
      background: white;
      border-radius: 6px;
      padding: 6px 8px;
      margin-bottom: 4px;
      font-size: 0.75rem;
      border-left: 3px solid var(--terracotta);
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .planner-task:hover { transform: translateX(2px); box-shadow: var(--shadow-sm); }
    .planner-task.completed { opacity: 0.5; text-decoration: line-through; }
    .planner-task.rich { border-left-color: var(--rich); }
    .planner-task.shawnie { border-left-color: var(--shawnie); }
    .planner-task.madison { border-left-color: var(--madison); }
    .planner-task.family { border-left-color: var(--family); }
    .planner-task.both { border-left-color: var(--both); }
    
    /* Goals */
    .goal-card {
      background: white;
      border-radius: var(--radius-lg);
      overflow: hidden;
      margin-bottom: 16px;
      box-shadow: var(--shadow-sm);
      border: 2px solid transparent;
      transition: all 0.2s;
    }
    
    .goal-card:hover { border-color: var(--cream-dark); }
    
    .goal-head {
      padding: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 16px;
      background: linear-gradient(135deg, white 0%, var(--cream) 100%);
    }
    
    .goal-icon {
      width: 50px; height: 50px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      flex-shrink: 0;
    }
    
    .goal-icon.rich { background: linear-gradient(135deg, var(--rich-light), var(--rich)); }
    .goal-icon.shawnie { background: linear-gradient(135deg, var(--shawnie-light), var(--shawnie)); }
    .goal-icon.madison { background: linear-gradient(135deg, var(--madison-light), var(--madison)); }
    .goal-icon.family { background: linear-gradient(135deg, var(--family-light), var(--family)); }
    
    .goal-info { flex: 1; }
    .goal-title { font-size: 1.1rem; margin-bottom: 4px; }
    .goal-desc { font-size: 0.85rem; color: var(--navy-light); }
    
    .goal-progress {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 8px;
    }
    
    .goal-bar {
      flex: 1;
      height: 8px;
      background: var(--cream-dark);
      border-radius: 999px;
      overflow: hidden;
    }
    
    .goal-bar-fill {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--terracotta), var(--gold));
      transition: width 0.5s;
    }
    
    .goal-pct { font-weight: 700; font-size: 0.85rem; white-space: nowrap; }
    
    .goal-actions {
      display: flex;
      gap: 8px;
      flex-shrink: 0;
    }
    
    .goal-body {
      padding: 0 20px 20px;
      display: none;
    }
    
    .goal-body.open { display: block; }
    
    /* Steps */
    .step-item {
      display: flex;
      gap: 12px;
      padding: 12px;
      background: var(--cream);
      border-radius: var(--radius-md);
      margin-bottom: 8px;
      transition: all 0.2s;
    }
    
    .step-item:hover { background: var(--cream-dark); }
    .step-item.completed { opacity: 0.6; }
    .step-item.completed .step-name { text-decoration: line-through; }
    
    .step-check {
      width: 22px; height: 22px;
      border: 2px solid var(--navy-light);
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      background: white;
      transition: all 0.2s;
    }
    
    .step-check:hover { border-color: var(--terracotta); }
    .step-check.checked { background: var(--sage); border-color: var(--sage); color: white; }
    
    .step-content { flex: 1; }
    .step-name { font-weight: 600; margin-bottom: 4px; }
    .step-meta { font-size: 0.8rem; color: var(--navy-light); display: flex; flex-wrap: wrap; gap: 8px; }
    
    .step-notes {
      margin-top: 8px;
      padding: 8px 12px;
      background: white;
      border-radius: 6px;
      font-size: 0.85rem;
      color: var(--navy-light);
      border-left: 3px solid var(--sage);
    }
    
    .step-links { margin-top: 8px; display: flex; flex-wrap: wrap; gap: 6px; }
    
    .step-link {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      background: var(--rich-light);
      color: #2d5a6b;
      text-decoration: none;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 600;
      transition: all 0.2s;
    }
    
    .step-link:hover { background: var(--rich); color: white; }
    
    /* Tip boxes */
    .tip-box {
      background: linear-gradient(135deg, #fef3c7, #fde68a);
      border-left: 4px solid var(--gold-dark);
      border-radius: var(--radius-md);
      padding: 16px;
      margin: 16px 0;
    }
    
    .tip-title { font-weight: 700; color: #92400e; margin-bottom: 6px; }
    .tip-text { color: #78350f; font-size: 0.9rem; }
    
    .info-box {
      background: linear-gradient(135deg, #e0f2fe, #bae6fd);
      border-left: 4px solid var(--rich);
      border-radius: var(--radius-md);
      padding: 16px;
      margin: 16px 0;
    }
    
    .info-title { font-weight: 700; color: #0c4a6e; margin-bottom: 6px; }
    .info-text { color: #075985; font-size: 0.9rem; }
    
    /* Finance cards */
    .finance-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
    }
    
    .finance-card {
      border-radius: var(--radius-lg);
      padding: 20px;
      position: relative;
    }
    
    .finance-card.rich { background: linear-gradient(135deg, var(--rich-light), var(--rich)); color: #1e3a5f; }
    .finance-card.shawnie { background: linear-gradient(135deg, var(--shawnie-light), var(--shawnie)); color: #5a2340; }
    .finance-card.combined { background: linear-gradient(135deg, var(--family-light), var(--family)); color: #1e4a3a; }
    .finance-card.savings { background: linear-gradient(135deg, var(--gold), var(--gold-dark)); color: #5a4020; }
    .finance-card.benefits { background: linear-gradient(135deg, #e0e7ff, #c7d2fe); color: #3730a3; }
    
    .finance-label { font-size: 0.75rem; font-weight: 600; text-transform: uppercase; opacity: 0.8; margin-bottom: 6px; }
    .finance-value { font-family: 'Fraunces', serif; font-size: 2rem; font-weight: 700; }
    
    .finance-input {
      width: 100%;
      margin-top: 10px;
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      background: rgba(255,255,255,0.4);
      font-size: 0.9rem;
      font-family: inherit;
    }
    
    .finance-input:focus { outline: none; background: rgba(255,255,255,0.6); }
    
    /* Habits/Rota */
    .rota-section { margin-bottom: 24px; }
    .rota-title { font-size: 1rem; font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
    
    .habit-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 10px;
    }
    
    .habit-card {
      background: white;
      border: 2px solid var(--cream-dark);
      border-radius: var(--radius-md);
      padding: 14px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .habit-card:hover { border-color: var(--terracotta); transform: translateY(-2px); }
    .habit-card.done { background: linear-gradient(135deg, var(--sage-light), var(--sage)); border-color: var(--sage); }
    .habit-card.done .habit-name { color: white; }
    .habit-card.done .habit-person { color: rgba(255,255,255,0.8); }
    
    .habit-icon { font-size: 1.5rem; margin-bottom: 6px; }
    .habit-name { font-weight: 600; font-size: 0.85rem; margin-bottom: 4px; }
    .habit-person { font-size: 0.75rem; color: var(--navy-light); }
    .habit-streak { font-size: 0.75rem; font-weight: 700; color: var(--gold-dark); margin-top: 6px; }
    .habit-card.done .habit-streak { color: white; }
    
    /* Money tips */
    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
    }
    
    .money-tip {
      background: white;
      border: 2px solid var(--cream-dark);
      border-radius: var(--radius-lg);
      padding: 20px;
      transition: all 0.2s;
    }
    
    .money-tip:hover { border-color: var(--gold); transform: translateY(-2px); }
    .money-tip-icon { font-size: 1.75rem; margin-bottom: 10px; }
    .money-tip-title { font-family: 'Fraunces', serif; font-size: 1rem; margin-bottom: 8px; }
    .money-tip-text { font-size: 0.85rem; color: var(--navy-light); line-height: 1.5; }
    .money-tip-cat { margin-top: 12px; display: inline-block; padding: 4px 10px; background: var(--gold); color: #78350f; border-radius: 999px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; }
    
    /* Celebration */
    .celebration {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      pointer-events: none;
    }
    
    .celebration-box {
      background: linear-gradient(135deg, var(--gold), var(--terracotta), var(--shawnie));
      color: white;
      padding: 24px 40px;
      border-radius: 999px;
      font-family: 'Fraunces', serif;
      font-size: 1.5rem;
      font-weight: 700;
      box-shadow: var(--shadow-lg);
      animation: pop 0.5s ease;
    }
    
    @keyframes pop {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    /* Settings grid */
    .settings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }
    
    .setting-section {
      background: var(--cream);
      border-radius: var(--radius-md);
      padding: 20px;
    }
    
    .setting-title { font-family: 'Fraunces', serif; font-size: 1rem; margin-bottom: 16px; }
    
    /* Loading */
    .loading {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, var(--terracotta), var(--shawnie));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      z-index: 10000;
    }
    
    .spinner {
      width: 50px; height: 50px;
      border: 4px solid rgba(255,255,255,0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 16px;
    }
    
    @keyframes spin { to { transform: rotate(360deg); } }
    
    /* Responsive */
    @media (max-width: 768px) {
      .planner-grid { grid-template-columns: 1fr; }
      .planner-day { min-height: auto; }
      .header-top { flex-direction: column; align-items: flex-start; }
      .stats-row { grid-template-columns: repeat(2, 1fr); }
      .nav-btn { padding: 8px 12px; font-size: 0.8rem; }
    }
    
    /* Scrollbar */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: var(--cream); }
    ::-webkit-scrollbar-thumb { background: var(--cream-dark); border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #c9c5b0; }
    
    /* FAB */
    .fab {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 56px; height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--terracotta), var(--shawnie));
      color: white;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      z-index: 900;
      transition: all 0.2s;
    }
    
    .fab:hover { transform: scale(1.1); }
  </style>
</head>
<body>
  <div id="root">
    <div class="loading">
      <div class="spinner"></div>
      <div style="font-family: 'Fraunces', serif; font-size: 1.25rem;">Loading Family Hub...</div>
    </div>
  </div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // Icons
    const Check = () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>;
    const Plus = () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>;
    const Edit = () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>;
    const Trash = () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>;
    const ChevronDown = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="6 9 12 15 18 9"/></svg>;

    // Default data factory
    const createDefaultData = () => ({
      goals: [
        {
          id: 1,
          person: 'Rich',
          title: 'Become Qualified Electrician',
          description: 'Complete full electrician training pathway - 4 year journey to ¬£40k+ career',
          icon: '‚ö°',
          priority: 'critical',
          targetDate: '2028-12-01',
          steps: [
            { id: 1, task: 'Research Sheffield electrician apprenticeship programs', completed: false, dueDate: '2025-12-15', frequency: 'one-time', estimatedHours: 4, notes: 'Check Sheffield College (0114 260 2600), City College, local employers. Look for Level 2 & 3 programs. Adult apprenticeships available.', links: [{ name: 'Gov.uk Apprenticeships', url: 'https://www.gov.uk/apply-apprenticeship' }, { name: 'Find Apprenticeship', url: 'https://www.findapprenticeship.service.gov.uk/' }, { name: 'Sheffield College', url: 'https://www.sheffcol.ac.uk/' }] },
            { id: 2, task: 'Call 5 training providers for information', completed: false, dueDate: '2025-12-20', frequency: 'one-time', estimatedHours: 2, notes: 'Sheffield College: 0114 260 2600. Ask: adult apprenticeships, funding options (fully funded if under 22 or 90% if older), start dates, entry requirements.', links: [] },
            { id: 3, task: 'Update CV with transferable skills', completed: false, dueDate: '2025-12-27', frequency: 'one-time', estimatedHours: 3, notes: 'Highlight: problem-solving, tool use, reliability, learning ability, customer service. Use action verbs. Get Shawnie to proofread.', links: [{ name: 'CV Template', url: 'https://www.reed.co.uk/career-advice/cv-template/' }] },
            { id: 4, task: 'Apply to 5+ apprenticeship positions', completed: false, dueDate: '2026-01-15', frequency: 'one-time', estimatedHours: 8, notes: 'Apply via gov.uk, Indeed, Reed, direct to employers. Tailor cover letter for each. Follow up after 1 week.', links: [{ name: 'Indeed Electrician Jobs', url: 'https://uk.indeed.com/Electrician-Apprentice-jobs-in-Sheffield' }] },
            { id: 5, task: 'Prepare for interviews', completed: false, dueDate: '2026-02-01', frequency: 'one-time', estimatedHours: 5, notes: 'Common questions: Why electrician? Why this company? Tell me about yourself. Research each company. Practice with Shawnie.', links: [] },
            { id: 6, task: 'Secure apprenticeship position', completed: false, dueDate: '2026-03-01', frequency: 'milestone', notes: 'Target: start Sept 2026. Apprentice wage ~¬£12-18k first year.', links: [] },
            { id: 7, task: 'Begin Level 2 Electrical Installation', completed: false, dueDate: '2026-09-01', frequency: 'ongoing', notes: '12-18 months. College 1 day/week + workplace learning. Core units: health & safety, electrical science, installation methods.', links: [{ name: 'Level 2 Overview', url: 'https://www.cityandguilds.com/qualifications-and-apprenticeships/building-services-industry/electrical/2365-electrical-installation' }] },
            { id: 8, task: 'Complete Level 2 qualification', completed: false, dueDate: '2027-09-01', frequency: 'milestone', notes: 'End point assessment. Portfolio of evidence required.', links: [] },
            { id: 9, task: 'Progress to Level 3 Electrical Installation', completed: false, dueDate: '2027-09-01', frequency: 'ongoing', notes: 'Advanced electrical principles, complex installations, testing & inspection. Another 12-18 months.', links: [] },
            { id: 10, task: 'Complete 18th Edition Wiring Regulations (BS 7671)', completed: false, dueDate: '2028-03-01', frequency: 'one-time', notes: '3-day course + exam. ~¬£300-400. Essential for all electricians. Renewable every 3-5 years.', links: [{ name: 'NICEIC 18th Edition', url: 'https://www.niceic.com/contractor/training/18th-edition' }] },
            { id: 11, task: 'Pass AM2 Assessment', completed: false, dueDate: '2028-09-01', frequency: 'milestone', notes: 'Final practical assessment. Proves competence. 2-day assessment. Required for JIB Gold Card.', links: [{ name: 'AM2 Info', url: 'https://www.jib.org.uk/am2-assessment' }] },
            { id: 12, task: 'Obtain JIB Gold Card', completed: false, dueDate: '2028-10-01', frequency: 'milestone', notes: 'Industry standard ID. Proves qualified status. Opens all doors.', links: [{ name: 'JIB Cards', url: 'https://www.jib.org.uk/' }] },
            { id: 13, task: 'Secure qualified electrician position ¬£40k+', completed: false, dueDate: '2028-12-01', frequency: 'milestone', notes: 'Sheffield area: ¬£35-45k employed, ¬£45-65k self-employed. High demand trade.', links: [] }
          ],
          tips: 'üí∑ UK Electrician Salary Progression:\n‚Ä¢ Apprentice Year 1: ¬£12-15k\n‚Ä¢ Apprentice Year 2-3: ¬£15-22k\n‚Ä¢ Newly Qualified: ¬£28-35k\n‚Ä¢ 2-3 Years Experience: ¬£35-42k\n‚Ä¢ 5+ Years/Specialist: ¬£40-55k\n‚Ä¢ Self-employed: ¬£45-70k+\n\nüìà High demand trade with excellent job security.',
          resources: [{ name: 'JIB Grading', url: 'https://www.jib.org.uk/' }, { name: 'NAPIT', url: 'https://www.napit.org.uk/' }, { name: 'Electricians Forum', url: 'https://www.electriciansforums.net/' }]
        },
        {
          id: 2,
          person: 'Shawnie',
          title: 'Return to Work as PIP Assessor',
          description: 'Return July 2026 at ¬£40k, progress to senior role ¬£45-50k',
          icon: 'üíº',
          priority: 'high',
          targetDate: '2027-07-01',
          steps: [
            { id: 1, task: 'Research Sheffield childcare options', completed: false, dueDate: '2026-04-01', frequency: 'one-time', estimatedHours: 6, notes: 'Nurseries near workplace. Costs: ¬£800-1200/month full-time. Check Ofsted ratings. Ask about settling-in periods.', links: [{ name: 'Childcare Choices', url: 'https://www.childcarechoices.gov.uk/' }, { name: 'Ofsted Reports', url: 'https://reports.ofsted.gov.uk/' }] },
            { id: 2, task: 'Apply for Tax-Free Childcare account', completed: false, dueDate: '2026-04-15', frequency: 'one-time', notes: 'Government adds ¬£2 for every ¬£8 you pay (up to ¬£2000/year free). Must be working. Apply 3 months before return.', links: [{ name: 'Tax-Free Childcare', url: 'https://www.gov.uk/tax-free-childcare' }] },
            { id: 3, task: 'Book childcare place for Madison', completed: false, dueDate: '2026-05-01', frequency: 'one-time', notes: 'Book 2+ months ahead. Confirm hours, fees, notice period. Get settling-in sessions scheduled.', links: [] },
            { id: 4, task: 'Contact employer HR about return', completed: false, dueDate: '2026-05-15', frequency: 'one-time', notes: 'Confirm return date, any KIT (Keeping In Touch) days available, discuss flexible working if needed.', links: [] },
            { id: 5, task: 'Prepare for return - refresh knowledge', completed: false, dueDate: '2026-06-15', frequency: 'one-time', notes: 'Review any policy changes, refresh clinical knowledge. Check CPD requirements.', links: [] },
            { id: 6, task: 'Madison settling-in at nursery', completed: false, dueDate: '2026-06-20', frequency: 'one-time', notes: 'Usually 1-2 weeks of short sessions before full days. Practice the morning routine.', links: [] },
            { id: 7, task: 'Return to PIP Assessor role', completed: false, dueDate: '2026-07-01', frequency: 'milestone', notes: 'üéâ ¬£40k salary resumes! Consider phased return if offered.', links: [] },
            { id: 8, task: 'Complete annual CPD requirements', completed: false, dueDate: '2026-12-31', frequency: 'yearly', notes: 'NMC revalidation: 35 hours CPD, 5 feedback pieces, 5 reflections, confirmation discussion.', links: [{ name: 'NMC Revalidation', url: 'https://www.nmc.org.uk/revalidation/' }] },
            { id: 9, task: 'Research senior PIP assessor requirements', completed: false, dueDate: '2027-03-01', frequency: 'one-time', notes: 'Band 6: ¬£45-50k. Usually requires 2+ years experience, mentoring skills, complex case handling.', links: [] },
            { id: 10, task: 'Apply for senior position', completed: false, dueDate: '2027-06-01', frequency: 'one-time', notes: 'Prepare evidence of competence, completed complex cases, any training delivered.', links: [] }
          ],
          tips: 'üíº PIP Assessor Career Path:\n‚Ä¢ Band 5 (Standard): ¬£28-34k\n‚Ä¢ Band 6 (Senior): ¬£34-42k\n‚Ä¢ Band 7 (Lead): ¬£42-50k\n‚Ä¢ Management: ¬£45-60k\n\n‚ú® Specialist areas (mental health, complex cases) can accelerate progression.',
          resources: [{ name: 'NMC', url: 'https://www.nmc.org.uk/' }]
        },
        {
          id: 3,
          person: 'Family',
          title: 'Move from Seaham to Sheffield',
          description: 'Relocate family by December 2025 for better opportunities',
          icon: 'üè†',
          priority: 'critical',
          targetDate: '2025-12-01',
          steps: [
            { id: 1, task: 'Research Sheffield family neighbourhoods', completed: false, dueDate: '2025-12-10', frequency: 'one-time', estimatedHours: 4, notes: 'Best areas: Crookes (students/young families), Walkley (affordable, community feel), Nether Edge (leafy, good schools), Hillsborough (transport links). Avoid: Burngreave, Page Hall, Pitsmoor.', links: [{ name: 'Rightmove Sheffield', url: 'https://www.rightmove.co.uk/property-to-rent/Sheffield.html' }, { name: 'Sheffield Forum', url: 'https://www.sheffieldforum.co.uk/' }] },
            { id: 2, task: 'Check school catchment areas', completed: false, dueDate: '2025-12-15', frequency: 'one-time', notes: 'Madison will need primary school Sept 2028. Check Ofsted ratings for local schools.', links: [{ name: 'Sheffield Schools', url: 'https://www.sheffield.gov.uk/schools' }, { name: 'School Checker', url: 'https://www.gov.uk/school-performance-tables' }] },
            { id: 3, task: 'Set rental budget and requirements', completed: false, dueDate: '2025-12-15', frequency: 'one-time', notes: 'Sheffield 2-bed: ¬£650-900/month. 3-bed: ¬£800-1100. Need: garden for Madison, near transport, parking.', links: [] },
            { id: 4, task: 'Visit Sheffield - view neighbourhoods', completed: false, dueDate: '2026-03-01', frequency: 'one-time', notes: 'Day trip or weekend. Walk around target areas, check amenities, get feel for community.', links: [] },
            { id: 5, task: 'Start viewing properties', completed: false, dueDate: '2026-06-01', frequency: 'one-time', notes: 'View 10+ properties. Take photos, note pros/cons. Check damp, heating costs, parking.', links: [] },
            { id: 6, task: 'Secure rental property', completed: false, dueDate: '2026-08-01', frequency: 'one-time', notes: 'Deposit: usually 5 weeks rent. Reference checks needed. Sign 12-month tenancy.', links: [] },
            { id: 7, task: 'Notify current landlord', completed: false, dueDate: '2026-09-01', frequency: 'one-time', notes: 'Give required notice (usually 1-2 months). Request deposit return.', links: [] },
            { id: 8, task: 'Update all addresses', completed: false, dueDate: '2026-10-01', frequency: 'one-time', notes: 'DVLA, bank, GP, dentist, HMRC, benefits, electoral roll, subscriptions. Use Royal Mail redirect.', links: [{ name: 'Mail Redirect', url: 'https://www.royalmail.com/personal/receiving-mail/redirection' }] },
            { id: 9, task: 'Book removal company', completed: false, dueDate: '2026-10-15', frequency: 'one-time', notes: 'Get 3 quotes. Seaham to Sheffield ~2 hours. Budget: ¬£400-800 for full service.', links: [] },
            { id: 10, task: 'Move day!', completed: false, dueDate: '2026-11-01', frequency: 'milestone', notes: 'üéâ New chapter begins! Clean old property, final meter readings, key handover.', links: [] },
            { id: 11, task: 'Register with local services', completed: false, dueDate: '2026-11-15', frequency: 'one-time', notes: 'GP surgery, dentist, council tax, electoral roll. Update driving licence address.', links: [{ name: 'Find GP', url: 'https://www.nhs.uk/service-search/find-a-gp' }] }
          ],
          tips: 'üè† Sheffield Cost of Living:\n‚Ä¢ Rent 2-bed: ¬£650-900/month\n‚Ä¢ Council Tax Band B: ~¬£150/month\n‚Ä¢ Utilities: ¬£150-200/month\n‚Ä¢ Much cheaper than London/South!\n\nüöó 90 mins to Seaham, so visits home are easy.',
          resources: [{ name: 'Sheffield City Council', url: 'https://www.sheffield.gov.uk/' }, { name: 'Zoopla Sheffield', url: 'https://www.zoopla.co.uk/to-rent/property/sheffield/' }]
        },
        {
          id: 4,
          person: 'Madison',
          title: "Madison's Development & Education",
          description: 'Key milestones, childcare, school journey - born Feb 2024',
          icon: 'üéì',
          priority: 'high',
          targetDate: '2035-09-01',
          steps: [
            { id: 1, task: 'Book 2-year health visitor check', completed: false, dueDate: '2026-02-01', frequency: 'one-time', notes: 'Developmental review. Check speech, movement, social skills.', links: [{ name: 'Health Visitor Info', url: 'https://www.nhs.uk/conditions/baby/babys-development/height-weight-and-reviews/baby-reviews/' }] },
            { id: 2, task: 'Apply for 15 hours free childcare (age 2)', completed: false, dueDate: '2026-04-01', frequency: 'one-time', notes: 'Available if on benefits. Term after 2nd birthday. Apply via Childcare Choices.', links: [{ name: 'Free Childcare', url: 'https://www.childcarechoices.gov.uk/' }] },
            { id: 3, task: 'Start nursery/pre-school sessions', completed: false, dueDate: '2026-09-01', frequency: 'milestone', notes: 'Great for social development before school. Helps with separation anxiety.', links: [] },
            { id: 4, task: 'Apply for 30 hours free childcare (age 3)', completed: false, dueDate: '2027-04-01', frequency: 'one-time', notes: 'If both parents working. Otherwise 15 hours universal. Apply via gov.uk.', links: [{ name: '30 Hours Info', url: 'https://www.gov.uk/30-hours-free-childcare' }] },
            { id: 5, task: 'Research primary schools in Sheffield', completed: false, dueDate: '2027-09-01', frequency: 'one-time', notes: 'Check Ofsted ratings, visit open days, understand catchment areas.', links: [{ name: 'Compare Schools', url: 'https://www.compare-school-performance.service.gov.uk/' }] },
            { id: 6, task: 'Apply for Reception school place', completed: false, dueDate: '2028-01-15', frequency: 'one-time', notes: 'DEADLINE: 15 January 2028 for September 2028 start. Apply via Sheffield council.', links: [{ name: 'Sheffield Admissions', url: 'https://www.sheffield.gov.uk/schools/admissions' }] },
            { id: 7, task: 'Buy school uniform and supplies', completed: false, dueDate: '2028-08-15', frequency: 'one-time', notes: 'Uniform, shoes, PE kit, book bag, water bottle. Check school requirements.', links: [] },
            { id: 8, task: 'Madison starts Reception (age 4)', completed: false, dueDate: '2028-09-01', frequency: 'milestone', notes: 'üéí First day of school! Big milestone! Prepare for tiredness and emotions.', links: [] },
            { id: 9, task: 'Year 1 Phonics Screening Check', completed: false, dueDate: '2029-06-01', frequency: 'milestone', notes: 'National test. No prep needed - tests school teaching, not child failure.', links: [] },
            { id: 10, task: 'Key Stage 1 SATs (age 7)', completed: false, dueDate: '2031-05-01', frequency: 'milestone', notes: 'Reading, maths, SPAG tests. Low-pressure at this age.', links: [] },
            { id: 11, task: 'Transition to Key Stage 2', completed: false, dueDate: '2031-09-01', frequency: 'milestone', notes: 'Years 3-6. More independence, homework increases.', links: [] },
            { id: 12, task: 'Apply for secondary school', completed: false, dueDate: '2034-10-31', frequency: 'one-time', notes: 'DEADLINE: 31 October 2034 for September 2035 start.', links: [] },
            { id: 13, task: 'Madison starts secondary school (age 11)', completed: false, dueDate: '2035-09-01', frequency: 'milestone', notes: 'üéì Year 7! New uniform, big school, new friends.', links: [] }
          ],
          tips: "üéì UK Education Timeline:\n‚Ä¢ Age 2: 15 hrs free (if eligible)\n‚Ä¢ Age 3-4: 30 hrs free (if working)\n‚Ä¢ Age 4: Reception\n‚Ä¢ Age 5-7: KS1 (Years 1-2)\n‚Ä¢ Age 7-11: KS2 (Years 3-6)\n‚Ä¢ Age 11-16: Secondary\n‚Ä¢ Age 16: GCSEs\n‚Ä¢ Age 18: A-Levels/College",
          resources: [{ name: 'Good Schools Guide', url: 'https://www.goodschoolsguide.co.uk/' }]
        },
        {
          id: 5,
          person: 'Madison',
          title: "Madison's Activities & Interests",
          description: 'Classes, clubs, experiences to support development',
          icon: 'üé®',
          priority: 'medium',
          targetDate: '2030-01-01',
          steps: [
            { id: 1, task: 'Find local baby/toddler groups', completed: false, dueDate: '2025-12-15', frequency: 'weekly', notes: 'Seaham area: check library, church halls, Sure Start centres. Free/low cost. Great for socialising.', links: [{ name: 'Netmums Local', url: 'https://www.netmums.com/local' }] },
            { id: 2, task: 'Start swimming lessons (from age 3)', completed: false, dueDate: '2027-03-01', frequency: 'weekly', notes: 'Essential life skill. Local pools often have parent-toddler sessions from younger.', links: [] },
            { id: 3, task: 'Explore outdoor activities', completed: false, dueDate: '2027-06-01', frequency: 'weekly', notes: 'Sheffield has Peak District nearby! Family walks, nature trails. Madison will love it.', links: [{ name: 'Peak District', url: 'https://www.peakdistrict.gov.uk/' }] },
            { id: 4, task: 'Try gymnastics/dance class', completed: false, dueDate: '2028-01-01', frequency: 'weekly', notes: 'Helps coordination, confidence, makes friends.', links: [] },
            { id: 5, task: 'Library story time', completed: false, dueDate: '2025-12-15', frequency: 'weekly', notes: 'FREE! Great for language development. Sheffield has excellent libraries.', links: [{ name: 'Sheffield Libraries', url: 'https://www.sheffield.gov.uk/libraries' }] },
            { id: 6, task: 'Explore music classes', completed: false, dueDate: '2027-09-01', frequency: 'weekly', notes: 'Rhythm, singing, instruments. Good for brain development.', links: [] }
          ],
          tips: "üéØ Child Development Tips:\n‚Ä¢ Read daily - best thing you can do\n‚Ä¢ Outdoor play every day\n‚Ä¢ Limit screen time before age 2\n‚Ä¢ Talk constantly - builds vocabulary\n‚Ä¢ Let them get messy - sensory learning\n‚Ä¢ Praise effort, not just results",
          resources: [{ name: "What to Expect", url: 'https://www.whattoexpect.com/' }]
        },
        {
          id: 6,
          person: 'Family',
          title: 'Financial Security & ¬£95k Goal',
          description: 'Build from ¬£0 to ¬£95k combined income by 2028',
          icon: 'üí∞',
          priority: 'critical',
          targetDate: '2028-12-01',
          steps: [
            { id: 1, task: 'Create monthly budget spreadsheet', completed: false, dueDate: '2025-12-10', frequency: 'one-time', notes: 'Track all income (benefits) vs expenses. Shawnie leads this. Review weekly.', links: [{ name: 'Budget Template', url: 'https://www.moneyhelper.org.uk/en/everyday-money/budgeting/budget-planner' }] },
            { id: 2, task: 'Check all benefit entitlements', completed: false, dueDate: '2025-12-15', frequency: 'yearly', notes: 'PIP, ESA, Child Benefit, Council Tax Reduction, DHP, Healthy Start. Use benefits calculator.', links: [{ name: 'Benefits Calculator', url: 'https://www.entitledto.co.uk/' }, { name: 'Turn2Us', url: 'https://www.turn2us.org.uk/' }] },
            { id: 3, task: 'Apply for Discretionary Housing Payment', completed: false, dueDate: '2025-12-20', frequency: 'yearly', notes: 'Extra help with rent if benefits dont cover it. Apply to council.', links: [] },
            { id: 4, task: 'Set up savings account (even ¬£10/month)', completed: false, dueDate: '2026-01-01', frequency: 'monthly', notes: 'Emergency fund target: 3 months expenses. Start small, build habit.', links: [] },
            { id: 5, task: 'Find Shawnie\'s lost pension', completed: false, dueDate: '2026-01-15', frequency: 'one-time', notes: 'Use Pension Tracing Service. Could be ¬£1000s sitting there! Takes 5 mins to search.', links: [{ name: 'Pension Tracing', url: 'https://www.gov.uk/find-pension-contact-details' }] },
            { id: 6, task: 'Review Rich\'s pension (¬£72,766)', completed: false, dueDate: '2026-02-01', frequency: 'yearly', notes: 'Check performance, fees, projected retirement value. Consider consolidating if changing jobs.', links: [] },
            { id: 7, task: 'Shawnie returns to work - ¬£40k', completed: false, dueDate: '2026-07-01', frequency: 'milestone', notes: 'üéâ Major income milestone! Benefits will adjust - check new entitlements.', links: [] },
            { id: 8, task: 'Rich starts earning (apprentice ~¬£15k)', completed: false, dueDate: '2026-09-01', frequency: 'milestone', notes: 'Combined income ~¬£55k. Benefits reduce but better off overall.', links: [] },
            { id: 9, task: 'Rich qualified - ¬£40k+', completed: false, dueDate: '2028-12-01', frequency: 'milestone', notes: 'üéØ TARGET ACHIEVED! Combined ¬£80-95k. Financial security.', links: [] },
            { id: 10, task: 'Shawnie promotion to senior - ¬£45-50k', completed: false, dueDate: '2027-07-01', frequency: 'milestone', notes: 'Push combined income towards ¬£95k target.', links: [] }
          ],
          tips: "üí∑ Income Progression:\n‚Ä¢ Now: Benefits only (~¬£20-25k equiv)\n‚Ä¢ July 2026: Shawnie ¬£40k + benefits\n‚Ä¢ Sept 2026: + Rich apprentice ¬£15k\n‚Ä¢ 2027: Shawnie ¬£45k + Rich ¬£20k\n‚Ä¢ 2028: Shawnie ¬£50k + Rich ¬£40k = ¬£90k+\n\nüéØ You CAN get to ¬£95k!",
          resources: [{ name: 'Money Helper', url: 'https://www.moneyhelper.org.uk/' }, { name: 'Citizens Advice', url: 'https://www.citizensadvice.org.uk/' }]
        },
        {
          id: 7,
          person: 'Family',
          title: 'Family Fun & Quality Time',
          description: 'Activities based on shared interests',
          icon: 'üéÆ',
          priority: 'medium',
          targetDate: '2030-01-01',
          steps: [
            { id: 1, task: 'Weekly board game night', completed: false, dueDate: '2025-12-07', frequency: 'weekly', notes: 'Rich & Shawnie love this! Start a tradition Madison can join as she grows.', links: [] },
            { id: 2, task: 'Monthly hike/outdoor adventure', completed: false, dueDate: '2025-12-31', frequency: 'monthly', notes: 'Shawnie loves hiking - Peak District is right there! Start easy with Madison.', links: [{ name: 'Family Walks', url: 'https://www.walkingbritain.co.uk/' }] },
            { id: 3, task: 'Visit Sheffield museums (FREE)', completed: false, dueDate: '2026-02-01', frequency: 'monthly', notes: 'Rich loves history! Weston Park, Kelham Island, Millennium Gallery - all free.', links: [{ name: 'Museums Sheffield', url: 'https://www.museums-sheffield.org.uk/' }] },
            { id: 4, task: '2-player gaming sessions', completed: false, dueDate: '2025-12-14', frequency: 'weekly', notes: 'Rich & Shawnie time after Madison in bed. Cozy nights in.', links: [] },
            { id: 5, task: 'Lego project together', completed: false, dueDate: '2026-01-01', frequency: 'monthly', notes: 'Both love Lego! Budget for occasional sets. Great for Madison development too.', links: [] },
            { id: 6, task: 'Sheffield road trips', completed: false, dueDate: '2026-06-01', frequency: 'monthly', notes: 'Rich loves driving, Shawnie loves exploration. Yorkshire Dales, Lake District, coast.', links: [] },
            { id: 7, task: 'Cozy cafe dates', completed: false, dueDate: '2026-03-01', frequency: 'monthly', notes: 'Shawnie loves cafes, coffee, cake. Sheffield has amazing independent cafes.', links: [{ name: 'Sheffield Cafes', url: 'https://www.theoutdoorcity.co.uk/food-drink/cafes' }] },
            { id: 8, task: 'Visit Rich\'s friends/family in Sheffield', completed: false, dueDate: '2026-02-01', frequency: 'monthly', notes: 'Rich misses them! Regular visits once moved.', links: [] },
            { id: 9, task: 'Anime movie nights', completed: false, dueDate: '2025-12-20', frequency: 'weekly', notes: 'Shawnie loves anime and fantasy. Cozy evenings together.', links: [] },
            { id: 10, task: 'Plan annual holiday/trip', completed: false, dueDate: '2027-01-01', frequency: 'yearly', notes: 'Once income stable. UK breaks first, then abroad. Shawnie loves travelling!', links: [] }
          ],
          tips: "üíï Free/Cheap Family Fun:\n‚Ä¢ Library (FREE)\n‚Ä¢ Parks and playgrounds (FREE)\n‚Ä¢ Museums (often FREE)\n‚Ä¢ Hiking (FREE)\n‚Ä¢ Board games (one-time cost)\n‚Ä¢ Cooking together (you need to eat anyway!)\n‚Ä¢ Picnics\n‚Ä¢ Beach days",
          resources: []
        }
      ],
      habits: [
        // Rich daily
        { id: 1, person: 'Rich', task: 'Hoover house', frequency: 'daily', icon: 'üßπ', completed: false, streak: 0 },
        { id: 2, person: 'Rich', task: 'Bath Madison', frequency: 'daily', icon: 'üõÅ', completed: false, streak: 0 },
        { id: 3, person: 'Rich', task: 'Wash clothes', frequency: 'daily', icon: 'üëï', completed: false, streak: 0 },
        { id: 4, person: 'Rich', task: 'Cook dinner', frequency: 'daily', icon: 'üç≥', completed: false, streak: 0 },
        { id: 5, person: 'Rich', task: 'Tidy living room', frequency: 'daily', icon: 'üõãÔ∏è', completed: false, streak: 0 },
        // Shawnie daily
        { id: 6, person: 'Shawnie', task: 'Change/dress Madison', frequency: 'daily', icon: 'üë∂', completed: false, streak: 0 },
        { id: 7, person: 'Shawnie', task: 'Family admin', frequency: 'daily', icon: 'üìã', completed: false, streak: 0 },
        { id: 8, person: 'Shawnie', task: 'Check finances', frequency: 'daily', icon: 'üí∞', completed: false, streak: 0 },
        { id: 9, person: 'Shawnie', task: 'Madison activities/play', frequency: 'daily', icon: 'üé®', completed: false, streak: 0 },
        // Both weekly
        { id: 10, person: 'Both', task: 'Deep clean kitchen', frequency: 'weekly', icon: '‚ú®', completed: false, streak: 0 },
        { id: 11, person: 'Both', task: 'Deep clean bathroom', frequency: 'weekly', icon: 'üöø', completed: false, streak: 0 },
        { id: 12, person: 'Both', task: 'Change bed sheets', frequency: 'weekly', icon: 'üõèÔ∏è', completed: false, streak: 0 },
        { id: 13, person: 'Both', task: 'Food shopping', frequency: 'weekly', icon: 'üõí', completed: false, streak: 0 },
        { id: 14, person: 'Shawnie', task: 'Weekly budget review', frequency: 'weekly', icon: 'üìä', completed: false, streak: 0 },
        { id: 15, person: 'Rich', task: 'Meal plan for week', frequency: 'weekly', icon: 'üìù', completed: false, streak: 0 },
        // Monthly
        { id: 16, person: 'Both', task: 'Declutter session', frequency: 'monthly', icon: 'üì¶', completed: false, streak: 0 },
        { id: 17, person: 'Both', task: 'Full house deep clean', frequency: 'monthly', icon: 'üè†', completed: false, streak: 0 },
        { id: 18, person: 'Shawnie', task: 'Monthly money review', frequency: 'monthly', icon: 'üí∑', completed: false, streak: 0 },
        // Family fun
        { id: 19, person: 'Family', task: 'Date night', frequency: 'weekly', icon: 'üíï', completed: false, streak: 0 },
        { id: 20, person: 'Family', task: 'Board game night', frequency: 'weekly', icon: 'üé≤', completed: false, streak: 0 },
        { id: 21, person: 'Family', task: 'Outdoor adventure', frequency: 'monthly', icon: 'ü•æ', completed: false, streak: 0 },
        { id: 22, person: 'Family', task: 'Family photo', frequency: 'monthly', icon: 'üì∏', completed: false, streak: 0 },
      ],
      moneyTips: [
        { id: 1, icon: 'üèõÔ∏è', title: 'Council Tax Reduction', text: 'Apply for up to 100% reduction. With PIP + ESA you likely qualify for max support. Apply at sheffield.gov.uk once moved.', category: 'benefits' },
        { id: 2, icon: 'ü•õ', title: 'Healthy Start Vouchers', text: '¬£8.50/week for milk, fruit, veg. Automatic if on benefits with child under 4. Check healthystart.nhs.uk', category: 'benefits' },
        { id: 3, icon: 'üíä', title: 'Free Prescriptions', text: 'ESA = free prescriptions. Also get HC2 certificate for free dental and optical vouchers.', category: 'healthcare' },
        { id: 4, icon: '‚ö°', title: 'Warm Home Discount', text: '¬£150/year off electricity. Auto-applied if on certain benefits. Also compare tariffs every 6 months.', category: 'bills' },
        { id: 5, icon: 'üçΩÔ∏è', title: 'Meal Planning Saves ¬£200+/month', text: 'Plan weekly, shop with list only, batch cook Sundays. Aldi/Lidl for basics. Rich is a good cook - use it!', category: 'food' },
        { id: 6, icon: 'üë∂', title: 'Baby Bundle Swaps', text: 'Join Sheffield Baby Swap groups on Facebook. Free/cheap clothes as Madison grows. She wont know the difference!', category: 'parenting' },
        { id: 7, icon: 'üîç', title: 'Find Lost Pensions', text: 'Use gov.uk Pension Tracing Service for Shawnie. Could have ¬£1000s sitting unclaimed. 5 minute search!', category: 'pensions' },
        { id: 8, icon: 'üè´', title: 'Tax-Free Childcare', text: 'When working: ¬£500 free per ¬£2000 spent (20% saving). Up to ¬£2000/year free. Apply before Shawnie returns.', category: 'childcare' },
        { id: 9, icon: 'üé®', title: 'Free Days Out', text: 'Sheffield: Weston Park Museum, Millennium Gallery, Graves Park, Botanical Gardens - ALL FREE! Peak District walks too.', category: 'lifestyle' },
        { id: 10, icon: 'üìö', title: 'Library = Free Everything', text: 'Books, audiobooks (Shawnie!), DVDs, events, internet, warm space. Get cards immediately on moving.', category: 'lifestyle' },
        { id: 11, icon: 'üöø', title: 'Water Bill Help', text: 'WaterSure scheme caps water bills if on benefits with medical need or 3+ children. Also check for social tariffs.', category: 'bills' },
        { id: 12, icon: 'üì∫', title: 'TV Licence', text: 'May not need one if only streaming (no live TV or iPlayer). Check rules - save ¬£159/year!', category: 'bills' },
        { id: 13, icon: 'üéÅ', title: 'Birthday/Christmas Tips', text: 'Set budget early, spread cost, use cashback sites. Handmade gifts are special. Kids dont need expensive stuff.', category: 'lifestyle' },
        { id: 14, icon: 'üè¶', title: 'Emergency Fund', text: 'Even ¬£10/month builds up. 3 months expenses is the goal. Stops debt spiral when unexpected costs hit.', category: 'savings' },
      ],
      lastReset: new Date().toDateString()
    });

    const createDefaultConfig = () => ({
      familyName: 'Turnbull-Shaw',
      location: 'Seaham, UK',
      targetLocation: 'Sheffield',
      startDate: '2025-12-04',
      moveDate: '2026-11-01',
      richIncome: 0,
      shawnieIncome: 0,
      shawnieReturnDate: '2026-07-01',
      shawnieReturnIncome: 40000,
      richPension: 72766.58,
      shawniePension: 0,
      savings: 0,
      incomeTarget: 95000,
      benefits: {
        pip: 0,
        esa: 0,
        childBenefit: 0,
        dhp: 0,
        other: 0
      },
      profiles: {
        rich: {
          interests: ['History', 'Reading', 'Learning', 'Exploring', 'Travel', 'Scenery', 'Driving', 'Gaming', 'Board games', 'Lego', 'Cozy days', 'Cooking', 'Order/plans', 'Family time'],
          strengths: ['Good cook', 'Motivated by learning'],
          challenges: ['Needs motivation', 'Bad with finances']
        },
        shawnie: {
          interests: ['Fantasy', 'Anime', '2-player gaming', 'Lego', 'Hiking', 'Board games', 'Romance', 'Exploration', 'Outdoors', 'Physical activities', 'Road trips', 'Family time', 'Socialising', 'Travelling', 'Audiobooks', 'Coffee', 'Cake', 'Cafes', 'Quiet breaks', 'Scenic views', 'Orderly plans'],
          strengths: ['Marathon runner (past)', 'Mountain hiking', 'Good with finances', 'Organised'],
          challenges: ['Out of practice physically post-baby']
        }
      }
    });

    // Main App
    const App = () => {
      const [tab, setTab] = useState('today');
      const [data, setData] = useState(createDefaultData);
      const [config, setConfig] = useState(createDefaultConfig);
      const [expandedGoals, setExpandedGoals] = useState({});
      const [showCelebration, setShowCelebration] = useState(false);
      const [modal, setModal] = useState(null);
      const [editItem, setEditItem] = useState(null);
      const [weekOffset, setWeekOffset] = useState(0);

      // Load data
      useEffect(() => {
        try {
          const savedData = localStorage.getItem('familyHubDataV2');
          const savedConfig = localStorage.getItem('familyHubConfigV2');
          if (savedData) setData(JSON.parse(savedData));
          if (savedConfig) setConfig(JSON.parse(savedConfig));
        } catch (e) { console.error('Load error:', e); }
      }, []);

      // Save data
      useEffect(() => {
        localStorage.setItem('familyHubDataV2', JSON.stringify(data));
      }, [data]);

      useEffect(() => {
        localStorage.setItem('familyHubConfigV2', JSON.stringify(config));
      }, [config]);

      // Reset daily habits
      useEffect(() => {
        const today = new Date().toDateString();
        if (data.lastReset !== today) {
          setData(prev => ({
            ...prev,
            habits: prev.habits.map(h => h.frequency === 'daily' ? { ...h, completed: false } : h),
            lastReset: today
          }));
        }
      }, []);

      const celebrate = () => {
        setShowCelebration(true);
        setTimeout(() => setShowCelebration(false), 2000);
      };

      const toggleStep = (goalId, stepId) => {
        const goal = data.goals.find(g => g.id === goalId);
        const step = goal?.steps.find(s => s.id === stepId);
        if (!step?.completed) celebrate();
        setData(prev => ({
          ...prev,
          goals: prev.goals.map(g => g.id === goalId ? {
            ...g,
            steps: g.steps.map(s => s.id === stepId ? { ...s, completed: !s.completed } : s)
          } : g)
        }));
      };

      const toggleHabit = (id) => {
        const habit = data.habits.find(h => h.id === id);
        if (!habit?.completed) celebrate();
        setData(prev => ({
          ...prev,
          habits: prev.habits.map(h => h.id === id ? {
            ...h,
            completed: !h.completed,
            streak: h.completed ? Math.max(0, h.streak - 1) : h.streak + 1
          } : h)
        }));
      };

      // Stats
      const allSteps = data.goals.flatMap(g => g.steps);
      const completedSteps = allSteps.filter(s => s.completed).length;
      const totalProgress = allSteps.length ? Math.round((completedSteps / allSteps.length) * 100) : 0;
      const daysSinceStart = Math.max(0, Math.floor((new Date() - new Date(config.startDate)) / 86400000));
      const currentIncome = config.richIncome + config.shawnieIncome;
      const totalBenefits = Object.values(config.benefits || {}).reduce((a, b) => a + b, 0);
      const combinedPensions = config.richPension + config.shawniePension;

      // Week dates for planner
      const getWeekDates = (offset = 0) => {
        const today = new Date();
        const start = new Date(today);
        start.setDate(today.getDate() - today.getDay() + 1 + (offset * 7)); // Monday
        return Array.from({ length: 7 }, (_, i) => {
          const d = new Date(start);
          d.setDate(start.getDate() + i);
          return d;
        });
      };

      const weekDates = getWeekDates(weekOffset);

      // Get tasks for a specific date
      const getTasksForDate = (date) => {
        const dateStr = date.toISOString().split('T')[0];
        const dayName = date.toLocaleDateString('en-GB', { weekday: 'long' });
        const tasks = [];

        // Daily habits
        data.habits.filter(h => h.frequency === 'daily').forEach(h => {
          tasks.push({ ...h, type: 'habit' });
        });

        // Weekly habits on specific days (simplified: show on Saturdays)
        if (date.getDay() === 6) {
          data.habits.filter(h => h.frequency === 'weekly').forEach(h => {
            tasks.push({ ...h, type: 'habit' });
          });
        }

        // Monthly habits on 1st
        if (date.getDate() === 1) {
          data.habits.filter(h => h.frequency === 'monthly').forEach(h => {
            tasks.push({ ...h, type: 'habit' });
          });
        }

        // Goal steps due on this date
        data.goals.forEach(goal => {
          goal.steps.filter(s => s.dueDate === dateStr).forEach(step => {
            tasks.push({ ...step, type: 'step', goalId: goal.id, person: goal.person, goalTitle: goal.title });
          });
        });

        return tasks;
      };

      // Export/Import
      const exportData = () => {
        const blob = new Blob([JSON.stringify({ config, data, exportDate: new Date().toISOString() }, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `family-hub-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        URL.revokeObjectURL(url);
      };

      const importData = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (event) => {
          try {
            const imported = JSON.parse(event.target.result);
            if (imported.config) setConfig(imported.config);
            if (imported.data) setData(imported.data);
            alert('Data imported successfully!');
          } catch (err) {
            alert('Error importing file');
          }
        };
        reader.readAsText(file);
      };

      // Add/Edit Goal
      const saveGoal = (goalData) => {
        if (goalData.id) {
          setData(prev => ({
            ...prev,
            goals: prev.goals.map(g => g.id === goalData.id ? { ...g, ...goalData } : g)
          }));
        } else {
          const newId = Math.max(0, ...data.goals.map(g => g.id)) + 1;
          setData(prev => ({
            ...prev,
            goals: [...prev.goals, { ...goalData, id: newId, steps: goalData.steps || [] }]
          }));
        }
        setModal(null);
        setEditItem(null);
      };

      const deleteGoal = (id) => {
        if (confirm('Delete this goal and all its steps?')) {
          setData(prev => ({ ...prev, goals: prev.goals.filter(g => g.id !== id) }));
        }
      };

      // Add/Edit Step
      const saveStep = (goalId, stepData) => {
        setData(prev => ({
          ...prev,
          goals: prev.goals.map(g => {
            if (g.id !== goalId) return g;
            if (stepData.id) {
              return { ...g, steps: g.steps.map(s => s.id === stepData.id ? { ...s, ...stepData } : s) };
            } else {
              const newId = Math.max(0, ...g.steps.map(s => s.id)) + 1;
              return { ...g, steps: [...g.steps, { ...stepData, id: newId, completed: false }] };
            }
          })
        }));
        setModal(null);
        setEditItem(null);
      };

      const deleteStep = (goalId, stepId) => {
        if (confirm('Delete this step?')) {
          setData(prev => ({
            ...prev,
            goals: prev.goals.map(g => g.id === goalId ? { ...g, steps: g.steps.filter(s => s.id !== stepId) } : g)
          }));
        }
      };

      // Add/Edit Habit
      const saveHabit = (habitData) => {
        if (habitData.id) {
          setData(prev => ({
            ...prev,
            habits: prev.habits.map(h => h.id === habitData.id ? { ...h, ...habitData } : h)
          }));
        } else {
          const newId = Math.max(0, ...data.habits.map(h => h.id)) + 1;
          setData(prev => ({
            ...prev,
            habits: [...prev.habits, { ...habitData, id: newId, completed: false, streak: 0 }]
          }));
        }
        setModal(null);
        setEditItem(null);
      };

      const deleteHabit = (id) => {
        if (confirm('Delete this habit?')) {
          setData(prev => ({ ...prev, habits: prev.habits.filter(h => h.id !== id) }));
        }
      };

      const isToday = (date) => date.toDateString() === new Date().toDateString();

      return (
        <div className="app">
          {showCelebration && (
            <div className="celebration">
              <div className="celebration-box">üéâ Amazing Progress!</div>
            </div>
          )}

          {/* Header */}
          <header className="header">
            <div className="header-content">
              <div className="header-top">
                <div className="logo">
                  <div className="logo-icon">üè†</div>
                  <div>
                    <div className="logo-title">{config.familyName} Family Hub</div>
                    <div className="logo-sub">{config.location} ‚Üí {config.targetLocation}</div>
                  </div>
                </div>
                <div className="header-btns">
                  <button className="icon-btn" onClick={exportData} title="Export">üíæ</button>
                  <label className="icon-btn" title="Import">
                    üìÇ
                    <input type="file" accept=".json" onChange={importData} style={{ display: 'none' }} />
                  </label>
                  <button className="icon-btn" onClick={() => setTab('settings')} title="Settings">‚öôÔ∏è</button>
                </div>
              </div>

              <div className="stats-row">
                <div className="stat-box">
                  <div className="stat-val">{totalProgress}%</div>
                  <div className="stat-lbl">Progress</div>
                </div>
                <div className="stat-box">
                  <div className="stat-val">{daysSinceStart}</div>
                  <div className="stat-lbl">Days</div>
                </div>
                <div className="stat-box">
                  <div className="stat-val">{completedSteps}/{allSteps.length}</div>
                  <div className="stat-lbl">Tasks Done</div>
                </div>
                <div className="stat-box">
                  <div className="stat-val">¬£{Math.round(totalBenefits/1000)}k</div>
                  <div className="stat-lbl">Benefits/yr</div>
                </div>
                <div className="stat-box">
                  <div className="stat-val">¬£{Math.round(combinedPensions/1000)}k</div>
                  <div className="stat-lbl">Pensions</div>
                </div>
              </div>
            </div>
          </header>

          {/* Nav */}
          <div className="nav-wrap">
            <nav className="nav">
              {[
                { id: 'today', label: 'üìã Today' },
                { id: 'planner', label: 'üìÖ Planner' },
                { id: 'goals', label: 'üéØ Goals' },
                { id: 'rota', label: 'üßπ Rota' },
                { id: 'finances', label: 'üí∞ Finances' },
                { id: 'tips', label: 'üí° Tips' },
                { id: 'settings', label: '‚öôÔ∏è Settings' }
              ].map(t => (
                <button key={t.id} className={`nav-btn ${tab === t.id ? 'active' : ''}`} onClick={() => setTab(t.id)}>
                  {t.label}
                </button>
              ))}
            </nav>
          </div>

          <main className="main">
            {/* TODAY */}
            {tab === 'today' && (
              <>
                <div className="card">
                  <div className="card-head">
                    <div>
                      <h2 className="card-title">
                        <span className="card-title-icon">üìã</span>
                        {new Date().toLocaleDateString('en-GB', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' })}
                      </h2>
                      <p className="card-sub">Good {new Date().getHours() < 12 ? 'morning' : new Date().getHours() < 18 ? 'afternoon' : 'evening'}, Turnbull-Shaw family!</p>
                    </div>
                  </div>

                  <h3 style={{ marginBottom: 16 }}>Daily Habits</h3>
                  <div className="habit-grid">
                    {data.habits.filter(h => h.frequency === 'daily').map(h => (
                      <div key={h.id} className={`habit-card ${h.completed ? 'done' : ''}`} onClick={() => toggleHabit(h.id)}>
                        <div className="habit-icon">{h.icon}</div>
                        <div className="habit-name">{h.task}</div>
                        <div className="habit-person">{h.person}</div>
                        {h.streak > 0 && <div className="habit-streak">üî• {h.streak}</div>}
                      </div>
                    ))}
                  </div>
                </div>

                <div className="card">
                  <div className="card-head">
                    <div>
                      <h2 className="card-title"><span className="card-title-icon">üéØ</span>Upcoming Tasks</h2>
                      <p className="card-sub">Due in the next 14 days</p>
                    </div>
                  </div>
                  {data.goals.flatMap(g => g.steps.filter(s => !s.completed && s.dueDate).map(s => ({ ...s, goal: g }))).sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate)).slice(0, 10).map(step => (
                    <div key={`${step.goal.id}-${step.id}`} className={`step-item ${step.completed ? 'completed' : ''}`}>
                      <div className={`step-check ${step.completed ? 'checked' : ''}`} onClick={() => toggleStep(step.goal.id, step.id)}>
                        {step.completed && <Check />}
                      </div>
                      <div className="step-content">
                        <div className="step-name">{step.task}</div>
                        <div className="step-meta">
                          <span className={`tag tag-${step.goal.person.toLowerCase()}`}>{step.goal.person}</span>
                          <span>üìÖ {new Date(step.dueDate).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })}</span>
                          <span style={{ color: 'var(--navy-light)' }}>‚Ä¢ {step.goal.title}</span>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </>
            )}

            {/* PLANNER */}
            {tab === 'planner' && (
              <div className="card">
                <div className="card-head">
                  <div>
                    <h2 className="card-title"><span className="card-title-icon">üìÖ</span>Weekly Planner</h2>
                    <p className="card-sub">Week of {weekDates[0].toLocaleDateString('en-GB', { day: 'numeric', month: 'long' })}</p>
                  </div>
                  <div style={{ display: 'flex', gap: 8 }}>
                    <button className="btn btn-secondary btn-sm" onClick={() => setWeekOffset(w => w - 1)}>‚Üê Prev</button>
                    <button className="btn btn-secondary btn-sm" onClick={() => setWeekOffset(0)}>Today</button>
                    <button className="btn btn-secondary btn-sm" onClick={() => setWeekOffset(w => w + 1)}>Next ‚Üí</button>
                  </div>
                </div>

                <div className="planner-grid">
                  {['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'].map(d => (
                    <div key={d} className="planner-day-head">{d}</div>
                  ))}
                  {weekDates.map(date => {
                    const tasks = getTasksForDate(date);
                    return (
                      <div key={date.toISOString()} className={`planner-day ${isToday(date) ? 'today' : ''}`}>
                        <div className="planner-date">{date.getDate()}</div>
                        {tasks.slice(0, 6).map((t, i) => (
                          <div
                            key={i}
                            className={`planner-task ${t.person?.toLowerCase()} ${t.completed ? 'completed' : ''}`}
                            onClick={() => t.type === 'habit' ? toggleHabit(t.id) : toggleStep(t.goalId, t.id)}
                          >
                            {t.icon || 'üìå'} {t.task}
                          </div>
                        ))}
                        {tasks.length > 6 && <div style={{ fontSize: '0.7rem', color: 'var(--navy-light)', padding: 4 }}>+{tasks.length - 6} more</div>}
                      </div>
                    );
                  })}
                </div>
              </div>
            )}

            {/* GOALS */}
            {tab === 'goals' && (
              <div className="card">
                <div className="card-head">
                  <div>
                    <h2 className="card-title"><span className="card-title-icon">üéØ</span>Family Goals</h2>
                    <p className="card-sub">Your roadmap to the future</p>
                  </div>
                  <button className="btn btn-primary" onClick={() => { setEditItem(null); setModal('goal'); }}>
                    <Plus /> Add Goal
                  </button>
                </div>

                {data.goals.map(goal => {
                  const completed = goal.steps.filter(s => s.completed).length;
                  const total = goal.steps.length;
                  const pct = total ? Math.round((completed / total) * 100) : 0;
                  const isOpen = expandedGoals[goal.id];

                  return (
                    <div key={goal.id} className="goal-card">
                      <div className="goal-head" onClick={() => setExpandedGoals(prev => ({ ...prev, [goal.id]: !prev[goal.id] }))}>
                        <div className={`goal-icon ${goal.person.toLowerCase()}`}>{goal.icon}</div>
                        <div className="goal-info">
                          <div className="goal-title">{goal.title}</div>
                          <div className="goal-desc">{goal.description}</div>
                          <div className="goal-progress">
                            <div className="goal-bar"><div className="goal-bar-fill" style={{ width: `${pct}%` }} /></div>
                            <span className="goal-pct">{completed}/{total}</span>
                          </div>
                        </div>
                        <div className="goal-actions" onClick={e => e.stopPropagation()}>
                          <button className="btn btn-secondary btn-sm" onClick={() => { setEditItem(goal); setModal('goal'); }}><Edit /></button>
                          <button className="btn btn-secondary btn-sm" onClick={() => deleteGoal(goal.id)}><Trash /></button>
                        </div>
                        <div style={{ transform: isOpen ? 'rotate(180deg)' : 'none', transition: 'transform 0.2s' }}><ChevronDown /></div>
                      </div>

                      <div className={`goal-body ${isOpen ? 'open' : ''}`}>
                        {goal.tips && (
                          <div className="tip-box">
                            <div className="tip-title">üí° Tips & Insights</div>
                            <div className="tip-text" style={{ whiteSpace: 'pre-line' }}>{goal.tips}</div>
                          </div>
                        )}

                        {goal.resources?.length > 0 && (
                          <div className="info-box">
                            <div className="info-title">üîó Resources</div>
                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: 6, marginTop: 8 }}>
                              {goal.resources.map((r, i) => (
                                <a key={i} href={r.url} target="_blank" rel="noopener noreferrer" className="step-link">{r.name} ‚Üí</a>
                              ))}
                            </div>
                          </div>
                        )}

                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: 20, marginBottom: 12 }}>
                          <h4>Action Steps ({total})</h4>
                          <button className="btn btn-secondary btn-sm" onClick={() => { setEditItem({ goalId: goal.id }); setModal('step'); }}>
                            <Plus /> Add Step
                          </button>
                        </div>

                        {goal.steps.map(step => (
                          <div key={step.id} className={`step-item ${step.completed ? 'completed' : ''}`}>
                            <div className={`step-check ${step.completed ? 'checked' : ''}`} onClick={() => toggleStep(goal.id, step.id)}>
                              {step.completed && <Check />}
                            </div>
                            <div className="step-content">
                              <div className="step-name">{step.task}</div>
                              <div className="step-meta">
                                {step.dueDate && <span>üìÖ {new Date(step.dueDate).toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' })}</span>}
                                {step.frequency && <span className={`tag tag-${step.frequency}`}>{step.frequency}</span>}
                                {step.estimatedHours && <span>‚è±Ô∏è {step.estimatedHours}h</span>}
                              </div>
                              {step.notes && <div className="step-notes">üìù {step.notes}</div>}
                              {step.links?.length > 0 && (
                                <div className="step-links">
                                  {step.links.map((l, i) => (
                                    <a key={i} href={l.url} target="_blank" rel="noopener noreferrer" className="step-link">{l.name} ‚Üí</a>
                                  ))}
                                </div>
                              )}
                            </div>
                            <div style={{ display: 'flex', gap: 4 }}>
                              <button className="btn btn-secondary btn-sm" onClick={() => { setEditItem({ ...step, goalId: goal.id }); setModal('step'); }}><Edit /></button>
                              <button className="btn btn-secondary btn-sm" onClick={() => deleteStep(goal.id, step.id)}><Trash /></button>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                  );
                })}
              </div>
            )}

            {/* ROTA */}
            {tab === 'rota' && (
              <div className="card">
                <div className="card-head">
                  <div>
                    <h2 className="card-title"><span className="card-title-icon">üßπ</span>Cleaning & Habits Rota</h2>
                    <p className="card-sub">Keep the house running smoothly</p>
                  </div>
                  <button className="btn btn-primary" onClick={() => { setEditItem(null); setModal('habit'); }}>
                    <Plus /> Add Habit
                  </button>
                </div>

                {['daily', 'weekly', 'monthly'].map(freq => (
                  <div key={freq} className="rota-section">
                    <div className="rota-title">
                      <span className={`tag tag-${freq}`}>{freq.charAt(0).toUpperCase() + freq.slice(1)}</span>
                    </div>
                    <div className="habit-grid">
                      {data.habits.filter(h => h.frequency === freq).map(h => (
                        <div key={h.id} className={`habit-card ${h.completed ? 'done' : ''}`} onClick={() => toggleHabit(h.id)}>
                          <div className="habit-icon">{h.icon}</div>
                          <div className="habit-name">{h.task}</div>
                          <div className="habit-person">{h.person}</div>
                          {h.streak > 0 && <div className="habit-streak">üî• {h.streak}</div>}
                          <div style={{ marginTop: 8, display: 'flex', justifyContent: 'center', gap: 4 }} onClick={e => e.stopPropagation()}>
                            <button className="btn btn-secondary btn-sm" onClick={() => { setEditItem(h); setModal('habit'); }}><Edit /></button>
                            <button className="btn btn-secondary btn-sm" onClick={() => deleteHabit(h.id)}><Trash /></button>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                ))}
              </div>
            )}

            {/* FINANCES */}
            {tab === 'finances' && (
              <>
                <div className="finance-grid">
                  <div className="finance-card rich">
                    <div className="finance-label">Rich's Income</div>
                    <div className="finance-value">¬£{config.richIncome.toLocaleString()}</div>
                    <input type="number" className="finance-input" value={config.richIncome} onChange={e => setConfig(c => ({ ...c, richIncome: Number(e.target.value) || 0 }))} />
                  </div>
                  <div className="finance-card shawnie">
                    <div className="finance-label">Shawnie's Income</div>
                    <div className="finance-value">¬£{config.shawnieIncome.toLocaleString()}</div>
                    <input type="number" className="finance-input" value={config.shawnieIncome} onChange={e => setConfig(c => ({ ...c, shawnieIncome: Number(e.target.value) || 0 }))} />
                  </div>
                  <div className="finance-card combined">
                    <div className="finance-label">Combined Income</div>
                    <div className="finance-value">¬£{currentIncome.toLocaleString()}</div>
                    <div style={{ fontSize: '0.85rem', marginTop: 8, opacity: 0.8 }}>¬£{Math.round(currentIncome/12).toLocaleString()}/month</div>
                  </div>
                  <div className="finance-card savings">
                    <div className="finance-label">Savings</div>
                    <div className="finance-value">¬£{config.savings.toLocaleString()}</div>
                    <input type="number" className="finance-input" value={config.savings} onChange={e => setConfig(c => ({ ...c, savings: Number(e.target.value) || 0 }))} />
                  </div>
                </div>

                <div className="card" style={{ marginTop: 20 }}>
                  <h3 style={{ marginBottom: 16 }}>üìã Benefits (Annual)</h3>
                  <div className="finance-grid">
                    <div className="finance-card benefits">
                      <div className="finance-label">PIP (Shawnie)</div>
                      <input type="number" className="finance-input" placeholder="Annual amount" value={config.benefits?.pip || 0} onChange={e => setConfig(c => ({ ...c, benefits: { ...c.benefits, pip: Number(e.target.value) || 0 } }))} />
                    </div>
                    <div className="finance-card benefits">
                      <div className="finance-label">ESA (Both)</div>
                      <input type="number" className="finance-input" placeholder="Annual amount" value={config.benefits?.esa || 0} onChange={e => setConfig(c => ({ ...c, benefits: { ...c.benefits, esa: Number(e.target.value) || 0 } }))} />
                    </div>
                    <div className="finance-card benefits">
                      <div className="finance-label">Child Benefit</div>
                      <input type="number" className="finance-input" placeholder="Annual amount" value={config.benefits?.childBenefit || 0} onChange={e => setConfig(c => ({ ...c, benefits: { ...c.benefits, childBenefit: Number(e.target.value) || 0 } }))} />
                    </div>
                    <div className="finance-card benefits">
                      <div className="finance-label">DHP / Other</div>
                      <input type="number" className="finance-input" placeholder="Annual amount" value={config.benefits?.other || 0} onChange={e => setConfig(c => ({ ...c, benefits: { ...c.benefits, other: Number(e.target.value) || 0 } }))} />
                    </div>
                  </div>
                  <div style={{ marginTop: 16, padding: 16, background: 'var(--cream)', borderRadius: 'var(--radius-md)' }}>
                    <strong>Total Benefits: ¬£{totalBenefits.toLocaleString()}/year</strong> (¬£{Math.round(totalBenefits/12).toLocaleString()}/month)
                  </div>
                </div>

                <div className="card">
                  <h3 style={{ marginBottom: 16 }}>üè¶ Pensions</h3>
                  <div className="finance-grid">
                    <div className="finance-card" style={{ background: 'linear-gradient(135deg, #e5e7eb, #d1d5db)', color: 'var(--navy)' }}>
                      <div className="finance-label">Rich's Pension</div>
                      <div className="finance-value">¬£{config.richPension.toLocaleString()}</div>
                      <input type="number" step="0.01" className="finance-input" value={config.richPension} onChange={e => setConfig(c => ({ ...c, richPension: Number(e.target.value) || 0 }))} />
                    </div>
                    <div className="finance-card" style={{ background: 'linear-gradient(135deg, #e5e7eb, #d1d5db)', color: 'var(--navy)' }}>
                      <div className="finance-label">Shawnie's Pension</div>
                      <div className="finance-value">¬£{config.shawniePension.toLocaleString()}</div>
                      <input type="number" step="0.01" className="finance-input" value={config.shawniePension} onChange={e => setConfig(c => ({ ...c, shawniePension: Number(e.target.value) || 0 }))} />
                    </div>
                  </div>
                  <div className="tip-box" style={{ marginTop: 16 }}>
                    <div className="tip-title">üîç Find Shawnie's Pension!</div>
                    <div className="tip-text">Use the <a href="https://www.gov.uk/find-pension-contact-details" target="_blank" rel="noopener noreferrer" style={{ color: '#92400e', fontWeight: 600 }}>GOV.UK Pension Tracing Service</a> - takes 5 minutes and could find thousands!</div>
                  </div>
                </div>

                <div className="card">
                  <h3 style={{ marginBottom: 16 }}>üéØ Path to ¬£{(config.incomeTarget/1000).toFixed(0)}k</h3>
                  <div style={{ background: 'var(--cream-dark)', borderRadius: 999, height: 24, overflow: 'hidden', marginBottom: 16 }}>
                    <div style={{ height: '100%', width: `${Math.min(100, (currentIncome/config.incomeTarget)*100)}%`, background: 'linear-gradient(90deg, var(--terracotta), var(--gold))', borderRadius: 999, display: 'flex', alignItems: 'center', justifyContent: 'flex-end', paddingRight: 8, color: 'white', fontWeight: 700, fontSize: '0.8rem' }}>
                      {Math.round((currentIncome/config.incomeTarget)*100)}%
                    </div>
                  </div>
                  <div style={{ display: 'grid', gap: 8 }}>
                    <div style={{ display: 'flex', justifyContent: 'space-between', padding: 12, background: 'white', borderRadius: 8 }}>
                      <span>Rich Target (Qualified Electrician)</span>
                      <strong style={{ color: 'var(--rich)' }}>¬£45,000</strong>
                    </div>
                    <div style={{ display: 'flex', justifyContent: 'space-between', padding: 12, background: 'white', borderRadius: 8 }}>
                      <span>Shawnie Target (Senior PIP)</span>
                      <strong style={{ color: 'var(--shawnie)' }}>¬£50,000</strong>
                    </div>
                    <div style={{ display: 'flex', justifyContent: 'space-between', padding: 12, background: 'var(--sage-light)', borderRadius: 8 }}>
                      <strong>Combined Target</strong>
                      <strong style={{ color: 'var(--sage)' }}>¬£{config.incomeTarget.toLocaleString()}</strong>
                    </div>
                    <div style={{ display: 'flex', justifyContent: 'space-between', padding: 12, background: '#fef3c7', borderRadius: 8 }}>
                      <strong>Gap Remaining</strong>
                      <strong style={{ color: '#92400e' }}>¬£{(config.incomeTarget - currentIncome).toLocaleString()}</strong>
                    </div>
                  </div>
                </div>
              </>
            )}

            {/* TIPS */}
            {tab === 'tips' && (
              <div className="card">
                <div className="card-head">
                  <div>
                    <h2 className="card-title"><span className="card-title-icon">üí°</span>Money Tips & Life Hacks</h2>
                    <p className="card-sub">Practical advice for families on benefits</p>
                  </div>
                </div>
                <div className="tips-grid">
                  {data.moneyTips.map(tip => (
                    <div key={tip.id} className="money-tip">
                      <div className="money-tip-icon">{tip.icon}</div>
                      <div className="money-tip-title">{tip.title}</div>
                      <div className="money-tip-text">{tip.text}</div>
                      <span className="money-tip-cat">{tip.category}</span>
                    </div>
                  ))}
                </div>
              </div>
            )}

            {/* SETTINGS */}
            {tab === 'settings' && (
              <div className="card">
                <div className="card-head">
                  <div>
                    <h2 className="card-title"><span className="card-title-icon">‚öôÔ∏è</span>Settings</h2>
                    <p className="card-sub">Configure your family hub</p>
                  </div>
                </div>

                <div className="settings-grid">
                  <div className="setting-section">
                    <div className="setting-title">Family Info</div>
                    <div className="form-group">
                      <label className="form-label">Family Name</label>
                      <input type="text" className="form-input" value={config.familyName} onChange={e => setConfig(c => ({ ...c, familyName: e.target.value }))} />
                    </div>
                    <div className="form-group">
                      <label className="form-label">Current Location</label>
                      <input type="text" className="form-input" value={config.location} onChange={e => setConfig(c => ({ ...c, location: e.target.value }))} />
                    </div>
                    <div className="form-group">
                      <label className="form-label">Target Location</label>
                      <input type="text" className="form-input" value={config.targetLocation} onChange={e => setConfig(c => ({ ...c, targetLocation: e.target.value }))} />
                    </div>
                  </div>

                  <div className="setting-section">
                    <div className="setting-title">Key Dates</div>
                    <div className="form-group">
                      <label className="form-label">Journey Start Date</label>
                      <input type="date" className="form-input" value={config.startDate} onChange={e => setConfig(c => ({ ...c, startDate: e.target.value }))} />
                    </div>
                    <div className="form-group">
                      <label className="form-label">Planned Move Date</label>
                      <input type="date" className="form-input" value={config.moveDate} onChange={e => setConfig(c => ({ ...c, moveDate: e.target.value }))} />
                    </div>
                    <div className="form-group">
                      <label className="form-label">Shawnie Return to Work</label>
                      <input type="date" className="form-input" value={config.shawnieReturnDate} onChange={e => setConfig(c => ({ ...c, shawnieReturnDate: e.target.value }))} />
                    </div>
                  </div>

                  <div className="setting-section">
                    <div className="setting-title">Financial Targets</div>
                    <div className="form-group">
                      <label className="form-label">Income Target (¬£)</label>
                      <input type="number" className="form-input" value={config.incomeTarget} onChange={e => setConfig(c => ({ ...c, incomeTarget: Number(e.target.value) || 0 }))} />
                    </div>
                    <div className="form-group">
                      <label className="form-label">Shawnie Return Income (¬£)</label>
                      <input type="number" className="form-input" value={config.shawnieReturnIncome} onChange={e => setConfig(c => ({ ...c, shawnieReturnIncome: Number(e.target.value) || 0 }))} />
                    </div>
                  </div>
                </div>

                <div style={{ marginTop: 24, paddingTop: 24, borderTop: '1px solid var(--cream-dark)', display: 'flex', flexWrap: 'wrap', gap: 12 }}>
                  <button className="btn btn-secondary" onClick={exportData}>üíæ Export Backup</button>
                  <label className="btn btn-secondary" style={{ cursor: 'pointer' }}>
                    üìÇ Import Backup
                    <input type="file" accept=".json" onChange={importData} style={{ display: 'none' }} />
                  </label>
                  <button className="btn btn-danger" onClick={() => {
                    if (confirm('Reset ALL data? This cannot be undone!')) {
                      localStorage.clear();
                      window.location.reload();
                    }
                  }}>üîÑ Reset All</button>
                </div>
              </div>
            )}
          </main>

          {/* FAB */}
          <button className="fab" onClick={() => setTab('today')}>üè†</button>

          {/* MODALS */}
          {modal === 'goal' && (
            <GoalModal
              goal={editItem}
              onSave={saveGoal}
              onClose={() => { setModal(null); setEditItem(null); }}
            />
          )}

          {modal === 'step' && (
            <StepModal
              step={editItem}
              onSave={(stepData) => saveStep(editItem.goalId, stepData)}
              onClose={() => { setModal(null); setEditItem(null); }}
            />
          )}

          {modal === 'habit' && (
            <HabitModal
              habit={editItem}
              onSave={saveHabit}
              onClose={() => { setModal(null); setEditItem(null); }}
            />
          )}
        </div>
      );
    };

    // Goal Modal
    const GoalModal = ({ goal, onSave, onClose }) => {
      const [form, setForm] = useState(goal || {
        person: 'Family',
        title: '',
        description: '',
        icon: 'üéØ',
        priority: 'medium',
        targetDate: '',
        tips: '',
        resources: []
      });

      return (
        <div className="modal-overlay" onClick={onClose}>
          <div className="modal" onClick={e => e.stopPropagation()}>
            <div className="modal-head">
              <h3 className="modal-title">{goal?.id ? 'Edit Goal' : 'Add Goal'}</h3>
              <button className="modal-close" onClick={onClose}>√ó</button>
            </div>
            <div className="modal-body">
              <div className="form-row">
                <div className="form-group">
                  <label className="form-label">Person</label>
                  <select className="form-select" value={form.person} onChange={e => setForm(f => ({ ...f, person: e.target.value }))}>
                    <option>Rich</option>
                    <option>Shawnie</option>
                    <option>Madison</option>
                    <option>Family</option>
                  </select>
                </div>
                <div className="form-group">
                  <label className="form-label">Icon</label>
                  <input type="text" className="form-input" value={form.icon} onChange={e => setForm(f => ({ ...f, icon: e.target.value }))} placeholder="üéØ" />
                </div>
              </div>
              <div className="form-group">
                <label className="form-label">Title</label>
                <input type="text" className="form-input" value={form.title} onChange={e => setForm(f => ({ ...f, title: e.target.value }))} placeholder="Goal title..." />
              </div>
              <div className="form-group">
                <label className="form-label">Description</label>
                <textarea className="form-textarea" value={form.description} onChange={e => setForm(f => ({ ...f, description: e.target.value }))} placeholder="Brief description..." />
              </div>
              <div className="form-row">
                <div className="form-group">
                  <label className="form-label">Priority</label>
                  <select className="form-select" value={form.priority} onChange={e => setForm(f => ({ ...f, priority: e.target.value }))}>
                    <option value="critical">Critical</option>
                    <option value="high">High</option>
                    <option value="medium">Medium</option>
                    <option value="low">Low</option>
                  </select>
                </div>
                <div className="form-group">
                  <label className="form-label">Target Date</label>
                  <input type="date" className="form-input" value={form.targetDate} onChange={e => setForm(f => ({ ...f, targetDate: e.target.value }))} />
                </div>
              </div>
              <div className="form-group">
                <label className="form-label">Tips & Insights</label>
                <textarea className="form-textarea" value={form.tips} onChange={e => setForm(f => ({ ...f, tips: e.target.value }))} placeholder="Helpful tips, salary info, timeline notes..." rows={4} />
              </div>
            </div>
            <div className="modal-foot">
              <button className="btn btn-secondary" onClick={onClose}>Cancel</button>
              <button className="btn btn-primary" onClick={() => onSave(form)}>Save Goal</button>
            </div>
          </div>
        </div>
      );
    };

    // Step Modal
    const StepModal = ({ step, onSave, onClose }) => {
      const [form, setForm] = useState({
        task: step?.task || '',
        dueDate: step?.dueDate || '',
        frequency: step?.frequency || 'one-time',
        estimatedHours: step?.estimatedHours || '',
        notes: step?.notes || '',
        links: step?.links || [],
        id: step?.id
      });

      const [newLink, setNewLink] = useState({ name: '', url: '' });

      const addLink = () => {
        if (newLink.name && newLink.url) {
          setForm(f => ({ ...f, links: [...f.links, { ...newLink }] }));
          setNewLink({ name: '', url: '' });
        }
      };

      const removeLink = (idx) => {
        setForm(f => ({ ...f, links: f.links.filter((_, i) => i !== idx) }));
      };

      return (
        <div className="modal-overlay" onClick={onClose}>
          <div className="modal" onClick={e => e.stopPropagation()}>
            <div className="modal-head">
              <h3 className="modal-title">{step?.id ? 'Edit Step' : 'Add Step'}</h3>
              <button className="modal-close" onClick={onClose}>√ó</button>
            </div>
            <div className="modal-body">
              <div className="form-group">
                <label className="form-label">Task</label>
                <input type="text" className="form-input" value={form.task} onChange={e => setForm(f => ({ ...f, task: e.target.value }))} placeholder="What needs to be done..." />
              </div>
              <div className="form-row">
                <div className="form-group">
                  <label className="form-label">Due Date</label>
                  <input type="date" className="form-input" value={form.dueDate} onChange={e => setForm(f => ({ ...f, dueDate: e.target.value }))} />
                </div>
                <div className="form-group">
                  <label className="form-label">Frequency</label>
                  <select className="form-select" value={form.frequency} onChange={e => setForm(f => ({ ...f, frequency: e.target.value }))}>
                    <option value="one-time">One-time</option>
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly">Monthly</option>
                    <option value="yearly">Yearly</option>
                    <option value="milestone">Milestone</option>
                    <option value="ongoing">Ongoing</option>
                  </select>
                </div>
                <div className="form-group">
                  <label className="form-label">Est. Hours</label>
                  <input type="number" className="form-input" value={form.estimatedHours} onChange={e => setForm(f => ({ ...f, estimatedHours: e.target.value }))} placeholder="0" />
                </div>
              </div>
              <div className="form-group">
                <label className="form-label">Notes & Details</label>
                <textarea className="form-textarea" value={form.notes} onChange={e => setForm(f => ({ ...f, notes: e.target.value }))} placeholder="Phone numbers, specific instructions, tips..." rows={3} />
              </div>
              <div className="form-group">
                <label className="form-label">Useful Links</label>
                {form.links.map((l, i) => (
                  <div key={i} style={{ display: 'flex', gap: 8, marginBottom: 8, alignItems: 'center' }}>
                    <span style={{ flex: 1, fontSize: '0.9rem' }}>{l.name}: {l.url}</span>
                    <button className="btn btn-secondary btn-sm" onClick={() => removeLink(i)}>√ó</button>
                  </div>
                ))}
                <div style={{ display: 'flex', gap: 8 }}>
                  <input type="text" className="form-input" style={{ flex: 1 }} placeholder="Link name" value={newLink.name} onChange={e => setNewLink(l => ({ ...l, name: e.target.value }))} />
                  <input type="text" className="form-input" style={{ flex: 2 }} placeholder="https://..." value={newLink.url} onChange={e => setNewLink(l => ({ ...l, url: e.target.value }))} />
                  <button className="btn btn-secondary btn-sm" onClick={addLink}>Add</button>
                </div>
              </div>
            </div>
            <div className="modal-foot">
              <button className="btn btn-secondary" onClick={onClose}>Cancel</button>
              <button className="btn btn-primary" onClick={() => onSave(form)}>Save Step</button>
            </div>
          </div>
        </div>
      );
    };

    // Habit Modal
    const HabitModal = ({ habit, onSave, onClose }) => {
      const [form, setForm] = useState(habit || {
        person: 'Both',
        task: '',
        frequency: 'daily',
        icon: '‚úÖ'
      });

      return (
        <div className="modal-overlay" onClick={onClose}>
          <div className="modal" onClick={e => e.stopPropagation()}>
            <div className="modal-head">
              <h3 className="modal-title">{habit?.id ? 'Edit Habit' : 'Add Habit'}</h3>
              <button className="modal-close" onClick={onClose}>√ó</button>
            </div>
            <div className="modal-body">
              <div className="form-row">
                <div className="form-group">
                  <label className="form-label">Person</label>
                  <select className="form-select" value={form.person} onChange={e => setForm(f => ({ ...f, person: e.target.value }))}>
                    <option>Rich</option>
                    <option>Shawnie</option>
                    <option>Both</option>
                    <option>Family</option>
                  </select>
                </div>
                <div className="form-group">
                  <label className="form-label">Icon</label>
                  <input type="text" className="form-input" value={form.icon} onChange={e => setForm(f => ({ ...f, icon: e.target.value }))} placeholder="‚úÖ" />
                </div>
              </div>
              <div className="form-group">
                <label className="form-label">Task</label>
                <input type="text" className="form-input" value={form.task} onChange={e => setForm(f => ({ ...f, task: e.target.value }))} placeholder="What needs doing..." />
              </div>
              <div className="form-group">
                <label className="form-label">Frequency</label>
                <select className="form-select" value={form.frequency} onChange={e => setForm(f => ({ ...f, frequency: e.target.value }))}>
                  <option value="daily">Daily</option>
                  <option value="weekly">Weekly</option>
                  <option value="monthly">Monthly</option>
                </select>
              </div>
            </div>
            <div className="modal-foot">
              <button className="btn btn-secondary" onClick={onClose}>Cancel</button>
              <button className="btn btn-primary" onClick={() => onSave(form)}>Save Habit</button>
            </div>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
